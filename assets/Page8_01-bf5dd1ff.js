import{r,by as g,a as j,j as e}from"./index-93adda7a.js";import{s as f}from"./page8_01.module-9ab2ecea.js";function C(){const[o,u]=r.useState([]),[n,c]=r.useState(""),[i,h]=r.useState([]),[d,p]=r.useState([]),[m]=g(""),l=m.get("selectLocation")||"";if(r.useEffect(()=>{const t="https://opendata.cwa.gov.tw/api/v1/rest/datastore/O-A0003-001?Authorization=CWA-EB3FD491-9755-4E3C-A31D-70C0FCCFD682&format=JSON";j.get(t).then(function(a){const s=a.data.records.location;u(s)}).catch(function(a){console.log(a)})},[]),r.useEffect(()=>{l&&(c(l),console.log("searchLocation",n),console.log("selectLocation",l))},[l]),r.useEffect(()=>{const t=o.filter(s=>s.parameter[2].parameterValue.toLowerCase()===n);h(t);const a=o.filter(s=>s.parameter[2].parameterValue.toLowerCase().includes(n.toLowerCase())).map(s=>s.parameter[2].parameterValue);p(a),n===""&&p([])},[n,o]),!o)return"No Post !!!";console.log("post",o);const x=t=>{c(t.target.value)};return e.jsxs("div",{className:f.main,children:[e.jsx("h1",{children:"天氣預報API"}),e.jsx("hr",{}),e.jsx("input",{value:n,type:"text",placeholder:"查詢地區1",onChange:x}),i.length>0?null:e.jsx(e.Fragment,{children:e.jsx("ul",{children:d.map((t,a)=>e.jsx("li",{onClick:()=>c(t),style:{cursor:"pointer",color:"#001529",borderRadius:"20px",width:"10%",marginTop:"10px",padding:"10px",textAlign:"center"},children:t},a))})}),e.jsx("ul",{children:i.map((t,a)=>e.jsxs("li",{children:[e.jsxs("p",{children:["縣市：",t.parameter[0].parameterValue]}),e.jsxs("p",{children:["地區：",t.parameter[2].parameterValue]}),e.jsxs("p",{children:["測站位置：",t.locationName]}),e.jsxs("p",{children:["當前溫度：",t.weatherElement[3].elementValue]}),e.jsxs("p",{children:["更新時間：",t.time.obsTime]}),t.weatherElement[20].elementValue!=-99?e.jsx(e.Fragment,{children:e.jsxs("p",{children:["天氣：",t.weatherElement[20].elementValue]})}):null,t.weatherElement[19].elementValue!=-99?e.jsx(e.Fragment,{children:e.jsxs("p",{children:["十分鐘後溫度預測：",t.weatherElement[19].elementValue]})}):null,e.jsx("hr",{})]},a))})]})}export{C as default};
