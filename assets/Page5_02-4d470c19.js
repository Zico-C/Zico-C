import{r as u,aP as S,aQ as d,j as e,G as b}from"./index-b0b3e6fc.js";import{u as g}from"./useQuery-eddb0829.js";import{s as h}from"./page8_01.module-ad5c13d7.js";const P=async()=>await(await fetch("http://localhost:3005/posts")).json(),{useBreakpoint:C}=b,v=async({id:s,title:o,subtitle:n,author:a,memberNum:i})=>await(await fetch("http://localhost:3005/posts",{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({id:s,title:o,subtitle:n,author:a,memberNum:i})})).json(),w=async s=>await(await fetch(`http://localhost:3005/posts/${s}`,{method:"DELETE",headers:{"content-type":"application/json"}})).json();function N(){const s=C(),[o,n]=u.useState(""),[a,i]=u.useState(""),{data:l,isSuccess:r}=g(["posts"],P),c=S(),p=d(v,{onSuccess:t=>{c.invalidateQueries("posts"),console.log("創建Post成功",t)},onError:t=>{console.log("創建Post失敗",t)},onSettled:()=>{console.log("創建Post操作成功")}}),x=d(w,{onSuccess:t=>{c.invalidateQueries("posts"),console.log("刪除成功",t)},onError:t=>{console.error("刪除失敗",t)},onSettled:()=>{console.log("刪除操作完成")}});function m(){return Math.floor(Math.random()*1e5)+Date.now()}const y=m(),j=()=>{p.mutate({id:0,title:o,subtitle:a,author:"ZICO",memberNum:y}),n(""),i("")},f=t=>{x.mutate(t)};return e.jsx(e.Fragment,{children:e.jsxs("div",{className:h.main,children:[e.jsxs("form",{children:[e.jsx("input",{type:"text",placeholder:"title",value:o,onChange:t=>n(t.target.value)}),e.jsx("input",{type:"text",placeholder:"subTitle",value:a,onChange:t=>i(t.target.value)})]}),r&&l.map(t=>e.jsxs("div",{children:[e.jsxs("p",{style:s.xs?{fontSize:"22px"}:{},children:["id：",t.id]}),e.jsxs("p",{style:s.xs?{fontSize:"22px"}:{},children:["title：",t.title]}),e.jsxs("p",{style:s.xs?{fontSize:"22px"}:{},children:["subTitle：",t.subtitle]}),e.jsxs("p",{style:s.xs?{fontSize:"22px"}:{},children:["author：",t.author]}),e.jsxs("p",{style:s.xs?{fontSize:"22px"}:{},children:["memberNum：",t.memberNum]}),e.jsx("button",{onClick:()=>f(t.id),className:h.delete,style:s.xs?{fontSize:"22px"}:{},children:"Delete Post"}),e.jsx("hr",{color:"red"})]},t.id)),e.jsx("button",{onClick:j,style:s.xs?{fontSize:"22px"}:{},children:"Create Post"})]})})}export{N as default};
