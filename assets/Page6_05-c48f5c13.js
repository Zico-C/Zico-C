import{r as i,m as y,s as T,j as t}from"./index-0193b769.js";import{s as C}from"./page8_01.module-ad5c13d7.js";const S=async s=>{try{(await fetch("http://localhost:3005/locationIP",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)})).ok?console.log("座標成功發送到後端"):console.error("無法發送座標到後端")}catch(o){console.error("發送請求時出現錯誤："+o)}};function L(){const[s,o]=i.useState(0),[u,d]=i.useState(0),n=i.useRef(null),[p,g]=y.useMessage(),m=T(S,{}),f=()=>{p.open({type:"warning",content:"請填入上傳人員"})},h=()=>{"geolocation"in navigator?navigator.geolocation.getCurrentPosition(function(x){var c,l;const{latitude:a,longitude:r}=x.coords,e=(c=n.current)==null?void 0:c.value;if(e!==""&&(e==null?void 0:e.trim())!==""){const j=new Date().toLocaleString("zh-TW");o(a),d(r),m.mutate({id:0,name:e,updateTime:`${j} UTC+8`,latitude:a,longitude:r})}else f(),(l=n.current)==null||l.focus()}):console.log("瀏覽器不支援地理位置服務")};return t.jsxs("div",{className:C.main,children:[g,t.jsx("input",{type:"text",placeholder:"上傳人員",ref:n}),t.jsx("br",{}),t.jsx("button",{onClick:h,children:"獲取並發送座標"}),t.jsxs("p",{children:["緯度：",s]}),t.jsxs("p",{children:["經度：",u]})]})}export{L as default};
