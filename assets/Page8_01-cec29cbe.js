import{r as o,bu as A,a as C,j as e}from"./index-db6a9efe.js";import{s as D}from"./page8_01.module-ad5c13d7.js";function y(){const[a,x]=o.useState([]),[n,c]=o.useState(""),[i,T]=o.useState([]),[E,h]=o.useState([]),[S]=A(""),l=S.get("selectLocation")||"";if(console.log("postTest",a.map(t=>{var r;return(r=t==null?void 0:t.GeoInfo)==null?void 0:r.TownName})),o.useEffect(()=>{const t="https://opendata.cwa.gov.tw/api/v1/rest/datastore/O-A0003-001?Authorization=CWA-EB3FD491-9755-4E3C-A31D-70C0FCCFD682&format=JSON";C.get(t).then(function(r){const s=r.data.records.Station;x(s)}).catch(function(r){console.log(r)})},[]),o.useEffect(()=>{l&&(c(l),console.log("searchLocation",n),console.log("selectLocation",l))},[l]),o.useEffect(()=>{const t=a.filter(s=>s.GeoInfo.TownName.toLowerCase()===n);T(t);const r=a.filter(s=>s.GeoInfo.TownName.toLowerCase().includes(n.toLowerCase())).map(s=>s.GeoInfo.TownName);h(r),n===""&&h([])},[n,a]),!a)return"No Post !!!";console.log("post",a),console.log("filteredData");const w=t=>{c(t.target.value)};return e.jsxs("div",{className:D.main,children:[e.jsx("h1",{children:"天氣預報API"}),e.jsx("hr",{}),e.jsx("input",{value:n,type:"text",placeholder:"查詢地區",onChange:w}),i.length>0?null:e.jsx(e.Fragment,{children:e.jsx("ul",{children:E.map((t,r)=>e.jsx("li",{onClick:()=>c(t),style:{cursor:"pointer",color:"#001529",borderRadius:"20px",width:"100%",marginTop:"10px",padding:"10px",textAlign:"left"},children:t},r))})}),e.jsx("ul",{children:i.map((t,r)=>{var s,p,u,d,m,g,f,j;return e.jsxs("li",{children:[e.jsxs("p",{children:["縣市：",t.GeoInfo.CountyName]}),e.jsxs("p",{children:["地區：",t.GeoInfo.TownName]}),e.jsxs("p",{children:["測站位置：",t.StationName]}),t.WeatherElement.AirTemperature!=-99?e.jsx(e.Fragment,{children:e.jsxs("p",{children:["當前溫度：",t.WeatherElement.AirTemperature]})}):e.jsx(e.Fragment,{children:e.jsx("p",{style:{color:"red"},children:"溫度缺值 或 資料異常"})}),e.jsxs("p",{children:["更新時間：",t.ObsTime.DateTime.toString().replace("T"," ").substring(0,19)]}),t.WeatherElement.AirTemperature!=-99?e.jsx(e.Fragment,{children:e.jsxs("p",{children:["天氣：",t.WeatherElement.Weather]})}):null,t.WeatherElement.AirTemperature!=-99?e.jsxs(e.Fragment,{children:[e.jsxs("p",{children:["今日最高溫：",(d=(u=(p=(s=t.WeatherElement)==null?void 0:s.DailyExtreme)==null?void 0:p.DailyHigh)==null?void 0:u.TemperatureInfo)==null?void 0:d.AirTemperature]}),e.jsxs("p",{children:["今日最低溫：",(j=(f=(g=(m=t.WeatherElement)==null?void 0:m.DailyExtreme)==null?void 0:g.DailyLow)==null?void 0:f.TemperatureInfo)==null?void 0:j.AirTemperature]})]}):null,e.jsx("hr",{})]},r)})})]})}export{y as default};
