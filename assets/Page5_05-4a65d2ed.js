import{r as s,bc as w,bd as T,j as e,aL as n,B as z}from"./index-0ef130ba.js";import{u as G}from"./useQuery-630941b5.js";import{s as f}from"./page5.module-e1e49839.js";import{u as N,F as o}from"./index-bed85c12.js";import{C as A}from"./index-8bb8f9fd.js";import"./row-4524a560.js";import"./useLocale-1aa94a16.js";function H(){const v=async()=>{try{return await(await fetch("http://localhost:3003/markers")).json()}catch(t){console.log(t.message)}},S=async({id:t,position:a,name:L,type:W,officialWeb:O,googleMap:$,icon:q})=>{try{return await(await fetch("http://localhost:3003/markers",{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({id:t,position:a,name:L,type:W,officialWeb:O,googleMap:$,icon:q})})).json()}catch(C){console.log(C.message)}},[l,m]=s.useState(""),[i,h]=s.useState(""),[r,g]=s.useState(""),[c,j]=s.useState(""),[p,x]=s.useState(""),[u,y]=s.useState(""),[b]=N(),{data:d,isSuccess:I}=G(["mapMarkers"],v),M=w(),P=T(S,{onSuccess:t=>{M.invalidateQueries("mapMarkers"),console.log("創建Post成功",t)},onError:t=>{console.log("創建Post失敗",t)}}),F=()=>{try{const t=l.split(",").map(a=>parseFloat(a.trim()));P.mutate({id:0,position:t,name:i,type:r,officialWeb:c,googleMap:p,icon:u}),m(""),h(""),g(""),j(""),x(""),y(""),b.resetFields(),console.log("inputPosition",l),console.log("inputLocation",i),console.log("inputType",r),console.log("inputOfficialWeb",c),console.log("inputGoogleMap",p),console.log("inputIcon",u)}catch(t){console.error("解析 JSON 時發生錯誤:",t)}};return e.jsx(e.Fragment,{children:e.jsxs(A,{className:f.APImain,children:[e.jsx("h1",{children:"Post Markers Data"}),e.jsxs(o,{onFinish:F,labelCol:{span:4},wrapperCol:{span:16},form:b,children:[e.jsx(o.Item,{label:e.jsx("label",{style:{color:"#fff",fontSize:"1.3rem"},children:"Position"}),name:"Position",rules:[{required:!0,message:"請輸入正確的 座標格式 number,number",pattern:/^-?\d+(\.\d+)?,\s?-?\d+(\.\d+)?$/}],children:e.jsx(n,{autoComplete:"off",value:l,onChange:t=>m(t.target.value)})}),e.jsx(o.Item,{label:e.jsx("label",{style:{color:"#fff",fontSize:"1.3rem"},children:"Location"}),name:"Location",rules:[{required:!0,message:"請輸入名稱或地名"}],children:e.jsx(n,{autoComplete:"off",value:i,onChange:t=>h(t.target.value)})}),e.jsx(o.Item,{label:e.jsx("label",{style:{color:"#fff",fontSize:"1.3rem"},children:"Type"}),name:"Type",rules:[{required:!0,message:"請輸入類型 (ex:美食 | 景點 | 大眾交通工具)",pattern:/^(景點|美食|大眾交通工具)$/}],children:e.jsx(n,{autoComplete:"off",value:r,onChange:t=>g(t.target.value)})}),e.jsx(o.Item,{label:e.jsx("label",{style:{color:"#fff",fontSize:"1.3rem"},children:"OfficialWeb"}),name:"OfficialWeb",rules:[{required:!1,message:"請輸入官方網站URL",pattern:/^(https?):\/\/[^\s/$.?#].[^\s]*$/}],children:e.jsx(n,{autoComplete:"off",value:c,onChange:t=>j(t.target.value)})}),e.jsx(o.Item,{label:e.jsx("label",{style:{color:"#fff",fontSize:"1.3rem"},children:"GoogleMap"}),name:"GoogleMap",rules:[{required:!1,message:"請輸入 GoogleMap URL",pattern:/^(https?):\/\/[^\s/$.?#].[^\s]*$/}],children:e.jsx(n,{autoComplete:"off",value:p,onChange:t=>x(t.target.value)})}),e.jsx(o.Item,{label:e.jsx("label",{style:{color:"#fff",fontSize:"1.3rem"},children:"Icon"}),name:"Icon",rules:[{required:!1,message:"請輸入 照片檔案 URL",pattern:/^(https?):\/\/[^\s/$.?#].[^\s]*$/}],children:e.jsx(n,{autoComplete:"off",value:u,onChange:t=>y(t.target.value)})})," ",e.jsx(o.Item,{wrapperCol:{offset:4,span:16},className:f.Postbutton,children:e.jsx(z,{type:"primary",htmlType:"submit",children:"提交"})})]}),e.jsxs("div",{children:[I&&e.jsx("hr",{style:{width:"90%",marginBottom:"2rem"}}),I&&(d==null?void 0:d.map(t=>e.jsxs("div",{className:f.card5_5,children:[e.jsxs("p",{children:[e.jsx("span",{children:"id："}),t.id]}),e.jsxs("p",{children:[e.jsx("span",{children:"position："}),t.position[0]+","+t.position[1]]}),e.jsxs("p",{children:[e.jsx("span",{children:"name："}),t.name]}),e.jsxs("p",{children:[e.jsx("span",{children:"type："}),t.type]}),e.jsxs("p",{style:t.officialWeb==null?{display:"none"}:void 0,children:[e.jsx("span",{children:"officialWeb："}),t.officialWeb]}),e.jsxs("p",{style:t.googleMap==null?{display:"none"}:void 0,children:[e.jsx("span",{children:"googleMap："}),t.googleMap]}),e.jsxs("p",{style:t.icon==null?{display:"none"}:void 0,children:[e.jsx("span",{children:"icon："}),t.icon]})]},t.id)))]})]})})}export{H as default};
