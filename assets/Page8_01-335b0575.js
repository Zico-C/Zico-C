import{r as a,bu as A,a as C,j as e}from"./index-94dbde62.js";import{s as D}from"./page8_01.module-ad5c13d7.js";function y(){const[o,x]=a.useState([]),[n,c]=a.useState(""),[i,T]=a.useState([]),[E,h]=a.useState([]),[w]=A(""),l=w.get("selectLocation")||"";if(console.log("postTest",o.map(t=>{var r;return(r=t==null?void 0:t.GeoInfo)==null?void 0:r.TownName})),a.useEffect(()=>{const t="https://opendata.cwa.gov.tw/api/v1/rest/datastore/O-A0003-001?Authorization=CWA-EB3FD491-9755-4E3C-A31D-70C0FCCFD682&format=JSON";C.get(t).then(function(r){const s=r.data.records.Station;x(s)}).catch(function(r){console.log(r)})},[]),a.useEffect(()=>{l&&(c(l),console.log("searchLocation",n),console.log("selectLocation",l))},[l]),a.useEffect(()=>{const t=o.filter(s=>s.GeoInfo.TownName.toLowerCase()===n);T(t);const r=o.filter(s=>s.GeoInfo.TownName.toLowerCase().includes(n.toLowerCase())).map(s=>s.GeoInfo.TownName);h(r),n===""&&h([])},[n,o]),!o)return"No Post !!!";console.log("post",o),console.log("filteredData");const S=t=>{c(t.target.value)};return e.jsxs("div",{className:D.main,children:[e.jsx("h1",{children:"天氣預報API"}),e.jsx("a",{href:"https://opendata.cwa.gov.tw/opendatadoc/Observation/O-A0003-001.pdf",style:{fontSize:"1.2rem"},target:"_New",children:"中央氣象署開放資料平臺資料標準說明文件 ｜ 發布時間：2023-11-15 ｜ 版次 1.0"}),e.jsx("hr",{}),e.jsx("input",{value:n,type:"text",placeholder:"查詢地區",onChange:S}),i.length>0?null:e.jsx(e.Fragment,{children:e.jsx("ul",{children:E.map((t,r)=>e.jsx("li",{onClick:()=>c(t),style:{cursor:"pointer",color:"#001529",borderRadius:"20px",width:"100%",marginTop:"10px",padding:"10px",textAlign:"left"},children:t},r))})}),e.jsx("ul",{children:i.map((t,r)=>{var s,p,d,u,m,f,g,j;return e.jsxs("li",{children:[e.jsxs("p",{children:["縣市：",t.GeoInfo.CountyName]}),e.jsxs("p",{children:["地區：",t.GeoInfo.TownName]}),e.jsxs("p",{children:["測站位置：",t.StationName]}),t.WeatherElement.AirTemperature!=-99?e.jsx(e.Fragment,{children:e.jsxs("p",{children:["當前溫度：",t.WeatherElement.AirTemperature]})}):e.jsx(e.Fragment,{children:e.jsx("p",{style:{color:"red"},children:"溫度缺值 或 資料異常"})}),e.jsxs("p",{children:["更新時間：",t.ObsTime.DateTime.toString().replace("T"," ").substring(0,19)]}),t.WeatherElement.AirTemperature!=-99?e.jsx(e.Fragment,{children:e.jsxs("p",{children:["天氣：",t.WeatherElement.Weather]})}):null,t.WeatherElement.AirTemperature!=-99?e.jsxs(e.Fragment,{children:[e.jsxs("p",{children:["今日最高溫：",(u=(d=(p=(s=t.WeatherElement)==null?void 0:s.DailyExtreme)==null?void 0:p.DailyHigh)==null?void 0:d.TemperatureInfo)==null?void 0:u.AirTemperature]}),e.jsxs("p",{children:["今日最低溫：",(j=(g=(f=(m=t.WeatherElement)==null?void 0:m.DailyExtreme)==null?void 0:f.DailyLow)==null?void 0:g.TemperatureInfo)==null?void 0:j.AirTemperature]})]}):null,e.jsx("hr",{})]},r)})})]})}export{y as default};
