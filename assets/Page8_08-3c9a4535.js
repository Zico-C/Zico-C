import{aN as wt,r as bt,j as yt}from"./index-0ef130ba.js";var vt={exports:{}};/*! For license information please see mqtt.browser.js.LICENSE.txt */(function(){var dt={9742:function(X,Q){Q.byteLength=function(h){var E=t(h),k=E[0],x=E[1];return 3*(k+x)/4-x},Q.toByteArray=function(h){var E,k,x=t(h),l=x[0],g=x[1],w=new f(function(J,m,b){return 3*(m+b)/4-b}(0,l,g)),W=0,G=g>0?l-4:l;for(k=0;k<G;k+=4)E=_[h.charCodeAt(k)]<<18|_[h.charCodeAt(k+1)]<<12|_[h.charCodeAt(k+2)]<<6|_[h.charCodeAt(k+3)],w[W++]=E>>16&255,w[W++]=E>>8&255,w[W++]=255&E;return g===2&&(E=_[h.charCodeAt(k)]<<2|_[h.charCodeAt(k+1)]>>4,w[W++]=255&E),g===1&&(E=_[h.charCodeAt(k)]<<10|_[h.charCodeAt(k+1)]<<4|_[h.charCodeAt(k+2)]>>2,w[W++]=E>>8&255,w[W++]=255&E),w},Q.fromByteArray=function(h){for(var E,k=h.length,x=k%3,l=[],g=16383,w=0,W=k-x;w<W;w+=g)l.push(d(h,w,w+g>W?W:w+g));return x===1?(E=h[k-1],l.push(C[E>>2]+C[E<<4&63]+"==")):x===2&&(E=(h[k-2]<<8)+h[k-1],l.push(C[E>>10]+C[E>>4&63]+C[E<<2&63]+"=")),l.join("")};for(var C=[],_=[],f=typeof Uint8Array<"u"?Uint8Array:Array,I="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=0,n=I.length;a<n;++a)C[a]=I[a],_[I.charCodeAt(a)]=a;function t(h){var E=h.length;if(E%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var k=h.indexOf("=");return k===-1&&(k=E),[k,k===E?0:4-k%4]}function d(h,E,k){for(var x,l,g=[],w=E;w<k;w+=3)x=(h[w]<<16&16711680)+(h[w+1]<<8&65280)+(255&h[w+2]),g.push(C[(l=x)>>18&63]+C[l>>12&63]+C[l>>6&63]+C[63&l]);return g.join("")}_["-".charCodeAt(0)]=62,_["_".charCodeAt(0)]=63},9668:function(X,Q,C){const{Buffer:_}=C(8478),f=Symbol.for("BufferList");function I(a){if(!(this instanceof I))return new I(a);I._init.call(this,a)}I._init=function(a){Object.defineProperty(this,f,{value:!0}),this._bufs=[],this.length=0,a&&this.append(a)},I.prototype._new=function(a){return new I(a)},I.prototype._offset=function(a){if(a===0)return[0,0];let n=0;for(let t=0;t<this._bufs.length;t++){const d=n+this._bufs[t].length;if(a<d||t===this._bufs.length-1)return[t,a-n];n=d}},I.prototype._reverseOffset=function(a){const n=a[0];let t=a[1];for(let d=0;d<n;d++)t+=this._bufs[d].length;return t},I.prototype.get=function(a){if(a>this.length||a<0)return;const n=this._offset(a);return this._bufs[n[0]][n[1]]},I.prototype.slice=function(a,n){return typeof a=="number"&&a<0&&(a+=this.length),typeof n=="number"&&n<0&&(n+=this.length),this.copy(null,0,a,n)},I.prototype.copy=function(a,n,t,d){if((typeof t!="number"||t<0)&&(t=0),(typeof d!="number"||d>this.length)&&(d=this.length),t>=this.length||d<=0)return a||_.alloc(0);const h=!!a,E=this._offset(t),k=d-t;let x=k,l=h&&n||0,g=E[1];if(t===0&&d===this.length){if(!h)return this._bufs.length===1?this._bufs[0]:_.concat(this._bufs,this.length);for(let w=0;w<this._bufs.length;w++)this._bufs[w].copy(a,l),l+=this._bufs[w].length;return a}if(x<=this._bufs[E[0]].length-g)return h?this._bufs[E[0]].copy(a,n,g,g+x):this._bufs[E[0]].slice(g,g+x);h||(a=_.allocUnsafe(k));for(let w=E[0];w<this._bufs.length;w++){const W=this._bufs[w].length-g;if(!(x>W)){this._bufs[w].copy(a,l,g,g+x),l+=W;break}this._bufs[w].copy(a,l,g),l+=W,x-=W,g&&(g=0)}return a.length>l?a.slice(0,l):a},I.prototype.shallowSlice=function(a,n){if(a=a||0,n=typeof n!="number"?this.length:n,a<0&&(a+=this.length),n<0&&(n+=this.length),a===n)return this._new();const t=this._offset(a),d=this._offset(n),h=this._bufs.slice(t[0],d[0]+1);return d[1]===0?h.pop():h[h.length-1]=h[h.length-1].slice(0,d[1]),t[1]!==0&&(h[0]=h[0].slice(t[1])),this._new(h)},I.prototype.toString=function(a,n,t){return this.slice(n,t).toString(a)},I.prototype.consume=function(a){if(a=Math.trunc(a),Number.isNaN(a)||a<=0)return this;for(;this._bufs.length;){if(!(a>=this._bufs[0].length)){this._bufs[0]=this._bufs[0].slice(a),this.length-=a;break}a-=this._bufs[0].length,this.length-=this._bufs[0].length,this._bufs.shift()}return this},I.prototype.duplicate=function(){const a=this._new();for(let n=0;n<this._bufs.length;n++)a.append(this._bufs[n]);return a},I.prototype.append=function(a){if(a==null)return this;if(a.buffer)this._appendBuffer(_.from(a.buffer,a.byteOffset,a.byteLength));else if(Array.isArray(a))for(let n=0;n<a.length;n++)this.append(a[n]);else if(this._isBufferList(a))for(let n=0;n<a._bufs.length;n++)this.append(a._bufs[n]);else typeof a=="number"&&(a=a.toString()),this._appendBuffer(_.from(a));return this},I.prototype._appendBuffer=function(a){this._bufs.push(a),this.length+=a.length},I.prototype.indexOf=function(a,n,t){if(t===void 0&&typeof n=="string"&&(t=n,n=void 0),typeof a=="function"||Array.isArray(a))throw new TypeError('The "value" argument must be one of type string, Buffer, BufferList, or Uint8Array.');if(typeof a=="number"?a=_.from([a]):typeof a=="string"?a=_.from(a,t):this._isBufferList(a)?a=a.slice():Array.isArray(a.buffer)?a=_.from(a.buffer,a.byteOffset,a.byteLength):_.isBuffer(a)||(a=_.from(a)),n=Number(n||0),isNaN(n)&&(n=0),n<0&&(n=this.length+n),n<0&&(n=0),a.length===0)return n>this.length?this.length:n;const d=this._offset(n);let h=d[0],E=d[1];for(;h<this._bufs.length;h++){const k=this._bufs[h];for(;E<k.length;)if(k.length-E>=a.length){const x=k.indexOf(a,E);if(x!==-1)return this._reverseOffset([h,x]);E=k.length-a.length+1}else{const x=this._reverseOffset([h,E]);if(this._match(x,a))return x;E++}E=0}return-1},I.prototype._match=function(a,n){if(this.length-a<n.length)return!1;for(let t=0;t<n.length;t++)if(this.get(a+t)!==n[t])return!1;return!0},function(){const a={readDoubleBE:8,readDoubleLE:8,readFloatBE:4,readFloatLE:4,readInt32BE:4,readInt32LE:4,readUInt32BE:4,readUInt32LE:4,readInt16BE:2,readInt16LE:2,readUInt16BE:2,readUInt16LE:2,readInt8:1,readUInt8:1,readIntBE:null,readIntLE:null,readUIntBE:null,readUIntLE:null};for(const n in a)(function(t){I.prototype[t]=a[t]===null?function(d,h){return this.slice(d,d+h)[t](0,h)}:function(d=0){return this.slice(d,d+a[t])[t](0)}})(n)}(),I.prototype._isBufferList=function(a){return a instanceof I||I.isBufferList(a)},I.isBufferList=function(a){return a!=null&&a[f]},X.exports=I},22:function(X,Q,C){const _=C(8473).Duplex,f=C(5717),I=C(9668);function a(n){if(!(this instanceof a))return new a(n);if(typeof n=="function"){this._callback=n;const t=(function(d){this._callback&&(this._callback(d),this._callback=null)}).bind(this);this.on("pipe",function(d){d.on("error",t)}),this.on("unpipe",function(d){d.removeListener("error",t)}),n=null}I._init.call(this,n),_.call(this)}f(a,_),Object.assign(a.prototype,I.prototype),a.prototype._new=function(n){return new a(n)},a.prototype._write=function(n,t,d){this._appendBuffer(n),typeof d=="function"&&d()},a.prototype._read=function(n){if(!this.length)return this.push(null);n=Math.min(n,this.length),this.push(this.slice(0,n)),this.consume(n)},a.prototype.end=function(n){_.prototype.end.call(this,n),this._callback&&(this._callback(null,this.slice()),this._callback=null)},a.prototype._destroy=function(n,t){this._bufs.length=0,this.length=0,t(n)},a.prototype._isBufferList=function(n){return n instanceof a||n instanceof I||a.isBufferList(n)},a.isBufferList=I.isBufferList,X.exports=a,X.exports.BufferListStream=a,X.exports.BufferList=I},8478:function(X,Q,C){var _=C(9742),f=C(645),I=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;Q.Buffer=t,Q.SlowBuffer=function(r){return+r!=r&&(r=0),t.alloc(+r)},Q.INSPECT_MAX_BYTES=50;var a=2147483647;function n(r){if(r>a)throw new RangeError('The value "'+r+'" is invalid for option "size"');var o=new Uint8Array(r);return Object.setPrototypeOf(o,t.prototype),o}function t(r,o,S){if(typeof r=="number"){if(typeof o=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return E(r)}return d(r,o,S)}function d(r,o,S){if(typeof r=="string")return function(tt,rt){if(typeof rt=="string"&&rt!==""||(rt="utf8"),!t.isEncoding(rt))throw new TypeError("Unknown encoding: "+rt);var it=0|g(tt,rt),ot=n(it),at=ot.write(tt,rt);return at!==it&&(ot=ot.slice(0,at)),ot}(r,o);if(ArrayBuffer.isView(r))return function(tt){if(K(tt,Uint8Array)){var rt=new Uint8Array(tt);return x(rt.buffer,rt.byteOffset,rt.byteLength)}return k(tt)}(r);if(r==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof r);if(K(r,ArrayBuffer)||r&&K(r.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(K(r,SharedArrayBuffer)||r&&K(r.buffer,SharedArrayBuffer)))return x(r,o,S);if(typeof r=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var j=r.valueOf&&r.valueOf();if(j!=null&&j!==r)return t.from(j,o,S);var H=function(tt){if(t.isBuffer(tt)){var rt=0|l(tt.length),it=n(rt);return it.length===0||tt.copy(it,0,0,rt),it}return tt.length!==void 0?typeof tt.length!="number"||A(tt.length)?n(0):k(tt):tt.type==="Buffer"&&Array.isArray(tt.data)?k(tt.data):void 0}(r);if(H)return H;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof r[Symbol.toPrimitive]=="function")return t.from(r[Symbol.toPrimitive]("string"),o,S);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof r)}function h(r){if(typeof r!="number")throw new TypeError('"size" argument must be of type number');if(r<0)throw new RangeError('The value "'+r+'" is invalid for option "size"')}function E(r){return h(r),n(r<0?0:0|l(r))}function k(r){for(var o=r.length<0?0:0|l(r.length),S=n(o),j=0;j<o;j+=1)S[j]=255&r[j];return S}function x(r,o,S){if(o<0||r.byteLength<o)throw new RangeError('"offset" is outside of buffer bounds');if(r.byteLength<o+(S||0))throw new RangeError('"length" is outside of buffer bounds');var j;return j=o===void 0&&S===void 0?new Uint8Array(r):S===void 0?new Uint8Array(r,o):new Uint8Array(r,o,S),Object.setPrototypeOf(j,t.prototype),j}function l(r){if(r>=a)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+a.toString(16)+" bytes");return 0|r}function g(r,o){if(t.isBuffer(r))return r.length;if(ArrayBuffer.isView(r)||K(r,ArrayBuffer))return r.byteLength;if(typeof r!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof r);var S=r.length,j=arguments.length>2&&arguments[2]===!0;if(!j&&S===0)return 0;for(var H=!1;;)switch(o){case"ascii":case"latin1":case"binary":return S;case"utf8":case"utf-8":return B(r).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*S;case"hex":return S>>>1;case"base64":return D(r).length;default:if(H)return j?-1:B(r).length;o=(""+o).toLowerCase(),H=!0}}function w(r,o,S){var j=!1;if((o===void 0||o<0)&&(o=0),o>this.length||((S===void 0||S>this.length)&&(S=this.length),S<=0)||(S>>>=0)<=(o>>>=0))return"";for(r||(r="utf8");;)switch(r){case"hex":return N(this,o,S);case"utf8":case"utf-8":return P(this,o,S);case"ascii":return T(this,o,S);case"latin1":case"binary":return y(this,o,S);case"base64":return F(this,o,S);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return q(this,o,S);default:if(j)throw new TypeError("Unknown encoding: "+r);r=(r+"").toLowerCase(),j=!0}}function W(r,o,S){var j=r[o];r[o]=r[S],r[S]=j}function G(r,o,S,j,H){if(r.length===0)return-1;if(typeof S=="string"?(j=S,S=0):S>2147483647?S=2147483647:S<-2147483648&&(S=-2147483648),A(S=+S)&&(S=H?0:r.length-1),S<0&&(S=r.length+S),S>=r.length){if(H)return-1;S=r.length-1}else if(S<0){if(!H)return-1;S=0}if(typeof o=="string"&&(o=t.from(o,j)),t.isBuffer(o))return o.length===0?-1:J(r,o,S,j,H);if(typeof o=="number")return o&=255,typeof Uint8Array.prototype.indexOf=="function"?H?Uint8Array.prototype.indexOf.call(r,o,S):Uint8Array.prototype.lastIndexOf.call(r,o,S):J(r,[o],S,j,H);throw new TypeError("val must be string, number or Buffer")}function J(r,o,S,j,H){var tt,rt=1,it=r.length,ot=o.length;if(j!==void 0&&((j=String(j).toLowerCase())==="ucs2"||j==="ucs-2"||j==="utf16le"||j==="utf-16le")){if(r.length<2||o.length<2)return-1;rt=2,it/=2,ot/=2,S/=2}function at($,Z){return rt===1?$[Z]:$.readUInt16BE(Z*rt)}if(H){var i=-1;for(tt=S;tt<it;tt++)if(at(r,tt)===at(o,i===-1?0:tt-i)){if(i===-1&&(i=tt),tt-i+1===ot)return i*rt}else i!==-1&&(tt-=tt-i),i=-1}else for(S+ot>it&&(S=it-ot),tt=S;tt>=0;tt--){for(var c=!0,v=0;v<ot;v++)if(at(r,tt+v)!==at(o,v)){c=!1;break}if(c)return tt}return-1}function m(r,o,S,j){S=Number(S)||0;var H=r.length-S;j?(j=Number(j))>H&&(j=H):j=H;var tt=o.length;j>tt/2&&(j=tt/2);for(var rt=0;rt<j;++rt){var it=parseInt(o.substr(2*rt,2),16);if(A(it))return rt;r[S+rt]=it}return rt}function b(r,o,S,j){return Y(B(o,r.length-S),r,S,j)}function u(r,o,S,j){return Y(function(H){for(var tt=[],rt=0;rt<H.length;++rt)tt.push(255&H.charCodeAt(rt));return tt}(o),r,S,j)}function M(r,o,S,j){return Y(D(o),r,S,j)}function U(r,o,S,j){return Y(function(H,tt){for(var rt,it,ot,at=[],i=0;i<H.length&&!((tt-=2)<0);++i)it=(rt=H.charCodeAt(i))>>8,ot=rt%256,at.push(ot),at.push(it);return at}(o,r.length-S),r,S,j)}function F(r,o,S){return o===0&&S===r.length?_.fromByteArray(r):_.fromByteArray(r.slice(o,S))}function P(r,o,S){S=Math.min(r.length,S);for(var j=[],H=o;H<S;){var tt,rt,it,ot,at=r[H],i=null,c=at>239?4:at>223?3:at>191?2:1;if(H+c<=S)switch(c){case 1:at<128&&(i=at);break;case 2:(192&(tt=r[H+1]))==128&&(ot=(31&at)<<6|63&tt)>127&&(i=ot);break;case 3:tt=r[H+1],rt=r[H+2],(192&tt)==128&&(192&rt)==128&&(ot=(15&at)<<12|(63&tt)<<6|63&rt)>2047&&(ot<55296||ot>57343)&&(i=ot);break;case 4:tt=r[H+1],rt=r[H+2],it=r[H+3],(192&tt)==128&&(192&rt)==128&&(192&it)==128&&(ot=(15&at)<<18|(63&tt)<<12|(63&rt)<<6|63&it)>65535&&ot<1114112&&(i=ot)}i===null?(i=65533,c=1):i>65535&&(i-=65536,j.push(i>>>10&1023|55296),i=56320|1023&i),j.push(i),H+=c}return function(v){var $=v.length;if($<=V)return String.fromCharCode.apply(String,v);for(var Z="",et=0;et<$;)Z+=String.fromCharCode.apply(String,v.slice(et,et+=V));return Z}(j)}Q.kMaxLength=a,t.TYPED_ARRAY_SUPPORT=function(){try{var r=new Uint8Array(1),o={foo:function(){return 42}};return Object.setPrototypeOf(o,Uint8Array.prototype),Object.setPrototypeOf(r,o),r.foo()===42}catch{return!1}}(),t.TYPED_ARRAY_SUPPORT||typeof console>"u"||typeof console.error!="function"||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(t.prototype,"parent",{enumerable:!0,get:function(){if(t.isBuffer(this))return this.buffer}}),Object.defineProperty(t.prototype,"offset",{enumerable:!0,get:function(){if(t.isBuffer(this))return this.byteOffset}}),t.poolSize=8192,t.from=function(r,o,S){return d(r,o,S)},Object.setPrototypeOf(t.prototype,Uint8Array.prototype),Object.setPrototypeOf(t,Uint8Array),t.alloc=function(r,o,S){return function(j,H,tt){return h(j),j<=0?n(j):H!==void 0?typeof tt=="string"?n(j).fill(H,tt):n(j).fill(H):n(j)}(r,o,S)},t.allocUnsafe=function(r){return E(r)},t.allocUnsafeSlow=function(r){return E(r)},t.isBuffer=function(r){return r!=null&&r._isBuffer===!0&&r!==t.prototype},t.compare=function(r,o){if(K(r,Uint8Array)&&(r=t.from(r,r.offset,r.byteLength)),K(o,Uint8Array)&&(o=t.from(o,o.offset,o.byteLength)),!t.isBuffer(r)||!t.isBuffer(o))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(r===o)return 0;for(var S=r.length,j=o.length,H=0,tt=Math.min(S,j);H<tt;++H)if(r[H]!==o[H]){S=r[H],j=o[H];break}return S<j?-1:j<S?1:0},t.isEncoding=function(r){switch(String(r).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},t.concat=function(r,o){if(!Array.isArray(r))throw new TypeError('"list" argument must be an Array of Buffers');if(r.length===0)return t.alloc(0);var S;if(o===void 0)for(o=0,S=0;S<r.length;++S)o+=r[S].length;var j=t.allocUnsafe(o),H=0;for(S=0;S<r.length;++S){var tt=r[S];if(K(tt,Uint8Array))H+tt.length>j.length?t.from(tt).copy(j,H):Uint8Array.prototype.set.call(j,tt,H);else{if(!t.isBuffer(tt))throw new TypeError('"list" argument must be an Array of Buffers');tt.copy(j,H)}H+=tt.length}return j},t.byteLength=g,t.prototype._isBuffer=!0,t.prototype.swap16=function(){var r=this.length;if(r%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var o=0;o<r;o+=2)W(this,o,o+1);return this},t.prototype.swap32=function(){var r=this.length;if(r%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var o=0;o<r;o+=4)W(this,o,o+3),W(this,o+1,o+2);return this},t.prototype.swap64=function(){var r=this.length;if(r%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var o=0;o<r;o+=8)W(this,o,o+7),W(this,o+1,o+6),W(this,o+2,o+5),W(this,o+3,o+4);return this},t.prototype.toString=function(){var r=this.length;return r===0?"":arguments.length===0?P(this,0,r):w.apply(this,arguments)},t.prototype.toLocaleString=t.prototype.toString,t.prototype.equals=function(r){if(!t.isBuffer(r))throw new TypeError("Argument must be a Buffer");return this===r||t.compare(this,r)===0},t.prototype.inspect=function(){var r="",o=Q.INSPECT_MAX_BYTES;return r=this.toString("hex",0,o).replace(/(.{2})/g,"$1 ").trim(),this.length>o&&(r+=" ... "),"<Buffer "+r+">"},I&&(t.prototype[I]=t.prototype.inspect),t.prototype.compare=function(r,o,S,j,H){if(K(r,Uint8Array)&&(r=t.from(r,r.offset,r.byteLength)),!t.isBuffer(r))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof r);if(o===void 0&&(o=0),S===void 0&&(S=r?r.length:0),j===void 0&&(j=0),H===void 0&&(H=this.length),o<0||S>r.length||j<0||H>this.length)throw new RangeError("out of range index");if(j>=H&&o>=S)return 0;if(j>=H)return-1;if(o>=S)return 1;if(this===r)return 0;for(var tt=(H>>>=0)-(j>>>=0),rt=(S>>>=0)-(o>>>=0),it=Math.min(tt,rt),ot=this.slice(j,H),at=r.slice(o,S),i=0;i<it;++i)if(ot[i]!==at[i]){tt=ot[i],rt=at[i];break}return tt<rt?-1:rt<tt?1:0},t.prototype.includes=function(r,o,S){return this.indexOf(r,o,S)!==-1},t.prototype.indexOf=function(r,o,S){return G(this,r,o,S,!0)},t.prototype.lastIndexOf=function(r,o,S){return G(this,r,o,S,!1)},t.prototype.write=function(r,o,S,j){if(o===void 0)j="utf8",S=this.length,o=0;else if(S===void 0&&typeof o=="string")j=o,S=this.length,o=0;else{if(!isFinite(o))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");o>>>=0,isFinite(S)?(S>>>=0,j===void 0&&(j="utf8")):(j=S,S=void 0)}var H=this.length-o;if((S===void 0||S>H)&&(S=H),r.length>0&&(S<0||o<0)||o>this.length)throw new RangeError("Attempt to write outside buffer bounds");j||(j="utf8");for(var tt=!1;;)switch(j){case"hex":return m(this,r,o,S);case"utf8":case"utf-8":return b(this,r,o,S);case"ascii":case"latin1":case"binary":return u(this,r,o,S);case"base64":return M(this,r,o,S);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return U(this,r,o,S);default:if(tt)throw new TypeError("Unknown encoding: "+j);j=(""+j).toLowerCase(),tt=!0}},t.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var V=4096;function T(r,o,S){var j="";S=Math.min(r.length,S);for(var H=o;H<S;++H)j+=String.fromCharCode(127&r[H]);return j}function y(r,o,S){var j="";S=Math.min(r.length,S);for(var H=o;H<S;++H)j+=String.fromCharCode(r[H]);return j}function N(r,o,S){var j=r.length;(!o||o<0)&&(o=0),(!S||S<0||S>j)&&(S=j);for(var H="",tt=o;tt<S;++tt)H+=R[r[tt]];return H}function q(r,o,S){for(var j=r.slice(o,S),H="",tt=0;tt<j.length-1;tt+=2)H+=String.fromCharCode(j[tt]+256*j[tt+1]);return H}function p(r,o,S){if(r%1!=0||r<0)throw new RangeError("offset is not uint");if(r+o>S)throw new RangeError("Trying to access beyond buffer length")}function O(r,o,S,j,H,tt){if(!t.isBuffer(r))throw new TypeError('"buffer" argument must be a Buffer instance');if(o>H||o<tt)throw new RangeError('"value" argument is out of bounds');if(S+j>r.length)throw new RangeError("Index out of range")}function L(r,o,S,j,H,tt){if(S+j>r.length)throw new RangeError("Index out of range");if(S<0)throw new RangeError("Index out of range")}function z(r,o,S,j,H){return o=+o,S>>>=0,H||L(r,0,S,4),f.write(r,o,S,j,23,4),S+4}function e(r,o,S,j,H){return o=+o,S>>>=0,H||L(r,0,S,8),f.write(r,o,S,j,52,8),S+8}t.prototype.slice=function(r,o){var S=this.length;(r=~~r)<0?(r+=S)<0&&(r=0):r>S&&(r=S),(o=o===void 0?S:~~o)<0?(o+=S)<0&&(o=0):o>S&&(o=S),o<r&&(o=r);var j=this.subarray(r,o);return Object.setPrototypeOf(j,t.prototype),j},t.prototype.readUintLE=t.prototype.readUIntLE=function(r,o,S){r>>>=0,o>>>=0,S||p(r,o,this.length);for(var j=this[r],H=1,tt=0;++tt<o&&(H*=256);)j+=this[r+tt]*H;return j},t.prototype.readUintBE=t.prototype.readUIntBE=function(r,o,S){r>>>=0,o>>>=0,S||p(r,o,this.length);for(var j=this[r+--o],H=1;o>0&&(H*=256);)j+=this[r+--o]*H;return j},t.prototype.readUint8=t.prototype.readUInt8=function(r,o){return r>>>=0,o||p(r,1,this.length),this[r]},t.prototype.readUint16LE=t.prototype.readUInt16LE=function(r,o){return r>>>=0,o||p(r,2,this.length),this[r]|this[r+1]<<8},t.prototype.readUint16BE=t.prototype.readUInt16BE=function(r,o){return r>>>=0,o||p(r,2,this.length),this[r]<<8|this[r+1]},t.prototype.readUint32LE=t.prototype.readUInt32LE=function(r,o){return r>>>=0,o||p(r,4,this.length),(this[r]|this[r+1]<<8|this[r+2]<<16)+16777216*this[r+3]},t.prototype.readUint32BE=t.prototype.readUInt32BE=function(r,o){return r>>>=0,o||p(r,4,this.length),16777216*this[r]+(this[r+1]<<16|this[r+2]<<8|this[r+3])},t.prototype.readIntLE=function(r,o,S){r>>>=0,o>>>=0,S||p(r,o,this.length);for(var j=this[r],H=1,tt=0;++tt<o&&(H*=256);)j+=this[r+tt]*H;return j>=(H*=128)&&(j-=Math.pow(2,8*o)),j},t.prototype.readIntBE=function(r,o,S){r>>>=0,o>>>=0,S||p(r,o,this.length);for(var j=o,H=1,tt=this[r+--j];j>0&&(H*=256);)tt+=this[r+--j]*H;return tt>=(H*=128)&&(tt-=Math.pow(2,8*o)),tt},t.prototype.readInt8=function(r,o){return r>>>=0,o||p(r,1,this.length),128&this[r]?-1*(255-this[r]+1):this[r]},t.prototype.readInt16LE=function(r,o){r>>>=0,o||p(r,2,this.length);var S=this[r]|this[r+1]<<8;return 32768&S?4294901760|S:S},t.prototype.readInt16BE=function(r,o){r>>>=0,o||p(r,2,this.length);var S=this[r+1]|this[r]<<8;return 32768&S?4294901760|S:S},t.prototype.readInt32LE=function(r,o){return r>>>=0,o||p(r,4,this.length),this[r]|this[r+1]<<8|this[r+2]<<16|this[r+3]<<24},t.prototype.readInt32BE=function(r,o){return r>>>=0,o||p(r,4,this.length),this[r]<<24|this[r+1]<<16|this[r+2]<<8|this[r+3]},t.prototype.readFloatLE=function(r,o){return r>>>=0,o||p(r,4,this.length),f.read(this,r,!0,23,4)},t.prototype.readFloatBE=function(r,o){return r>>>=0,o||p(r,4,this.length),f.read(this,r,!1,23,4)},t.prototype.readDoubleLE=function(r,o){return r>>>=0,o||p(r,8,this.length),f.read(this,r,!0,52,8)},t.prototype.readDoubleBE=function(r,o){return r>>>=0,o||p(r,8,this.length),f.read(this,r,!1,52,8)},t.prototype.writeUintLE=t.prototype.writeUIntLE=function(r,o,S,j){r=+r,o>>>=0,S>>>=0,j||O(this,r,o,S,Math.pow(2,8*S)-1,0);var H=1,tt=0;for(this[o]=255&r;++tt<S&&(H*=256);)this[o+tt]=r/H&255;return o+S},t.prototype.writeUintBE=t.prototype.writeUIntBE=function(r,o,S,j){r=+r,o>>>=0,S>>>=0,j||O(this,r,o,S,Math.pow(2,8*S)-1,0);var H=S-1,tt=1;for(this[o+H]=255&r;--H>=0&&(tt*=256);)this[o+H]=r/tt&255;return o+S},t.prototype.writeUint8=t.prototype.writeUInt8=function(r,o,S){return r=+r,o>>>=0,S||O(this,r,o,1,255,0),this[o]=255&r,o+1},t.prototype.writeUint16LE=t.prototype.writeUInt16LE=function(r,o,S){return r=+r,o>>>=0,S||O(this,r,o,2,65535,0),this[o]=255&r,this[o+1]=r>>>8,o+2},t.prototype.writeUint16BE=t.prototype.writeUInt16BE=function(r,o,S){return r=+r,o>>>=0,S||O(this,r,o,2,65535,0),this[o]=r>>>8,this[o+1]=255&r,o+2},t.prototype.writeUint32LE=t.prototype.writeUInt32LE=function(r,o,S){return r=+r,o>>>=0,S||O(this,r,o,4,4294967295,0),this[o+3]=r>>>24,this[o+2]=r>>>16,this[o+1]=r>>>8,this[o]=255&r,o+4},t.prototype.writeUint32BE=t.prototype.writeUInt32BE=function(r,o,S){return r=+r,o>>>=0,S||O(this,r,o,4,4294967295,0),this[o]=r>>>24,this[o+1]=r>>>16,this[o+2]=r>>>8,this[o+3]=255&r,o+4},t.prototype.writeIntLE=function(r,o,S,j){if(r=+r,o>>>=0,!j){var H=Math.pow(2,8*S-1);O(this,r,o,S,H-1,-H)}var tt=0,rt=1,it=0;for(this[o]=255&r;++tt<S&&(rt*=256);)r<0&&it===0&&this[o+tt-1]!==0&&(it=1),this[o+tt]=(r/rt>>0)-it&255;return o+S},t.prototype.writeIntBE=function(r,o,S,j){if(r=+r,o>>>=0,!j){var H=Math.pow(2,8*S-1);O(this,r,o,S,H-1,-H)}var tt=S-1,rt=1,it=0;for(this[o+tt]=255&r;--tt>=0&&(rt*=256);)r<0&&it===0&&this[o+tt+1]!==0&&(it=1),this[o+tt]=(r/rt>>0)-it&255;return o+S},t.prototype.writeInt8=function(r,o,S){return r=+r,o>>>=0,S||O(this,r,o,1,127,-128),r<0&&(r=255+r+1),this[o]=255&r,o+1},t.prototype.writeInt16LE=function(r,o,S){return r=+r,o>>>=0,S||O(this,r,o,2,32767,-32768),this[o]=255&r,this[o+1]=r>>>8,o+2},t.prototype.writeInt16BE=function(r,o,S){return r=+r,o>>>=0,S||O(this,r,o,2,32767,-32768),this[o]=r>>>8,this[o+1]=255&r,o+2},t.prototype.writeInt32LE=function(r,o,S){return r=+r,o>>>=0,S||O(this,r,o,4,2147483647,-2147483648),this[o]=255&r,this[o+1]=r>>>8,this[o+2]=r>>>16,this[o+3]=r>>>24,o+4},t.prototype.writeInt32BE=function(r,o,S){return r=+r,o>>>=0,S||O(this,r,o,4,2147483647,-2147483648),r<0&&(r=4294967295+r+1),this[o]=r>>>24,this[o+1]=r>>>16,this[o+2]=r>>>8,this[o+3]=255&r,o+4},t.prototype.writeFloatLE=function(r,o,S){return z(this,r,o,!0,S)},t.prototype.writeFloatBE=function(r,o,S){return z(this,r,o,!1,S)},t.prototype.writeDoubleLE=function(r,o,S){return e(this,r,o,!0,S)},t.prototype.writeDoubleBE=function(r,o,S){return e(this,r,o,!1,S)},t.prototype.copy=function(r,o,S,j){if(!t.isBuffer(r))throw new TypeError("argument should be a Buffer");if(S||(S=0),j||j===0||(j=this.length),o>=r.length&&(o=r.length),o||(o=0),j>0&&j<S&&(j=S),j===S||r.length===0||this.length===0)return 0;if(o<0)throw new RangeError("targetStart out of bounds");if(S<0||S>=this.length)throw new RangeError("Index out of range");if(j<0)throw new RangeError("sourceEnd out of bounds");j>this.length&&(j=this.length),r.length-o<j-S&&(j=r.length-o+S);var H=j-S;return this===r&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(o,S,j):Uint8Array.prototype.set.call(r,this.subarray(S,j),o),H},t.prototype.fill=function(r,o,S,j){if(typeof r=="string"){if(typeof o=="string"?(j=o,o=0,S=this.length):typeof S=="string"&&(j=S,S=this.length),j!==void 0&&typeof j!="string")throw new TypeError("encoding must be a string");if(typeof j=="string"&&!t.isEncoding(j))throw new TypeError("Unknown encoding: "+j);if(r.length===1){var H=r.charCodeAt(0);(j==="utf8"&&H<128||j==="latin1")&&(r=H)}}else typeof r=="number"?r&=255:typeof r=="boolean"&&(r=Number(r));if(o<0||this.length<o||this.length<S)throw new RangeError("Out of range index");if(S<=o)return this;var tt;if(o>>>=0,S=S===void 0?this.length:S>>>0,r||(r=0),typeof r=="number")for(tt=o;tt<S;++tt)this[tt]=r;else{var rt=t.isBuffer(r)?r:t.from(r,j),it=rt.length;if(it===0)throw new TypeError('The value "'+r+'" is invalid for argument "value"');for(tt=0;tt<S-o;++tt)this[tt+o]=rt[tt%it]}return this};var s=/[^+/0-9A-Za-z-_]/g;function B(r,o){var S;o=o||1/0;for(var j=r.length,H=null,tt=[],rt=0;rt<j;++rt){if((S=r.charCodeAt(rt))>55295&&S<57344){if(!H){if(S>56319){(o-=3)>-1&&tt.push(239,191,189);continue}if(rt+1===j){(o-=3)>-1&&tt.push(239,191,189);continue}H=S;continue}if(S<56320){(o-=3)>-1&&tt.push(239,191,189),H=S;continue}S=65536+(H-55296<<10|S-56320)}else H&&(o-=3)>-1&&tt.push(239,191,189);if(H=null,S<128){if((o-=1)<0)break;tt.push(S)}else if(S<2048){if((o-=2)<0)break;tt.push(S>>6|192,63&S|128)}else if(S<65536){if((o-=3)<0)break;tt.push(S>>12|224,S>>6&63|128,63&S|128)}else{if(!(S<1114112))throw new Error("Invalid code point");if((o-=4)<0)break;tt.push(S>>18|240,S>>12&63|128,S>>6&63|128,63&S|128)}}return tt}function D(r){return _.toByteArray(function(o){if((o=(o=o.split("=")[0]).trim().replace(s,"")).length<2)return"";for(;o.length%4!=0;)o+="=";return o}(r))}function Y(r,o,S,j){for(var H=0;H<j&&!(H+S>=o.length||H>=r.length);++H)o[H+S]=r[H];return H}function K(r,o){return r instanceof o||r!=null&&r.constructor!=null&&r.constructor.name!=null&&r.constructor.name===o.name}function A(r){return r!=r}var R=function(){for(var r="0123456789abcdef",o=new Array(256),S=0;S<16;++S)for(var j=16*S,H=0;H<16;++H)o[j+H]=r[S]+r[H];return o}()},8764:function(X,Q,C){const _=C(9742),f=C(645),I=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;Q.Buffer=t,Q.SlowBuffer=function(i){return+i!=i&&(i=0),t.alloc(+i)},Q.INSPECT_MAX_BYTES=50;const a=2147483647;function n(i){if(i>a)throw new RangeError('The value "'+i+'" is invalid for option "size"');const c=new Uint8Array(i);return Object.setPrototypeOf(c,t.prototype),c}function t(i,c,v){if(typeof i=="number"){if(typeof c=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return E(i)}return d(i,c,v)}function d(i,c,v){if(typeof i=="string")return function(et,nt){if(typeof nt=="string"&&nt!==""||(nt="utf8"),!t.isEncoding(nt))throw new TypeError("Unknown encoding: "+nt);const st=0|g(et,nt);let ut=n(st);const ct=ut.write(et,nt);return ct!==st&&(ut=ut.slice(0,ct)),ut}(i,c);if(ArrayBuffer.isView(i))return function(et){if(tt(et,Uint8Array)){const nt=new Uint8Array(et);return x(nt.buffer,nt.byteOffset,nt.byteLength)}return k(et)}(i);if(i==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof i);if(tt(i,ArrayBuffer)||i&&tt(i.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(tt(i,SharedArrayBuffer)||i&&tt(i.buffer,SharedArrayBuffer)))return x(i,c,v);if(typeof i=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const $=i.valueOf&&i.valueOf();if($!=null&&$!==i)return t.from($,c,v);const Z=function(et){if(t.isBuffer(et)){const nt=0|l(et.length),st=n(nt);return st.length===0||et.copy(st,0,0,nt),st}return et.length!==void 0?typeof et.length!="number"||rt(et.length)?n(0):k(et):et.type==="Buffer"&&Array.isArray(et.data)?k(et.data):void 0}(i);if(Z)return Z;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof i[Symbol.toPrimitive]=="function")return t.from(i[Symbol.toPrimitive]("string"),c,v);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof i)}function h(i){if(typeof i!="number")throw new TypeError('"size" argument must be of type number');if(i<0)throw new RangeError('The value "'+i+'" is invalid for option "size"')}function E(i){return h(i),n(i<0?0:0|l(i))}function k(i){const c=i.length<0?0:0|l(i.length),v=n(c);for(let $=0;$<c;$+=1)v[$]=255&i[$];return v}function x(i,c,v){if(c<0||i.byteLength<c)throw new RangeError('"offset" is outside of buffer bounds');if(i.byteLength<c+(v||0))throw new RangeError('"length" is outside of buffer bounds');let $;return $=c===void 0&&v===void 0?new Uint8Array(i):v===void 0?new Uint8Array(i,c):new Uint8Array(i,c,v),Object.setPrototypeOf($,t.prototype),$}function l(i){if(i>=a)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+a.toString(16)+" bytes");return 0|i}function g(i,c){if(t.isBuffer(i))return i.length;if(ArrayBuffer.isView(i)||tt(i,ArrayBuffer))return i.byteLength;if(typeof i!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof i);const v=i.length,$=arguments.length>2&&arguments[2]===!0;if(!$&&v===0)return 0;let Z=!1;for(;;)switch(c){case"ascii":case"latin1":case"binary":return v;case"utf8":case"utf-8":return S(i).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*v;case"hex":return v>>>1;case"base64":return j(i).length;default:if(Z)return $?-1:S(i).length;c=(""+c).toLowerCase(),Z=!0}}function w(i,c,v){let $=!1;if((c===void 0||c<0)&&(c=0),c>this.length||((v===void 0||v>this.length)&&(v=this.length),v<=0)||(v>>>=0)<=(c>>>=0))return"";for(i||(i="utf8");;)switch(i){case"hex":return N(this,c,v);case"utf8":case"utf-8":return P(this,c,v);case"ascii":return T(this,c,v);case"latin1":case"binary":return y(this,c,v);case"base64":return F(this,c,v);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return q(this,c,v);default:if($)throw new TypeError("Unknown encoding: "+i);i=(i+"").toLowerCase(),$=!0}}function W(i,c,v){const $=i[c];i[c]=i[v],i[v]=$}function G(i,c,v,$,Z){if(i.length===0)return-1;if(typeof v=="string"?($=v,v=0):v>2147483647?v=2147483647:v<-2147483648&&(v=-2147483648),rt(v=+v)&&(v=Z?0:i.length-1),v<0&&(v=i.length+v),v>=i.length){if(Z)return-1;v=i.length-1}else if(v<0){if(!Z)return-1;v=0}if(typeof c=="string"&&(c=t.from(c,$)),t.isBuffer(c))return c.length===0?-1:J(i,c,v,$,Z);if(typeof c=="number")return c&=255,typeof Uint8Array.prototype.indexOf=="function"?Z?Uint8Array.prototype.indexOf.call(i,c,v):Uint8Array.prototype.lastIndexOf.call(i,c,v):J(i,[c],v,$,Z);throw new TypeError("val must be string, number or Buffer")}function J(i,c,v,$,Z){let et,nt=1,st=i.length,ut=c.length;if($!==void 0&&(($=String($).toLowerCase())==="ucs2"||$==="ucs-2"||$==="utf16le"||$==="utf-16le")){if(i.length<2||c.length<2)return-1;nt=2,st/=2,ut/=2,v/=2}function ct(lt,ht){return nt===1?lt[ht]:lt.readUInt16BE(ht*nt)}if(Z){let lt=-1;for(et=v;et<st;et++)if(ct(i,et)===ct(c,lt===-1?0:et-lt)){if(lt===-1&&(lt=et),et-lt+1===ut)return lt*nt}else lt!==-1&&(et-=et-lt),lt=-1}else for(v+ut>st&&(v=st-ut),et=v;et>=0;et--){let lt=!0;for(let ht=0;ht<ut;ht++)if(ct(i,et+ht)!==ct(c,ht)){lt=!1;break}if(lt)return et}return-1}function m(i,c,v,$){v=Number(v)||0;const Z=i.length-v;$?($=Number($))>Z&&($=Z):$=Z;const et=c.length;let nt;for($>et/2&&($=et/2),nt=0;nt<$;++nt){const st=parseInt(c.substr(2*nt,2),16);if(rt(st))return nt;i[v+nt]=st}return nt}function b(i,c,v,$){return H(S(c,i.length-v),i,v,$)}function u(i,c,v,$){return H(function(Z){const et=[];for(let nt=0;nt<Z.length;++nt)et.push(255&Z.charCodeAt(nt));return et}(c),i,v,$)}function M(i,c,v,$){return H(j(c),i,v,$)}function U(i,c,v,$){return H(function(Z,et){let nt,st,ut;const ct=[];for(let lt=0;lt<Z.length&&!((et-=2)<0);++lt)nt=Z.charCodeAt(lt),st=nt>>8,ut=nt%256,ct.push(ut),ct.push(st);return ct}(c,i.length-v),i,v,$)}function F(i,c,v){return c===0&&v===i.length?_.fromByteArray(i):_.fromByteArray(i.slice(c,v))}function P(i,c,v){v=Math.min(i.length,v);const $=[];let Z=c;for(;Z<v;){const et=i[Z];let nt=null,st=et>239?4:et>223?3:et>191?2:1;if(Z+st<=v){let ut,ct,lt,ht;switch(st){case 1:et<128&&(nt=et);break;case 2:ut=i[Z+1],(192&ut)==128&&(ht=(31&et)<<6|63&ut,ht>127&&(nt=ht));break;case 3:ut=i[Z+1],ct=i[Z+2],(192&ut)==128&&(192&ct)==128&&(ht=(15&et)<<12|(63&ut)<<6|63&ct,ht>2047&&(ht<55296||ht>57343)&&(nt=ht));break;case 4:ut=i[Z+1],ct=i[Z+2],lt=i[Z+3],(192&ut)==128&&(192&ct)==128&&(192&lt)==128&&(ht=(15&et)<<18|(63&ut)<<12|(63&ct)<<6|63&lt,ht>65535&&ht<1114112&&(nt=ht))}}nt===null?(nt=65533,st=1):nt>65535&&(nt-=65536,$.push(nt>>>10&1023|55296),nt=56320|1023&nt),$.push(nt),Z+=st}return function(et){const nt=et.length;if(nt<=V)return String.fromCharCode.apply(String,et);let st="",ut=0;for(;ut<nt;)st+=String.fromCharCode.apply(String,et.slice(ut,ut+=V));return st}($)}Q.kMaxLength=a,t.TYPED_ARRAY_SUPPORT=function(){try{const i=new Uint8Array(1),c={foo:function(){return 42}};return Object.setPrototypeOf(c,Uint8Array.prototype),Object.setPrototypeOf(i,c),i.foo()===42}catch{return!1}}(),t.TYPED_ARRAY_SUPPORT||typeof console>"u"||typeof console.error!="function"||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(t.prototype,"parent",{enumerable:!0,get:function(){if(t.isBuffer(this))return this.buffer}}),Object.defineProperty(t.prototype,"offset",{enumerable:!0,get:function(){if(t.isBuffer(this))return this.byteOffset}}),t.poolSize=8192,t.from=function(i,c,v){return d(i,c,v)},Object.setPrototypeOf(t.prototype,Uint8Array.prototype),Object.setPrototypeOf(t,Uint8Array),t.alloc=function(i,c,v){return function($,Z,et){return h($),$<=0?n($):Z!==void 0?typeof et=="string"?n($).fill(Z,et):n($).fill(Z):n($)}(i,c,v)},t.allocUnsafe=function(i){return E(i)},t.allocUnsafeSlow=function(i){return E(i)},t.isBuffer=function(i){return i!=null&&i._isBuffer===!0&&i!==t.prototype},t.compare=function(i,c){if(tt(i,Uint8Array)&&(i=t.from(i,i.offset,i.byteLength)),tt(c,Uint8Array)&&(c=t.from(c,c.offset,c.byteLength)),!t.isBuffer(i)||!t.isBuffer(c))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(i===c)return 0;let v=i.length,$=c.length;for(let Z=0,et=Math.min(v,$);Z<et;++Z)if(i[Z]!==c[Z]){v=i[Z],$=c[Z];break}return v<$?-1:$<v?1:0},t.isEncoding=function(i){switch(String(i).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},t.concat=function(i,c){if(!Array.isArray(i))throw new TypeError('"list" argument must be an Array of Buffers');if(i.length===0)return t.alloc(0);let v;if(c===void 0)for(c=0,v=0;v<i.length;++v)c+=i[v].length;const $=t.allocUnsafe(c);let Z=0;for(v=0;v<i.length;++v){let et=i[v];if(tt(et,Uint8Array))Z+et.length>$.length?(t.isBuffer(et)||(et=t.from(et)),et.copy($,Z)):Uint8Array.prototype.set.call($,et,Z);else{if(!t.isBuffer(et))throw new TypeError('"list" argument must be an Array of Buffers');et.copy($,Z)}Z+=et.length}return $},t.byteLength=g,t.prototype._isBuffer=!0,t.prototype.swap16=function(){const i=this.length;if(i%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let c=0;c<i;c+=2)W(this,c,c+1);return this},t.prototype.swap32=function(){const i=this.length;if(i%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let c=0;c<i;c+=4)W(this,c,c+3),W(this,c+1,c+2);return this},t.prototype.swap64=function(){const i=this.length;if(i%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let c=0;c<i;c+=8)W(this,c,c+7),W(this,c+1,c+6),W(this,c+2,c+5),W(this,c+3,c+4);return this},t.prototype.toString=function(){const i=this.length;return i===0?"":arguments.length===0?P(this,0,i):w.apply(this,arguments)},t.prototype.toLocaleString=t.prototype.toString,t.prototype.equals=function(i){if(!t.isBuffer(i))throw new TypeError("Argument must be a Buffer");return this===i||t.compare(this,i)===0},t.prototype.inspect=function(){let i="";const c=Q.INSPECT_MAX_BYTES;return i=this.toString("hex",0,c).replace(/(.{2})/g,"$1 ").trim(),this.length>c&&(i+=" ... "),"<Buffer "+i+">"},I&&(t.prototype[I]=t.prototype.inspect),t.prototype.compare=function(i,c,v,$,Z){if(tt(i,Uint8Array)&&(i=t.from(i,i.offset,i.byteLength)),!t.isBuffer(i))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof i);if(c===void 0&&(c=0),v===void 0&&(v=i?i.length:0),$===void 0&&($=0),Z===void 0&&(Z=this.length),c<0||v>i.length||$<0||Z>this.length)throw new RangeError("out of range index");if($>=Z&&c>=v)return 0;if($>=Z)return-1;if(c>=v)return 1;if(this===i)return 0;let et=(Z>>>=0)-($>>>=0),nt=(v>>>=0)-(c>>>=0);const st=Math.min(et,nt),ut=this.slice($,Z),ct=i.slice(c,v);for(let lt=0;lt<st;++lt)if(ut[lt]!==ct[lt]){et=ut[lt],nt=ct[lt];break}return et<nt?-1:nt<et?1:0},t.prototype.includes=function(i,c,v){return this.indexOf(i,c,v)!==-1},t.prototype.indexOf=function(i,c,v){return G(this,i,c,v,!0)},t.prototype.lastIndexOf=function(i,c,v){return G(this,i,c,v,!1)},t.prototype.write=function(i,c,v,$){if(c===void 0)$="utf8",v=this.length,c=0;else if(v===void 0&&typeof c=="string")$=c,v=this.length,c=0;else{if(!isFinite(c))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");c>>>=0,isFinite(v)?(v>>>=0,$===void 0&&($="utf8")):($=v,v=void 0)}const Z=this.length-c;if((v===void 0||v>Z)&&(v=Z),i.length>0&&(v<0||c<0)||c>this.length)throw new RangeError("Attempt to write outside buffer bounds");$||($="utf8");let et=!1;for(;;)switch($){case"hex":return m(this,i,c,v);case"utf8":case"utf-8":return b(this,i,c,v);case"ascii":case"latin1":case"binary":return u(this,i,c,v);case"base64":return M(this,i,c,v);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return U(this,i,c,v);default:if(et)throw new TypeError("Unknown encoding: "+$);$=(""+$).toLowerCase(),et=!0}},t.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};const V=4096;function T(i,c,v){let $="";v=Math.min(i.length,v);for(let Z=c;Z<v;++Z)$+=String.fromCharCode(127&i[Z]);return $}function y(i,c,v){let $="";v=Math.min(i.length,v);for(let Z=c;Z<v;++Z)$+=String.fromCharCode(i[Z]);return $}function N(i,c,v){const $=i.length;(!c||c<0)&&(c=0),(!v||v<0||v>$)&&(v=$);let Z="";for(let et=c;et<v;++et)Z+=it[i[et]];return Z}function q(i,c,v){const $=i.slice(c,v);let Z="";for(let et=0;et<$.length-1;et+=2)Z+=String.fromCharCode($[et]+256*$[et+1]);return Z}function p(i,c,v){if(i%1!=0||i<0)throw new RangeError("offset is not uint");if(i+c>v)throw new RangeError("Trying to access beyond buffer length")}function O(i,c,v,$,Z,et){if(!t.isBuffer(i))throw new TypeError('"buffer" argument must be a Buffer instance');if(c>Z||c<et)throw new RangeError('"value" argument is out of bounds');if(v+$>i.length)throw new RangeError("Index out of range")}function L(i,c,v,$,Z){A(c,$,Z,i,v,7);let et=Number(c&BigInt(4294967295));i[v++]=et,et>>=8,i[v++]=et,et>>=8,i[v++]=et,et>>=8,i[v++]=et;let nt=Number(c>>BigInt(32)&BigInt(4294967295));return i[v++]=nt,nt>>=8,i[v++]=nt,nt>>=8,i[v++]=nt,nt>>=8,i[v++]=nt,v}function z(i,c,v,$,Z){A(c,$,Z,i,v,7);let et=Number(c&BigInt(4294967295));i[v+7]=et,et>>=8,i[v+6]=et,et>>=8,i[v+5]=et,et>>=8,i[v+4]=et;let nt=Number(c>>BigInt(32)&BigInt(4294967295));return i[v+3]=nt,nt>>=8,i[v+2]=nt,nt>>=8,i[v+1]=nt,nt>>=8,i[v]=nt,v+8}function e(i,c,v,$,Z,et){if(v+$>i.length)throw new RangeError("Index out of range");if(v<0)throw new RangeError("Index out of range")}function s(i,c,v,$,Z){return c=+c,v>>>=0,Z||e(i,0,v,4),f.write(i,c,v,$,23,4),v+4}function B(i,c,v,$,Z){return c=+c,v>>>=0,Z||e(i,0,v,8),f.write(i,c,v,$,52,8),v+8}t.prototype.slice=function(i,c){const v=this.length;(i=~~i)<0?(i+=v)<0&&(i=0):i>v&&(i=v),(c=c===void 0?v:~~c)<0?(c+=v)<0&&(c=0):c>v&&(c=v),c<i&&(c=i);const $=this.subarray(i,c);return Object.setPrototypeOf($,t.prototype),$},t.prototype.readUintLE=t.prototype.readUIntLE=function(i,c,v){i>>>=0,c>>>=0,v||p(i,c,this.length);let $=this[i],Z=1,et=0;for(;++et<c&&(Z*=256);)$+=this[i+et]*Z;return $},t.prototype.readUintBE=t.prototype.readUIntBE=function(i,c,v){i>>>=0,c>>>=0,v||p(i,c,this.length);let $=this[i+--c],Z=1;for(;c>0&&(Z*=256);)$+=this[i+--c]*Z;return $},t.prototype.readUint8=t.prototype.readUInt8=function(i,c){return i>>>=0,c||p(i,1,this.length),this[i]},t.prototype.readUint16LE=t.prototype.readUInt16LE=function(i,c){return i>>>=0,c||p(i,2,this.length),this[i]|this[i+1]<<8},t.prototype.readUint16BE=t.prototype.readUInt16BE=function(i,c){return i>>>=0,c||p(i,2,this.length),this[i]<<8|this[i+1]},t.prototype.readUint32LE=t.prototype.readUInt32LE=function(i,c){return i>>>=0,c||p(i,4,this.length),(this[i]|this[i+1]<<8|this[i+2]<<16)+16777216*this[i+3]},t.prototype.readUint32BE=t.prototype.readUInt32BE=function(i,c){return i>>>=0,c||p(i,4,this.length),16777216*this[i]+(this[i+1]<<16|this[i+2]<<8|this[i+3])},t.prototype.readBigUInt64LE=ot(function(i){R(i>>>=0,"offset");const c=this[i],v=this[i+7];c!==void 0&&v!==void 0||r(i,this.length-8);const $=c+256*this[++i]+65536*this[++i]+this[++i]*2**24,Z=this[++i]+256*this[++i]+65536*this[++i]+v*2**24;return BigInt($)+(BigInt(Z)<<BigInt(32))}),t.prototype.readBigUInt64BE=ot(function(i){R(i>>>=0,"offset");const c=this[i],v=this[i+7];c!==void 0&&v!==void 0||r(i,this.length-8);const $=c*2**24+65536*this[++i]+256*this[++i]+this[++i],Z=this[++i]*2**24+65536*this[++i]+256*this[++i]+v;return(BigInt($)<<BigInt(32))+BigInt(Z)}),t.prototype.readIntLE=function(i,c,v){i>>>=0,c>>>=0,v||p(i,c,this.length);let $=this[i],Z=1,et=0;for(;++et<c&&(Z*=256);)$+=this[i+et]*Z;return Z*=128,$>=Z&&($-=Math.pow(2,8*c)),$},t.prototype.readIntBE=function(i,c,v){i>>>=0,c>>>=0,v||p(i,c,this.length);let $=c,Z=1,et=this[i+--$];for(;$>0&&(Z*=256);)et+=this[i+--$]*Z;return Z*=128,et>=Z&&(et-=Math.pow(2,8*c)),et},t.prototype.readInt8=function(i,c){return i>>>=0,c||p(i,1,this.length),128&this[i]?-1*(255-this[i]+1):this[i]},t.prototype.readInt16LE=function(i,c){i>>>=0,c||p(i,2,this.length);const v=this[i]|this[i+1]<<8;return 32768&v?4294901760|v:v},t.prototype.readInt16BE=function(i,c){i>>>=0,c||p(i,2,this.length);const v=this[i+1]|this[i]<<8;return 32768&v?4294901760|v:v},t.prototype.readInt32LE=function(i,c){return i>>>=0,c||p(i,4,this.length),this[i]|this[i+1]<<8|this[i+2]<<16|this[i+3]<<24},t.prototype.readInt32BE=function(i,c){return i>>>=0,c||p(i,4,this.length),this[i]<<24|this[i+1]<<16|this[i+2]<<8|this[i+3]},t.prototype.readBigInt64LE=ot(function(i){R(i>>>=0,"offset");const c=this[i],v=this[i+7];c!==void 0&&v!==void 0||r(i,this.length-8);const $=this[i+4]+256*this[i+5]+65536*this[i+6]+(v<<24);return(BigInt($)<<BigInt(32))+BigInt(c+256*this[++i]+65536*this[++i]+this[++i]*16777216)}),t.prototype.readBigInt64BE=ot(function(i){R(i>>>=0,"offset");const c=this[i],v=this[i+7];c!==void 0&&v!==void 0||r(i,this.length-8);const $=(c<<24)+65536*this[++i]+256*this[++i]+this[++i];return(BigInt($)<<BigInt(32))+BigInt(this[++i]*16777216+65536*this[++i]+256*this[++i]+v)}),t.prototype.readFloatLE=function(i,c){return i>>>=0,c||p(i,4,this.length),f.read(this,i,!0,23,4)},t.prototype.readFloatBE=function(i,c){return i>>>=0,c||p(i,4,this.length),f.read(this,i,!1,23,4)},t.prototype.readDoubleLE=function(i,c){return i>>>=0,c||p(i,8,this.length),f.read(this,i,!0,52,8)},t.prototype.readDoubleBE=function(i,c){return i>>>=0,c||p(i,8,this.length),f.read(this,i,!1,52,8)},t.prototype.writeUintLE=t.prototype.writeUIntLE=function(i,c,v,$){i=+i,c>>>=0,v>>>=0,$||O(this,i,c,v,Math.pow(2,8*v)-1,0);let Z=1,et=0;for(this[c]=255&i;++et<v&&(Z*=256);)this[c+et]=i/Z&255;return c+v},t.prototype.writeUintBE=t.prototype.writeUIntBE=function(i,c,v,$){i=+i,c>>>=0,v>>>=0,$||O(this,i,c,v,Math.pow(2,8*v)-1,0);let Z=v-1,et=1;for(this[c+Z]=255&i;--Z>=0&&(et*=256);)this[c+Z]=i/et&255;return c+v},t.prototype.writeUint8=t.prototype.writeUInt8=function(i,c,v){return i=+i,c>>>=0,v||O(this,i,c,1,255,0),this[c]=255&i,c+1},t.prototype.writeUint16LE=t.prototype.writeUInt16LE=function(i,c,v){return i=+i,c>>>=0,v||O(this,i,c,2,65535,0),this[c]=255&i,this[c+1]=i>>>8,c+2},t.prototype.writeUint16BE=t.prototype.writeUInt16BE=function(i,c,v){return i=+i,c>>>=0,v||O(this,i,c,2,65535,0),this[c]=i>>>8,this[c+1]=255&i,c+2},t.prototype.writeUint32LE=t.prototype.writeUInt32LE=function(i,c,v){return i=+i,c>>>=0,v||O(this,i,c,4,4294967295,0),this[c+3]=i>>>24,this[c+2]=i>>>16,this[c+1]=i>>>8,this[c]=255&i,c+4},t.prototype.writeUint32BE=t.prototype.writeUInt32BE=function(i,c,v){return i=+i,c>>>=0,v||O(this,i,c,4,4294967295,0),this[c]=i>>>24,this[c+1]=i>>>16,this[c+2]=i>>>8,this[c+3]=255&i,c+4},t.prototype.writeBigUInt64LE=ot(function(i,c=0){return L(this,i,c,BigInt(0),BigInt("0xffffffffffffffff"))}),t.prototype.writeBigUInt64BE=ot(function(i,c=0){return z(this,i,c,BigInt(0),BigInt("0xffffffffffffffff"))}),t.prototype.writeIntLE=function(i,c,v,$){if(i=+i,c>>>=0,!$){const st=Math.pow(2,8*v-1);O(this,i,c,v,st-1,-st)}let Z=0,et=1,nt=0;for(this[c]=255&i;++Z<v&&(et*=256);)i<0&&nt===0&&this[c+Z-1]!==0&&(nt=1),this[c+Z]=(i/et>>0)-nt&255;return c+v},t.prototype.writeIntBE=function(i,c,v,$){if(i=+i,c>>>=0,!$){const st=Math.pow(2,8*v-1);O(this,i,c,v,st-1,-st)}let Z=v-1,et=1,nt=0;for(this[c+Z]=255&i;--Z>=0&&(et*=256);)i<0&&nt===0&&this[c+Z+1]!==0&&(nt=1),this[c+Z]=(i/et>>0)-nt&255;return c+v},t.prototype.writeInt8=function(i,c,v){return i=+i,c>>>=0,v||O(this,i,c,1,127,-128),i<0&&(i=255+i+1),this[c]=255&i,c+1},t.prototype.writeInt16LE=function(i,c,v){return i=+i,c>>>=0,v||O(this,i,c,2,32767,-32768),this[c]=255&i,this[c+1]=i>>>8,c+2},t.prototype.writeInt16BE=function(i,c,v){return i=+i,c>>>=0,v||O(this,i,c,2,32767,-32768),this[c]=i>>>8,this[c+1]=255&i,c+2},t.prototype.writeInt32LE=function(i,c,v){return i=+i,c>>>=0,v||O(this,i,c,4,2147483647,-2147483648),this[c]=255&i,this[c+1]=i>>>8,this[c+2]=i>>>16,this[c+3]=i>>>24,c+4},t.prototype.writeInt32BE=function(i,c,v){return i=+i,c>>>=0,v||O(this,i,c,4,2147483647,-2147483648),i<0&&(i=4294967295+i+1),this[c]=i>>>24,this[c+1]=i>>>16,this[c+2]=i>>>8,this[c+3]=255&i,c+4},t.prototype.writeBigInt64LE=ot(function(i,c=0){return L(this,i,c,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),t.prototype.writeBigInt64BE=ot(function(i,c=0){return z(this,i,c,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),t.prototype.writeFloatLE=function(i,c,v){return s(this,i,c,!0,v)},t.prototype.writeFloatBE=function(i,c,v){return s(this,i,c,!1,v)},t.prototype.writeDoubleLE=function(i,c,v){return B(this,i,c,!0,v)},t.prototype.writeDoubleBE=function(i,c,v){return B(this,i,c,!1,v)},t.prototype.copy=function(i,c,v,$){if(!t.isBuffer(i))throw new TypeError("argument should be a Buffer");if(v||(v=0),$||$===0||($=this.length),c>=i.length&&(c=i.length),c||(c=0),$>0&&$<v&&($=v),$===v||i.length===0||this.length===0)return 0;if(c<0)throw new RangeError("targetStart out of bounds");if(v<0||v>=this.length)throw new RangeError("Index out of range");if($<0)throw new RangeError("sourceEnd out of bounds");$>this.length&&($=this.length),i.length-c<$-v&&($=i.length-c+v);const Z=$-v;return this===i&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(c,v,$):Uint8Array.prototype.set.call(i,this.subarray(v,$),c),Z},t.prototype.fill=function(i,c,v,$){if(typeof i=="string"){if(typeof c=="string"?($=c,c=0,v=this.length):typeof v=="string"&&($=v,v=this.length),$!==void 0&&typeof $!="string")throw new TypeError("encoding must be a string");if(typeof $=="string"&&!t.isEncoding($))throw new TypeError("Unknown encoding: "+$);if(i.length===1){const et=i.charCodeAt(0);($==="utf8"&&et<128||$==="latin1")&&(i=et)}}else typeof i=="number"?i&=255:typeof i=="boolean"&&(i=Number(i));if(c<0||this.length<c||this.length<v)throw new RangeError("Out of range index");if(v<=c)return this;let Z;if(c>>>=0,v=v===void 0?this.length:v>>>0,i||(i=0),typeof i=="number")for(Z=c;Z<v;++Z)this[Z]=i;else{const et=t.isBuffer(i)?i:t.from(i,$),nt=et.length;if(nt===0)throw new TypeError('The value "'+i+'" is invalid for argument "value"');for(Z=0;Z<v-c;++Z)this[Z+c]=et[Z%nt]}return this};const D={};function Y(i,c,v){D[i]=class extends v{constructor(){super(),Object.defineProperty(this,"message",{value:c.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${i}]`,this.stack,delete this.name}get code(){return i}set code($){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:$,writable:!0})}toString(){return`${this.name} [${i}]: ${this.message}`}}}function K(i){let c="",v=i.length;const $=i[0]==="-"?1:0;for(;v>=$+4;v-=3)c=`_${i.slice(v-3,v)}${c}`;return`${i.slice(0,v)}${c}`}function A(i,c,v,$,Z,et){if(i>v||i<c){const nt=typeof c=="bigint"?"n":"";let st;throw st=et>3?c===0||c===BigInt(0)?`>= 0${nt} and < 2${nt} ** ${8*(et+1)}${nt}`:`>= -(2${nt} ** ${8*(et+1)-1}${nt}) and < 2 ** ${8*(et+1)-1}${nt}`:`>= ${c}${nt} and <= ${v}${nt}`,new D.ERR_OUT_OF_RANGE("value",st,i)}(function(nt,st,ut){R(st,"offset"),nt[st]!==void 0&&nt[st+ut]!==void 0||r(st,nt.length-(ut+1))})($,Z,et)}function R(i,c){if(typeof i!="number")throw new D.ERR_INVALID_ARG_TYPE(c,"number",i)}function r(i,c,v){throw Math.floor(i)!==i?(R(i,v),new D.ERR_OUT_OF_RANGE(v||"offset","an integer",i)):c<0?new D.ERR_BUFFER_OUT_OF_BOUNDS:new D.ERR_OUT_OF_RANGE(v||"offset",`>= ${v?1:0} and <= ${c}`,i)}Y("ERR_BUFFER_OUT_OF_BOUNDS",function(i){return i?`${i} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),Y("ERR_INVALID_ARG_TYPE",function(i,c){return`The "${i}" argument must be of type number. Received type ${typeof c}`},TypeError),Y("ERR_OUT_OF_RANGE",function(i,c,v){let $=`The value of "${i}" is out of range.`,Z=v;return Number.isInteger(v)&&Math.abs(v)>4294967296?Z=K(String(v)):typeof v=="bigint"&&(Z=String(v),(v>BigInt(2)**BigInt(32)||v<-(BigInt(2)**BigInt(32)))&&(Z=K(Z)),Z+="n"),$+=` It must be ${c}. Received ${Z}`,$},RangeError);const o=/[^+/0-9A-Za-z-_]/g;function S(i,c){let v;c=c||1/0;const $=i.length;let Z=null;const et=[];for(let nt=0;nt<$;++nt){if(v=i.charCodeAt(nt),v>55295&&v<57344){if(!Z){if(v>56319){(c-=3)>-1&&et.push(239,191,189);continue}if(nt+1===$){(c-=3)>-1&&et.push(239,191,189);continue}Z=v;continue}if(v<56320){(c-=3)>-1&&et.push(239,191,189),Z=v;continue}v=65536+(Z-55296<<10|v-56320)}else Z&&(c-=3)>-1&&et.push(239,191,189);if(Z=null,v<128){if((c-=1)<0)break;et.push(v)}else if(v<2048){if((c-=2)<0)break;et.push(v>>6|192,63&v|128)}else if(v<65536){if((c-=3)<0)break;et.push(v>>12|224,v>>6&63|128,63&v|128)}else{if(!(v<1114112))throw new Error("Invalid code point");if((c-=4)<0)break;et.push(v>>18|240,v>>12&63|128,v>>6&63|128,63&v|128)}}return et}function j(i){return _.toByteArray(function(c){if((c=(c=c.split("=")[0]).trim().replace(o,"")).length<2)return"";for(;c.length%4!=0;)c+="=";return c}(i))}function H(i,c,v,$){let Z;for(Z=0;Z<$&&!(Z+v>=c.length||Z>=i.length);++Z)c[Z+v]=i[Z];return Z}function tt(i,c){return i instanceof c||i!=null&&i.constructor!=null&&i.constructor.name!=null&&i.constructor.name===c.name}function rt(i){return i!=i}const it=function(){const i="0123456789abcdef",c=new Array(256);for(let v=0;v<16;++v){const $=16*v;for(let Z=0;Z<16;++Z)c[$+Z]=i[v]+i[Z]}return c}();function ot(i){return typeof BigInt>"u"?at:i}function at(){throw new Error("BigInt not supported")}},1227:function(X,Q,C){var _=C(4155);Q.formatArgs=function(I){if(I[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+I[0]+(this.useColors?"%c ":" ")+"+"+X.exports.humanize(this.diff),!this.useColors)return;const a="color: "+this.color;I.splice(1,0,a,"color: inherit");let n=0,t=0;I[0].replace(/%[a-zA-Z%]/g,d=>{d!=="%%"&&(n++,d==="%c"&&(t=n))}),I.splice(t,0,a)},Q.save=function(I){try{I?Q.storage.setItem("debug",I):Q.storage.removeItem("debug")}catch{}},Q.load=function(){let I;try{I=Q.storage.getItem("debug")}catch{}return!I&&_!==void 0&&"env"in _&&(I=_.env.DEBUG),I},Q.useColors=function(){return!(typeof window>"u"||!window.process||window.process.type!=="renderer"&&!window.process.__nwjs)||(typeof navigator>"u"||!navigator.userAgent||!navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&(typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))},Q.storage=function(){try{return localStorage}catch{}}(),Q.destroy=(()=>{let I=!1;return()=>{I||(I=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),Q.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],Q.log=console.debug||console.log||(()=>{}),X.exports=C(2447)(Q);const{formatters:f}=X.exports;f.j=function(I){try{return JSON.stringify(I)}catch(a){return"[UnexpectedJSONParseError]: "+a.message}}},2447:function(X,Q,C){X.exports=function(_){function f(n){let t,d,h,E=null;function k(...x){if(!k.enabled)return;const l=k,g=Number(new Date),w=g-(t||g);l.diff=w,l.prev=t,l.curr=g,t=g,x[0]=f.coerce(x[0]),typeof x[0]!="string"&&x.unshift("%O");let W=0;x[0]=x[0].replace(/%([a-zA-Z%])/g,(G,J)=>{if(G==="%%")return"%";W++;const m=f.formatters[J];if(typeof m=="function"){const b=x[W];G=m.call(l,b),x.splice(W,1),W--}return G}),f.formatArgs.call(l,x),(l.log||f.log).apply(l,x)}return k.namespace=n,k.useColors=f.useColors(),k.color=f.selectColor(n),k.extend=I,k.destroy=f.destroy,Object.defineProperty(k,"enabled",{enumerable:!0,configurable:!1,get:()=>E!==null?E:(d!==f.namespaces&&(d=f.namespaces,h=f.enabled(n)),h),set:x=>{E=x}}),typeof f.init=="function"&&f.init(k),k}function I(n,t){const d=f(this.namespace+(t===void 0?":":t)+n);return d.log=this.log,d}function a(n){return n.toString().substring(2,n.toString().length-2).replace(/\.\*\?$/,"*")}return f.debug=f,f.default=f,f.coerce=function(n){return n instanceof Error?n.stack||n.message:n},f.disable=function(){const n=[...f.names.map(a),...f.skips.map(a).map(t=>"-"+t)].join(",");return f.enable(""),n},f.enable=function(n){let t;f.save(n),f.namespaces=n,f.names=[],f.skips=[];const d=(typeof n=="string"?n:"").split(/[\s,]+/),h=d.length;for(t=0;t<h;t++)d[t]&&((n=d[t].replace(/\*/g,".*?"))[0]==="-"?f.skips.push(new RegExp("^"+n.slice(1)+"$")):f.names.push(new RegExp("^"+n+"$")))},f.enabled=function(n){if(n[n.length-1]==="*")return!0;let t,d;for(t=0,d=f.skips.length;t<d;t++)if(f.skips[t].test(n))return!1;for(t=0,d=f.names.length;t<d;t++)if(f.names[t].test(n))return!0;return!1},f.humanize=C(7824),f.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(_).forEach(n=>{f[n]=_[n]}),f.names=[],f.skips=[],f.formatters={},f.selectColor=function(n){let t=0;for(let d=0;d<n.length;d++)t=(t<<5)-t+n.charCodeAt(d),t|=0;return f.colors[Math.abs(t)%f.colors.length]},f.enable(f.load()),f}},5981:function(X,Q,C){var _=C(8764).Buffer,f=C(4155),I=C(8473),a=C(2840),n=C(5717),t=C(1852),d=_.from&&_.from!==Uint8Array.from?_.from([0]):new _([0]),h=function(l,g){l._corked?l.once("uncork",g):g()},E=function(l,g){return function(w){w?function(W,G){W._autoDestroy&&W.destroy(G)}(l,w.message==="premature close"?null:w):g&&!l._ended&&l.end()}},k=function(){},x=function(l,g,w){if(!(this instanceof x))return new x(l,g,w);I.Duplex.call(this,w),this._writable=null,this._readable=null,this._readable2=null,this._autoDestroy=!w||w.autoDestroy!==!1,this._forwardDestroy=!w||w.destroy!==!1,this._forwardEnd=!w||w.end!==!1,this._corked=1,this._ondrain=null,this._drained=!1,this._forwarding=!1,this._unwrite=null,this._unread=null,this._ended=!1,this.destroyed=!1,l&&this.setWritable(l),g&&this.setReadable(g)};n(x,I.Duplex),x.obj=function(l,g,w){return w||(w={}),w.objectMode=!0,w.highWaterMark=16,new x(l,g,w)},x.prototype.cork=function(){++this._corked==1&&this.emit("cork")},x.prototype.uncork=function(){this._corked&&--this._corked==0&&this.emit("uncork")},x.prototype.setWritable=function(l){if(this._unwrite&&this._unwrite(),this.destroyed)l&&l.destroy&&l.destroy();else if(l!==null&&l!==!1){var g=this,w=a(l,{writable:!0,readable:!1},E(this,this._forwardEnd)),W=function(){var G=g._ondrain;g._ondrain=null,G&&G()};this._unwrite&&f.nextTick(W),this._writable=l,this._writable.on("drain",W),this._unwrite=function(){g._writable.removeListener("drain",W),w()},this.uncork()}else this.end()},x.prototype.setReadable=function(l){if(this._unread&&this._unread(),this.destroyed)l&&l.destroy&&l.destroy();else{if(l===null||l===!1)return this.push(null),void this.resume();var g,w=this,W=a(l,{writable:!1,readable:!0},E(this)),G=function(){w._forward()},J=function(){w.push(null)};this._drained=!0,this._readable=l,this._readable2=l._readableState?l:(g=l,new I.Readable({objectMode:!0,highWaterMark:16}).wrap(g)),this._readable2.on("readable",G),this._readable2.on("end",J),this._unread=function(){w._readable2.removeListener("readable",G),w._readable2.removeListener("end",J),W()},this._forward()}},x.prototype._read=function(){this._drained=!0,this._forward()},x.prototype._forward=function(){if(!this._forwarding&&this._readable2&&this._drained){var l;for(this._forwarding=!0;this._drained&&(l=t(this._readable2))!==null;)this.destroyed||(this._drained=this.push(l));this._forwarding=!1}},x.prototype.destroy=function(l,g){if(g||(g=k),this.destroyed)return g(null);this.destroyed=!0;var w=this;f.nextTick(function(){w._destroy(l),g(null)})},x.prototype._destroy=function(l){if(l){var g=this._ondrain;this._ondrain=null,g?g(l):this.emit("error",l)}this._forwardDestroy&&(this._readable&&this._readable.destroy&&this._readable.destroy(),this._writable&&this._writable.destroy&&this._writable.destroy()),this.emit("close")},x.prototype._write=function(l,g,w){if(!this.destroyed)return this._corked?h(this,this._write.bind(this,l,g,w)):l===d?this._finish(w):this._writable?void(this._writable.write(l)===!1?this._ondrain=w:this.destroyed||w()):w()},x.prototype._finish=function(l){var g=this;this.emit("preend"),h(this,function(){var w,W;W=function(){g._writableState.prefinished===!1&&(g._writableState.prefinished=!0),g.emit("prefinish"),h(g,l)},(w=g._forwardEnd&&g._writable)?w._writableState&&w._writableState.finished?W():w._writableState?w.end(W):(w.end(),W()):W()})},x.prototype.end=function(l,g,w){return typeof l=="function"?this.end(null,null,l):typeof g=="function"?this.end(l,null,g):(this._ended=!0,l&&this.write(l),this._writableState.ending||this._writableState.destroyed||this.write(d),I.Writable.prototype.end.call(this,w))},X.exports=x},2840:function(X,Q,C){var _=C(4155),f=C(778),I=function(){},a=function(n,t,d){if(typeof t=="function")return a(n,null,t);t||(t={}),d=f(d||I);var h=n._writableState,E=n._readableState,k=t.readable||t.readable!==!1&&n.readable,x=t.writable||t.writable!==!1&&n.writable,l=!1,g=function(){n.writable||w()},w=function(){x=!1,k||d.call(n)},W=function(){k=!1,x||d.call(n)},G=function(M){d.call(n,M?new Error("exited with error code: "+M):null)},J=function(M){d.call(n,M)},m=function(){_.nextTick(b)},b=function(){if(!l)return(!k||E&&E.ended&&!E.destroyed)&&(!x||h&&h.ended&&!h.destroyed)?void 0:d.call(n,new Error("premature close"))},u=function(){n.req.on("finish",w)};return function(M){return M.setHeader&&typeof M.abort=="function"}(n)?(n.on("complete",w),n.on("abort",m),n.req?u():n.on("request",u)):x&&!h&&(n.on("end",g),n.on("close",g)),function(M){return M.stdio&&Array.isArray(M.stdio)&&M.stdio.length===3}(n)&&n.on("exit",G),n.on("end",W),n.on("finish",w),t.error!==!1&&n.on("error",J),n.on("close",m),function(){l=!0,n.removeListener("complete",w),n.removeListener("abort",m),n.removeListener("request",u),n.req&&n.req.removeListener("finish",w),n.removeListener("end",g),n.removeListener("close",g),n.removeListener("finish",w),n.removeListener("exit",G),n.removeListener("end",W),n.removeListener("error",J),n.removeListener("close",m)}};X.exports=a},7187:function(X){var Q=Object.create||function(m){var b=function(){};return b.prototype=m,new b},C=Object.keys||function(m){var b=[];for(var u in m)Object.prototype.hasOwnProperty.call(m,u)&&b.push(u);return u},_=Function.prototype.bind||function(m){var b=this;return function(){return b.apply(m,arguments)}};function f(){this._events&&Object.prototype.hasOwnProperty.call(this,"_events")||(this._events=Q(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0}X.exports=f,f.EventEmitter=f,f.prototype._events=void 0,f.prototype._maxListeners=void 0;var I,a=10;try{var n={};Object.defineProperty&&Object.defineProperty(n,"x",{value:0}),I=n.x===0}catch{I=!1}function t(m){return m._maxListeners===void 0?f.defaultMaxListeners:m._maxListeners}function d(m,b,u){if(b)m.call(u);else for(var M=m.length,U=J(m,M),F=0;F<M;++F)U[F].call(u)}function h(m,b,u,M){if(b)m.call(u,M);else for(var U=m.length,F=J(m,U),P=0;P<U;++P)F[P].call(u,M)}function E(m,b,u,M,U){if(b)m.call(u,M,U);else for(var F=m.length,P=J(m,F),V=0;V<F;++V)P[V].call(u,M,U)}function k(m,b,u,M,U,F){if(b)m.call(u,M,U,F);else for(var P=m.length,V=J(m,P),T=0;T<P;++T)V[T].call(u,M,U,F)}function x(m,b,u,M){if(b)m.apply(u,M);else for(var U=m.length,F=J(m,U),P=0;P<U;++P)F[P].apply(u,M)}function l(m,b,u,M){var U,F,P;if(typeof u!="function")throw new TypeError('"listener" argument must be a function');if((F=m._events)?(F.newListener&&(m.emit("newListener",b,u.listener?u.listener:u),F=m._events),P=F[b]):(F=m._events=Q(null),m._eventsCount=0),P){if(typeof P=="function"?P=F[b]=M?[u,P]:[P,u]:M?P.unshift(u):P.push(u),!P.warned&&(U=t(m))&&U>0&&P.length>U){P.warned=!0;var V=new Error("Possible EventEmitter memory leak detected. "+P.length+' "'+String(b)+'" listeners added. Use emitter.setMaxListeners() to increase limit.');V.name="MaxListenersExceededWarning",V.emitter=m,V.type=b,V.count=P.length,typeof console=="object"&&console.warn&&console.warn("%s: %s",V.name,V.message)}}else P=F[b]=u,++m._eventsCount;return m}function g(){if(!this.fired)switch(this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length){case 0:return this.listener.call(this.target);case 1:return this.listener.call(this.target,arguments[0]);case 2:return this.listener.call(this.target,arguments[0],arguments[1]);case 3:return this.listener.call(this.target,arguments[0],arguments[1],arguments[2]);default:for(var m=new Array(arguments.length),b=0;b<m.length;++b)m[b]=arguments[b];this.listener.apply(this.target,m)}}function w(m,b,u){var M={fired:!1,wrapFn:void 0,target:m,type:b,listener:u},U=_.call(g,M);return U.listener=u,M.wrapFn=U,U}function W(m,b,u){var M=m._events;if(!M)return[];var U=M[b];return U?typeof U=="function"?u?[U.listener||U]:[U]:u?function(F){for(var P=new Array(F.length),V=0;V<P.length;++V)P[V]=F[V].listener||F[V];return P}(U):J(U,U.length):[]}function G(m){var b=this._events;if(b){var u=b[m];if(typeof u=="function")return 1;if(u)return u.length}return 0}function J(m,b){for(var u=new Array(b),M=0;M<b;++M)u[M]=m[M];return u}I?Object.defineProperty(f,"defaultMaxListeners",{enumerable:!0,get:function(){return a},set:function(m){if(typeof m!="number"||m<0||m!=m)throw new TypeError('"defaultMaxListeners" must be a positive number');a=m}}):f.defaultMaxListeners=a,f.prototype.setMaxListeners=function(m){if(typeof m!="number"||m<0||isNaN(m))throw new TypeError('"n" argument must be a positive number');return this._maxListeners=m,this},f.prototype.getMaxListeners=function(){return t(this)},f.prototype.emit=function(m){var b,u,M,U,F,P,V=m==="error";if(P=this._events)V=V&&P.error==null;else if(!V)return!1;if(V){if(arguments.length>1&&(b=arguments[1]),b instanceof Error)throw b;var T=new Error('Unhandled "error" event. ('+b+")");throw T.context=b,T}if(!(u=P[m]))return!1;var y=typeof u=="function";switch(M=arguments.length){case 1:d(u,y,this);break;case 2:h(u,y,this,arguments[1]);break;case 3:E(u,y,this,arguments[1],arguments[2]);break;case 4:k(u,y,this,arguments[1],arguments[2],arguments[3]);break;default:for(U=new Array(M-1),F=1;F<M;F++)U[F-1]=arguments[F];x(u,y,this,U)}return!0},f.prototype.addListener=function(m,b){return l(this,m,b,!1)},f.prototype.on=f.prototype.addListener,f.prototype.prependListener=function(m,b){return l(this,m,b,!0)},f.prototype.once=function(m,b){if(typeof b!="function")throw new TypeError('"listener" argument must be a function');return this.on(m,w(this,m,b)),this},f.prototype.prependOnceListener=function(m,b){if(typeof b!="function")throw new TypeError('"listener" argument must be a function');return this.prependListener(m,w(this,m,b)),this},f.prototype.removeListener=function(m,b){var u,M,U,F,P;if(typeof b!="function")throw new TypeError('"listener" argument must be a function');if(!(M=this._events))return this;if(!(u=M[m]))return this;if(u===b||u.listener===b)--this._eventsCount==0?this._events=Q(null):(delete M[m],M.removeListener&&this.emit("removeListener",m,u.listener||b));else if(typeof u!="function"){for(U=-1,F=u.length-1;F>=0;F--)if(u[F]===b||u[F].listener===b){P=u[F].listener,U=F;break}if(U<0)return this;U===0?u.shift():function(V,T){for(var y=T,N=y+1,q=V.length;N<q;y+=1,N+=1)V[y]=V[N];V.pop()}(u,U),u.length===1&&(M[m]=u[0]),M.removeListener&&this.emit("removeListener",m,P||b)}return this},f.prototype.removeAllListeners=function(m){var b,u,M;if(!(u=this._events))return this;if(!u.removeListener)return arguments.length===0?(this._events=Q(null),this._eventsCount=0):u[m]&&(--this._eventsCount==0?this._events=Q(null):delete u[m]),this;if(arguments.length===0){var U,F=C(u);for(M=0;M<F.length;++M)(U=F[M])!=="removeListener"&&this.removeAllListeners(U);return this.removeAllListeners("removeListener"),this._events=Q(null),this._eventsCount=0,this}if(typeof(b=u[m])=="function")this.removeListener(m,b);else if(b)for(M=b.length-1;M>=0;M--)this.removeListener(m,b[M]);return this},f.prototype.listeners=function(m){return W(this,m,!0)},f.prototype.rawListeners=function(m){return W(this,m,!1)},f.listenerCount=function(m,b){return typeof m.listenerCount=="function"?m.listenerCount(b):G.call(m,b)},f.prototype.listenerCount=G,f.prototype.eventNames=function(){return this._eventsCount>0?Reflect.ownKeys(this._events):[]}},645:function(X,Q){Q.read=function(C,_,f,I,a){var n,t,d=8*a-I-1,h=(1<<d)-1,E=h>>1,k=-7,x=f?a-1:0,l=f?-1:1,g=C[_+x];for(x+=l,n=g&(1<<-k)-1,g>>=-k,k+=d;k>0;n=256*n+C[_+x],x+=l,k-=8);for(t=n&(1<<-k)-1,n>>=-k,k+=I;k>0;t=256*t+C[_+x],x+=l,k-=8);if(n===0)n=1-E;else{if(n===h)return t?NaN:1/0*(g?-1:1);t+=Math.pow(2,I),n-=E}return(g?-1:1)*t*Math.pow(2,n-I)},Q.write=function(C,_,f,I,a,n){var t,d,h,E=8*n-a-1,k=(1<<E)-1,x=k>>1,l=a===23?Math.pow(2,-24)-Math.pow(2,-77):0,g=I?0:n-1,w=I?1:-1,W=_<0||_===0&&1/_<0?1:0;for(_=Math.abs(_),isNaN(_)||_===1/0?(d=isNaN(_)?1:0,t=k):(t=Math.floor(Math.log(_)/Math.LN2),_*(h=Math.pow(2,-t))<1&&(t--,h*=2),(_+=t+x>=1?l/h:l*Math.pow(2,1-x))*h>=2&&(t++,h/=2),t+x>=k?(d=0,t=k):t+x>=1?(d=(_*h-1)*Math.pow(2,a),t+=x):(d=_*Math.pow(2,x-1)*Math.pow(2,a),t=0));a>=8;C[f+g]=255&d,g+=w,d/=256,a-=8);for(t=t<<a|d,E+=a;E>0;C[f+g]=255&t,g+=w,t/=256,E-=8);C[f+g-w]|=128*W}},5717:function(X){typeof Object.create=="function"?X.exports=function(Q,C){C&&(Q.super_=C,Q.prototype=Object.create(C.prototype,{constructor:{value:Q,enumerable:!1,writable:!0,configurable:!0}}))}:X.exports=function(Q,C){if(C){Q.super_=C;var _=function(){};_.prototype=C.prototype,Q.prototype=new _,Q.prototype.constructor=Q}}},9246:function(X,Q,C){C.d(Q,{l4:function(){return E}});var _=function(G){this.value=void 0,this.pre=void 0,this.next=void 0,this.value=G};function f(G){var J=this;G===void 0&&(G=[]);var m=0,b=void 0,u=void 0;this.size=function(){return m},this.empty=function(){return m===0},this.clear=function(){b=u=void 0,m=0},this.front=function(){return b==null?void 0:b.value},this.back=function(){return u==null?void 0:u.value},this.forEach=function(M){for(var U=b,F=0;U;){if(U.value===void 0)throw new Error("unknown error");M(U.value,F++),U=U.next}},this.getElementByPos=function(M){if(M<0||M>=m)throw new Error("pos must more then 0 and less then the list length");for(var U=b;M--&&U;)U=U.next;if(!U||U.value===void 0)throw new Error("unknown error");return U.value},this.eraseElementByPos=function(M){if(M<0||M>=m)throw new Error("erase pos must more then 0 and less then the list length");if(M===0)this.popFront();else if(M===m-1)this.popBack();else{for(var U=b;M--;){if(!(U!=null&&U.next))throw new Error("unknown error");U=U.next}if(!U||!U.pre||!U.next)throw new Error("unknown error");var F=U.pre,P=U.next;P.pre=F,F.next=P,m>0&&--m}},this.eraseElementByValue=function(M){for(;b&&b.value===M;)this.popFront();for(;u&&u.value===M;)this.popBack();if(b)for(var U=b;U;){if(U.value===M){var F=U.pre,P=U.next;P&&(P.pre=F),F&&(F.next=P),m>0&&--m}U=U.next}},this.pushBack=function(M){if(M==null)throw new Error("you can't push null or undefined here");++m;var U=new _(M);u?(u.next=U,U.pre=u,u=U):b=u=U},this.popBack=function(){u&&(m>0&&--m,u&&(b===u?b=u=void 0:(u=u.pre)&&(u.next=void 0)))},this.setElementByPos=function(M,U){if(U==null)throw new Error("you can't set null or undefined here");if(M<0||M>=m)throw new Error("pos must more then 0 and less then the list length");for(var F=b;M--;){if(!F)throw new Error("unknown error");F=F.next}F&&(F.value=U)},this.insert=function(M,U,F){if(F===void 0&&(F=1),U==null)throw new Error("you can't insert null or undefined here");if(M<0||M>m)throw new Error("insert pos must more then 0 and less then or equal to the list length");if(F<0)throw new Error("insert size must more than 0");if(M===0)for(;F--;)this.pushFront(U);else if(M===m)for(;F--;)this.pushBack(U);else{for(var P=b,V=1;V<M;++V){if(!(P!=null&&P.next))throw new Error("unknown error");P=P==null?void 0:P.next}if(!P)throw new Error("unknown error");var T=P.next;for(m+=F;F--;)P.next=new _(U),P.next.pre=P,P=P.next;P.next=T,T&&(T.pre=P)}},this.find=function(M){for(var U=b;U;){if(U.value===M)return!0;U=U.next}return!1},this.reverse=function(){for(var M=b,U=u,F=0;M&&U&&2*F<m;){var P=M.value;M.value=U.value,U.value=P,M=M.next,U=U.pre,++F}},this.unique=function(){for(var M=b;M;){for(var U=M;U&&U.next&&U.value===U.next.value;)U=U.next,m>0&&--m;M.next=U.next,M.next&&(M.next.pre=M),M=M.next}},this.sort=function(M){var U=[];this.forEach(function(P){U.push(P)}),U.sort(M);var F=b;U.forEach(function(P){F&&(F.value=P,F=F.next)})},this.pushFront=function(M){if(M==null)throw new Error("you can't push null or undefined here");++m;var U=new _(M);b?(U.next=b,b.pre=U,b=U):b=u=U},this.popFront=function(){b&&(m>0&&--m,b&&(b===u?b=u=void 0:(b=b.next)&&(b.pre=void 0)))},this.merge=function(M){var U=this,F=b;M.forEach(function(P){for(;F&&F.value!==void 0&&F.value<=P;)F=F.next;if(F===void 0)U.pushBack(P),F=u;else if(F===b)U.pushFront(P),F=b;else{++m;var V=F.pre;V&&(V.next=new _(P),V.next.pre=V,V.next.next=F,F&&(F.pre=V.next))}})},this[Symbol.iterator]=function(){return function(){var M;return function(U,F){var P,V,T,y,N={label:0,sent:function(){if(1&T[0])throw T[1];return T[1]},trys:[],ops:[]};return y={next:q(0),throw:q(1),return:q(2)},typeof Symbol=="function"&&(y[Symbol.iterator]=function(){return this}),y;function q(p){return function(O){return function(L){if(P)throw new TypeError("Generator is already executing.");for(;N;)try{if(P=1,V&&(T=2&L[0]?V.return:L[0]?V.throw||((T=V.return)&&T.call(V),0):V.next)&&!(T=T.call(V,L[1])).done)return T;switch(V=0,T&&(L=[2&L[0],T.value]),L[0]){case 0:case 1:T=L;break;case 4:return N.label++,{value:L[1],done:!1};case 5:N.label++,V=L[1],L=[0];continue;case 7:L=N.ops.pop(),N.trys.pop();continue;default:if(!((T=(T=N.trys).length>0&&T[T.length-1])||L[0]!==6&&L[0]!==2)){N=0;continue}if(L[0]===3&&(!T||L[1]>T[0]&&L[1]<T[3])){N.label=L[1];break}if(L[0]===6&&N.label<T[1]){N.label=T[1],T=L;break}if(T&&N.label<T[2]){N.label=T[2],N.ops.push(L);break}T[2]&&N.ops.pop(),N.trys.pop();continue}L=F.call(U,N)}catch(z){L=[6,z],V=0}finally{P=T=0}if(5&L[0])throw L[1];return{value:L[0]?L[1]:void 0,done:!0}}([p,O])}}}(this,function(U){switch(U.label){case 0:M=b,U.label=1;case 1:if(M===void 0)return[3,3];if(!M.value)throw new Error("unknown error");return[4,M.value];case 2:return U.sent(),M=M.next,[3,1];case 3:return[2]}})}()},G.forEach(function(M){return J.pushBack(M)}),Object.freeze(this)}Object.freeze(f);var I=f;function a(G){var J=this;G===void 0&&(G=[]);var m=[],b=0,u=0,M=0,U=0,F=0,P=0;this.size=function(){return P},this.empty=function(){return P===0},this.clear=function(){b=M=u=U=F=P=0,T.call(this,a.bucketSize),P=0},this.front=function(){return m[b][u]},this.back=function(){return m[M][U]},this.forEach=function(y){if(!this.empty()){var N=0;if(b!==M){for(p=u;p<a.bucketSize;++p)y(m[b][p],N++);for(p=b+1;p<M;++p)for(var q=0;q<a.bucketSize;++q)y(m[p][q],N++);for(p=0;p<=U;++p)y(m[M][p],N++)}else for(var p=u;p<=U;++p)y(m[b][p],N++)}};var V=function(y){var N=b*a.bucketSize+u,q=N+y,p=M*a.bucketSize+U;if(q<N||q>p)throw new Error("pos should more than 0 and less than queue's size");return{curNodeBucketIndex:Math.floor(q/a.bucketSize),curNodePointerIndex:q%a.bucketSize}};this.getElementByPos=function(y){var N=V(y),q=N.curNodeBucketIndex,p=N.curNodePointerIndex;return m[q][p]},this.eraseElementByPos=function(y){var N=this;if(y<0||y>P)throw new Error("pos should more than 0 and less than queue's size");if(y===0)this.popFront();else if(y===this.size())this.popBack();else{for(var q=[],p=y+1;p<P;++p)q.push(this.getElementByPos(p));this.cut(y),this.popBack(),q.forEach(function(O){return N.pushBack(O)})}},this.eraseElementByValue=function(y){if(!this.empty()){var N=[];this.forEach(function(O){O!==y&&N.push(O)});for(var q=N.length,p=0;p<q;++p)this.setElementByPos(p,N[p]);this.cut(q-1)}};var T=function(y){for(var N=[],q=y*a.sigma,p=Math.max(Math.ceil(q/a.bucketSize),2),O=0;O<p;++O)N.push(new Array(a.bucketSize));var L=Math.ceil(y/a.bucketSize),z=Math.floor(p/2)-Math.floor(L/2),e=z,s=0;if(this.size())for(O=0;O<L;++O){for(var B=0;B<a.bucketSize;++B)if(N[z+O][B]=this.front(),this.popFront(),this.empty()){e=z+O,s=B;break}if(this.empty())break}m=N,b=z,u=0,M=e,U=s,F=p,P=y};this.pushBack=function(y){this.empty()||(M===F-1&&U===a.bucketSize-1&&T.call(this,this.size()),U<a.bucketSize-1?++U:M<F-1&&(++M,U=0)),++P,m[M][U]=y},this.popBack=function(){this.empty()||(this.size()!==1&&(U>0?--U:b<M&&(--M,U=a.bucketSize-1)),P>0&&--P)},this.setElementByPos=function(y,N){var q=V(y),p=q.curNodeBucketIndex,O=q.curNodePointerIndex;m[p][O]=N},this.insert=function(y,N,q){var p=this;if(q===void 0&&(q=1),y===0)for(;q--;)this.pushFront(N);else if(y===this.size())for(;q--;)this.pushBack(N);else{for(var O=[],L=y;L<P;++L)O.push(this.getElementByPos(L));for(this.cut(y-1),L=0;L<q;++L)this.pushBack(N);O.forEach(function(z){return p.pushBack(z)})}},this.find=function(y){if(b===M){for(var N=u;N<=U;++N)if(m[b][N]===y)return!0;return!1}for(N=u;N<a.bucketSize;++N)if(m[b][N]===y)return!0;for(N=b+1;N<M;++N)for(var q=0;q<a.bucketSize;++q)if(m[N][q]===y)return!0;for(N=0;N<=U;++N)if(m[M][N]===y)return!0;return!1},this.reverse=function(){for(var y=0,N=P-1;y<N;){var q=this.getElementByPos(y);this.setElementByPos(y,this.getElementByPos(N)),this.setElementByPos(N,q),++y,--N}},this.unique=function(){if(!this.empty()){var y=[],N=this.front();this.forEach(function(p,O){O!==0&&p===N||(y.push(p),N=p)});for(var q=0;q<P;++q)this.setElementByPos(q,y[q]);this.cut(y.length-1)}},this.sort=function(y){var N=[];this.forEach(function(p){N.push(p)}),N.sort(y);for(var q=0;q<P;++q)this.setElementByPos(q,N[q])},this.pushFront=function(y){this.empty()||(b===0&&u===0&&T.call(this,this.size()),u>0?--u:b>0&&(--b,u=a.bucketSize-1)),++P,m[b][u]=y},this.popFront=function(){this.empty()||(this.size()!==1&&(u<a.bucketSize-1?++u:b<M&&(++b,u=0)),P>0&&--P)},this.shrinkToFit=function(){var y=this,N=[];this.forEach(function(L){N.push(L)});var q=N.length;m=[];for(var p=Math.ceil(q/a.bucketSize),O=0;O<p;++O)m.push(new Array(a.bucketSize));this.clear(),N.forEach(function(L){return y.pushBack(L)})},this.cut=function(y){if(y<0)this.clear();else{var N=V(y),q=N.curNodeBucketIndex,p=N.curNodePointerIndex;M=q,U=p,P=y+1}},this[Symbol.iterator]=function(){return function(){var y,N;return function(q,p){var O,L,z,e,s={label:0,sent:function(){if(1&z[0])throw z[1];return z[1]},trys:[],ops:[]};return e={next:B(0),throw:B(1),return:B(2)},typeof Symbol=="function"&&(e[Symbol.iterator]=function(){return this}),e;function B(D){return function(Y){return function(K){if(O)throw new TypeError("Generator is already executing.");for(;s;)try{if(O=1,L&&(z=2&K[0]?L.return:K[0]?L.throw||((z=L.return)&&z.call(L),0):L.next)&&!(z=z.call(L,K[1])).done)return z;switch(L=0,z&&(K=[2&K[0],z.value]),K[0]){case 0:case 1:z=K;break;case 4:return s.label++,{value:K[1],done:!1};case 5:s.label++,L=K[1],K=[0];continue;case 7:K=s.ops.pop(),s.trys.pop();continue;default:if(!((z=(z=s.trys).length>0&&z[z.length-1])||K[0]!==6&&K[0]!==2)){s=0;continue}if(K[0]===3&&(!z||K[1]>z[0]&&K[1]<z[3])){s.label=K[1];break}if(K[0]===6&&s.label<z[1]){s.label=z[1],z=K;break}if(z&&s.label<z[2]){s.label=z[2],s.ops.push(K);break}z[2]&&s.ops.pop(),s.trys.pop();continue}K=p.call(q,s)}catch(A){K=[6,A],L=0}finally{O=z=0}if(5&K[0])throw K[1];return{value:K[0]?K[1]:void 0,done:!0}}([D,Y])}}}(this,function(q){switch(q.label){case 0:if(P===0)return[2];if(b!==M)return[3,5];N=u,q.label=1;case 1:return N<=U?[4,m[b][N]]:[3,4];case 2:q.sent(),q.label=3;case 3:return++N,[3,1];case 4:return[2];case 5:N=u,q.label=6;case 6:return N<a.bucketSize?[4,m[b][N]]:[3,9];case 7:q.sent(),q.label=8;case 8:return++N,[3,6];case 9:N=b+1,q.label=10;case 10:if(!(N<M))return[3,15];y=0,q.label=11;case 11:return y<a.bucketSize?[4,m[N][y]]:[3,14];case 12:q.sent(),q.label=13;case 13:return++y,[3,11];case 14:return++N,[3,10];case 15:N=0,q.label=16;case 16:return N<=U?[4,m[M][N]]:[3,19];case 17:q.sent(),q.label=18;case 18:return++N,[3,16];case 19:return[2]}})}()},function(){var y=a.bucketSize;G.size?y=G.size():G.length&&(y=G.length);var N=y*a.sigma;F=Math.ceil(N/a.bucketSize),F=Math.max(F,3);for(var q=0;q<F;++q)m.push(new Array(a.bucketSize));var p=Math.ceil(y/a.bucketSize);b=Math.floor(F/2)-Math.floor(p/2),M=b,G.forEach(function(O){return J.pushBack(O)})}(),Object.freeze(this)}a.sigma=3,a.bucketSize=5e3,Object.freeze(a);var n=function(){function G(J,m){this.color=!0,this.key=void 0,this.value=void 0,this.parent=void 0,this.brother=void 0,this.leftChild=void 0,this.rightChild=void 0,this.key=J,this.value=m}return G.prototype.rotateLeft=function(){var J=this.parent,m=this.brother,b=this.leftChild,u=this.rightChild;if(!u)throw new Error("unknown error");var M=u.leftChild,U=u.rightChild;return J&&(J.leftChild===this?J.leftChild=u:J.rightChild===this&&(J.rightChild=u)),u.parent=J,u.brother=m,u.leftChild=this,u.rightChild=U,m&&(m.brother=u),this.parent=u,this.brother=U,this.leftChild=b,this.rightChild=M,U&&(U.parent=u,U.brother=this),b&&(b.parent=this,b.brother=M),M&&(M.parent=this,M.brother=b),u},G.prototype.rotateRight=function(){var J=this.parent,m=this.brother,b=this.leftChild;if(!b)throw new Error("unknown error");var u=this.rightChild,M=b.leftChild,U=b.rightChild;return J&&(J.leftChild===this?J.leftChild=b:J.rightChild===this&&(J.rightChild=b)),b.parent=J,b.brother=m,b.leftChild=M,b.rightChild=this,m&&(m.brother=b),M&&(M.parent=b,M.brother=this),this.parent=b,this.brother=M,this.leftChild=U,this.rightChild=u,U&&(U.parent=this,U.brother=u),u&&(u.parent=this,u.brother=U),b},G.prototype.remove=function(){if(this.leftChild||this.rightChild)throw new Error("can only remove leaf node");this.parent&&(this===this.parent.leftChild?this.parent.leftChild=void 0:this===this.parent.rightChild&&(this.parent.rightChild=void 0)),this.brother&&(this.brother.brother=void 0),this.key=void 0,this.value=void 0,this.parent=void 0,this.brother=void 0},G.TreeNodeColorType={red:!0,black:!1},G}();Object.freeze(n);var t=n,d=function(G){var J=typeof Symbol=="function"&&Symbol.iterator,m=J&&G[J],b=0;if(m)return m.call(G);if(G&&typeof G.length=="number")return{next:function(){return G&&b>=G.length&&(G=void 0),{value:G&&G[b++],done:!G}}};throw new TypeError(J?"Object is not iterable.":"Symbol.iterator is not defined.")};function h(G,J){var m=this;G===void 0&&(G=[]),J=J||function(e,s){return e<s?-1:e>s?1:0};var b=0,u=new t;u.color=t.TreeNodeColorType.black,this.size=function(){return b},this.empty=function(){return b===0},this.clear=function(){b=0,u.key=void 0,u.leftChild=u.rightChild=u.brother=u.parent=void 0,u.color=t.TreeNodeColorType.black};var M=function(e){if(!e||e.key===void 0)throw new Error("unknown error");return e.leftChild?M(e.leftChild):e},U=function(e){if(!e||e.key===void 0)throw new Error("unknown error");return e.rightChild?U(e.rightChild):e};this.front=function(){if(!this.empty())return M(u).key},this.back=function(){if(!this.empty())return U(u).key},this.forEach=function(e){var s,B,D=0;try{for(var Y=d(this),K=Y.next();!K.done;K=Y.next())e(K.value,D++)}catch(A){s={error:A}}finally{try{K&&!K.done&&(B=Y.return)&&B.call(Y)}finally{if(s)throw s.error}}},this.getElementByPos=function(e){var s,B;if(e<0||e>=this.size())throw new Error("pos must more than 0 and less than set's size");var D=0;try{for(var Y=d(this),K=Y.next();!K.done;K=Y.next()){var A=K.value;if(D===e)return A;++D}}catch(R){s={error:R}}finally{try{K&&!K.done&&(B=Y.return)&&B.call(Y)}finally{if(s)throw s.error}}throw new Error("unknown error")};var F=function(e){var s=e.parent;if(!s){if(e===u)return;throw new Error("unknown error")}if(e.color!==t.TreeNodeColorType.red){var B=e.brother;if(!B)throw new Error("unknown error");if(e===s.leftChild)if(B.color===t.TreeNodeColorType.red){B.color=t.TreeNodeColorType.black,s.color=t.TreeNodeColorType.red;var D=s.rotateLeft();u===s&&(u=D),F(e)}else B.color===t.TreeNodeColorType.black&&(B.rightChild&&B.rightChild.color===t.TreeNodeColorType.red?(B.color=s.color,s.color=t.TreeNodeColorType.black,B.rightChild&&(B.rightChild.color=t.TreeNodeColorType.black),D=s.rotateLeft(),u===s&&(u=D),e.color=t.TreeNodeColorType.black):B.rightChild&&B.rightChild.color!==t.TreeNodeColorType.black||!B.leftChild||B.leftChild.color!==t.TreeNodeColorType.red?B.leftChild&&B.leftChild.color!==t.TreeNodeColorType.black||B.rightChild&&B.rightChild.color!==t.TreeNodeColorType.black||(B.color=t.TreeNodeColorType.red,F(s)):(B.color=t.TreeNodeColorType.red,B.leftChild&&(B.leftChild.color=t.TreeNodeColorType.black),D=B.rotateRight(),u===B&&(u=D),F(e)));else e===s.rightChild&&(B.color===t.TreeNodeColorType.red?(B.color=t.TreeNodeColorType.black,s.color=t.TreeNodeColorType.red,D=s.rotateRight(),u===s&&(u=D),F(e)):B.color===t.TreeNodeColorType.black&&(B.leftChild&&B.leftChild.color===t.TreeNodeColorType.red?(B.color=s.color,s.color=t.TreeNodeColorType.black,B.leftChild&&(B.leftChild.color=t.TreeNodeColorType.black),D=s.rotateRight(),u===s&&(u=D),e.color=t.TreeNodeColorType.black):B.leftChild&&B.leftChild.color!==t.TreeNodeColorType.black||!B.rightChild||B.rightChild.color!==t.TreeNodeColorType.red?B.leftChild&&B.leftChild.color!==t.TreeNodeColorType.black||B.rightChild&&B.rightChild.color!==t.TreeNodeColorType.black||(B.color=t.TreeNodeColorType.red,F(s)):(B.color=t.TreeNodeColorType.red,B.rightChild&&(B.rightChild.color=t.TreeNodeColorType.black),D=B.rotateLeft(),u===B&&(u=D),F(e))))}else e.color=t.TreeNodeColorType.black},P=function(e){for(var s=e;s.leftChild||s.rightChild;){if(s.rightChild){s=M(s.rightChild);var B=e.key;e.key=s.key,s.key=B,e=s}s.leftChild&&(s=U(s.leftChild),B=e.key,e.key=s.key,s.key=B,e=s)}F(s),s&&s.remove(),--b,u.color=t.TreeNodeColorType.black},V=function(e,s){return!(!e||e.key===void 0)&&(!!V(e.leftChild,s)||!!s(e)||V(e.rightChild,s))};this.eraseElementByPos=function(e){if(e<0||e>=b)throw new Error("pos must more than 0 and less than set's size");var s=0;V(u,function(B){return e===s?(P(B),!0):(++s,!1)})},this.eraseElementByValue=function(e){if(!this.empty()){var s=N(u,e);s!==void 0&&s.key!==void 0&&J(s.key,e)===0&&P(s)}};var T=function(e,s){if(!e||e.key===void 0)throw new Error("unknown error");var B=J(s,e.key);return B<0?e.leftChild?T(e.leftChild,s):(e.leftChild=new t,e.leftChild.parent=e,e.leftChild.brother=e.rightChild,e.rightChild&&(e.rightChild.brother=e.leftChild),e.leftChild):B>0?e.rightChild?T(e.rightChild,s):(e.rightChild=new t,e.rightChild.parent=e,e.rightChild.brother=e.leftChild,e.leftChild&&(e.leftChild.brother=e.rightChild),e.rightChild):e},y=function(e){var s=e.parent;if(!s){if(e===u)return;throw new Error("unknown error")}if(s.color!==t.TreeNodeColorType.black&&s.color===t.TreeNodeColorType.red){var B=s.brother,D=s.parent;if(!D)throw new Error("unknown error");if(B&&B.color===t.TreeNodeColorType.red)B.color=s.color=t.TreeNodeColorType.black,D.color=t.TreeNodeColorType.red,y(D);else if(!B||B.color===t.TreeNodeColorType.black)if(s===D.leftChild)if(e===s.leftChild){s.color=t.TreeNodeColorType.black,D.color=t.TreeNodeColorType.red;var Y=D.rotateRight();D===u&&(u=Y)}else e===s.rightChild&&(Y=s.rotateLeft(),D===u&&(u=Y),y(s));else s===D.rightChild&&(e===s.leftChild?(Y=s.rotateRight(),D===u&&(u=Y),y(s)):e===s.rightChild&&(s.color=t.TreeNodeColorType.black,D.color=t.TreeNodeColorType.red,Y=D.rotateLeft(),D===u&&(u=Y)))}};this.insert=function(e){if(e==null)throw new Error("to avoid some unnecessary errors, we don't suggest you insert null or undefined here");if(this.empty())return++b,u.key=e,void(u.color=t.TreeNodeColorType.black);var s=T(u,e);s.key!==void 0&&J(s.key,e)===0||(++b,s.key=e,y(s),u.color=t.TreeNodeColorType.black)};var N=function(e,s){if(e&&e.key!==void 0){var B=J(s,e.key);return B<0?N(e.leftChild,s):B>0?N(e.rightChild,s):e}};this.find=function(e){var s=N(u,e);return s!==void 0&&s.key!==void 0&&J(s.key,e)===0};var q=function(e,s){if(e&&e.key!==void 0){var B=J(e.key,s);if(B===0)return e.key;if(B<0)return q(e.rightChild,s);var D=q(e.leftChild,s);return D!==void 0?D:e.key}};this.lowerBound=function(e){return q(u,e)};var p=function(e,s){if(e&&e.key!==void 0){if(J(e.key,s)<=0)return p(e.rightChild,s);var B=p(e.leftChild,s);return B!==void 0?B:e.key}};this.upperBound=function(e){return p(u,e)};var O=function(e,s){if(e&&e.key!==void 0){var B=J(e.key,s);if(B===0)return e.key;if(B>0)return O(e.leftChild,s);var D=O(e.rightChild,s);return D!==void 0?D:e.key}};this.reverseLowerBound=function(e){return O(u,e)};var L=function(e,s){if(e&&e.key!==void 0){if(J(e.key,s)>=0)return L(e.leftChild,s);var B=L(e.rightChild,s);return B!==void 0?B:e.key}};this.reverseUpperBound=function(e){return L(u,e)},this.union=function(e){var s=this;e.forEach(function(B){return s.insert(B)})},this.getHeight=function(){if(this.empty())return 0;var e=function(s){return s?Math.max(e(s.leftChild),e(s.rightChild))+1:1};return e(u)};var z=function(e){return function(s,B){var D,Y,K,A,R={label:0,sent:function(){if(1&K[0])throw K[1];return K[1]},trys:[],ops:[]};return A={next:r(0),throw:r(1),return:r(2)},typeof Symbol=="function"&&(A[Symbol.iterator]=function(){return this}),A;function r(o){return function(S){return function(j){if(D)throw new TypeError("Generator is already executing.");for(;R;)try{if(D=1,Y&&(K=2&j[0]?Y.return:j[0]?Y.throw||((K=Y.return)&&K.call(Y),0):Y.next)&&!(K=K.call(Y,j[1])).done)return K;switch(Y=0,K&&(j=[2&j[0],K.value]),j[0]){case 0:case 1:K=j;break;case 4:return R.label++,{value:j[1],done:!1};case 5:R.label++,Y=j[1],j=[0];continue;case 7:j=R.ops.pop(),R.trys.pop();continue;default:if(!((K=(K=R.trys).length>0&&K[K.length-1])||j[0]!==6&&j[0]!==2)){R=0;continue}if(j[0]===3&&(!K||j[1]>K[0]&&j[1]<K[3])){R.label=j[1];break}if(j[0]===6&&R.label<K[1]){R.label=K[1],K=j;break}if(K&&R.label<K[2]){R.label=K[2],R.ops.push(j);break}K[2]&&R.ops.pop(),R.trys.pop();continue}j=B.call(s,R)}catch(H){j=[6,H],Y=0}finally{D=K=0}if(5&j[0])throw j[1];return{value:j[0]?j[1]:void 0,done:!0}}([o,S])}}}(this,function(s){switch(s.label){case 0:return e&&e.key!==void 0?[5,d(z(e.leftChild))]:[2];case 1:return s.sent(),[4,e.key];case 2:return s.sent(),[5,d(z(e.rightChild))];case 3:return s.sent(),[2]}})};this[Symbol.iterator]=function(){return z(u)},G.forEach(function(e){return m.insert(e)}),Object.freeze(this)}Object.freeze(h);var E=h,k=function(G){var J=typeof Symbol=="function"&&Symbol.iterator,m=J&&G[J],b=0;if(m)return m.call(G);if(G&&typeof G.length=="number")return{next:function(){return G&&b>=G.length&&(G=void 0),{value:G&&G[b++],done:!G}}};throw new TypeError(J?"Object is not iterable.":"Symbol.iterator is not defined.")};function x(G,J){var m=this;G===void 0&&(G=[]),J=J||function(e,s){return e<s?-1:e>s?1:0};var b=0,u=new t;u.color=t.TreeNodeColorType.black,this.size=function(){return b},this.empty=function(){return b===0},this.clear=function(){b=0,u.key=u.value=void 0,u.leftChild=u.rightChild=u.brother=void 0};var M=function(e){if(!e||e.key===void 0)throw new Error("unknown error");return e.leftChild?M(e.leftChild):e},U=function(e){if(!e||e.key===void 0)throw new Error("unknown error");return e.rightChild?U(e.rightChild):e};this.front=function(){if(!this.empty()){var e=M(u);if(e.key===void 0||e.value===void 0)throw new Error("unknown error");return{key:e.key,value:e.value}}},this.back=function(){if(!this.empty()){var e=U(u);if(e.key===void 0||e.value===void 0)throw new Error("unknown error");return{key:e.key,value:e.value}}},this.forEach=function(e){var s,B,D=0;try{for(var Y=k(this),K=Y.next();!K.done;K=Y.next())e(K.value,D++)}catch(A){s={error:A}}finally{try{K&&!K.done&&(B=Y.return)&&B.call(Y)}finally{if(s)throw s.error}}},this.getElementByPos=function(e){var s,B;if(e<0||e>=this.size())throw new Error("pos must more than 0 and less than set's size");var D=0;try{for(var Y=k(this),K=Y.next();!K.done;K=Y.next()){var A=K.value;if(D===e)return A;++D}}catch(R){s={error:R}}finally{try{K&&!K.done&&(B=Y.return)&&B.call(Y)}finally{if(s)throw s.error}}throw new Error("unknown Error")};var F=function(e,s){if(e&&e.key!==void 0&&e.value!==void 0){var B=J(e.key,s);return B===0?{key:e.key,value:e.value}:B<0?F(e.rightChild,s):F(e.leftChild,s)||{key:e.key,value:e.value}}};this.lowerBound=function(e){return F(u,e)};var P=function(e,s){if(e&&e.key!==void 0&&e.value!==void 0)return J(e.key,s)<=0?P(e.rightChild,s):P(e.leftChild,s)||{key:e.key,value:e.value}};this.upperBound=function(e){return P(u,e)};var V=function(e,s){if(e&&e.key!==void 0&&e.value!==void 0){var B=J(e.key,s);return B===0?{key:e.key,value:e.value}:B>0?V(e.leftChild,s):V(e.rightChild,s)||{key:e.key,value:e.value}}};this.reverseLowerBound=function(e){return V(u,e)};var T=function(e,s){if(e&&e.key!==void 0&&e.value!==void 0)return J(e.key,s)>=0?T(e.leftChild,s):T(e.rightChild,s)||{key:e.key,value:e.value}};this.reverseUpperBound=function(e){return T(u,e)};var y=function(e){var s=e.parent;if(!s){if(e===u)return;throw new Error("unknown error")}if(e.color!==t.TreeNodeColorType.red){var B=e.brother;if(!B)throw new Error("unknown error");if(e===s.leftChild)if(B.color===t.TreeNodeColorType.red){B.color=t.TreeNodeColorType.black,s.color=t.TreeNodeColorType.red;var D=s.rotateLeft();u===s&&(u=D),y(e)}else B.color===t.TreeNodeColorType.black&&(B.rightChild&&B.rightChild.color===t.TreeNodeColorType.red?(B.color=s.color,s.color=t.TreeNodeColorType.black,B.rightChild&&(B.rightChild.color=t.TreeNodeColorType.black),D=s.rotateLeft(),u===s&&(u=D),e.color=t.TreeNodeColorType.black):B.rightChild&&B.rightChild.color!==t.TreeNodeColorType.black||!B.leftChild||B.leftChild.color!==t.TreeNodeColorType.red?B.leftChild&&B.leftChild.color!==t.TreeNodeColorType.black||B.rightChild&&B.rightChild.color!==t.TreeNodeColorType.black||(B.color=t.TreeNodeColorType.red,y(s)):(B.color=t.TreeNodeColorType.red,B.leftChild&&(B.leftChild.color=t.TreeNodeColorType.black),D=B.rotateRight(),u===B&&(u=D),y(e)));else e===s.rightChild&&(B.color===t.TreeNodeColorType.red?(B.color=t.TreeNodeColorType.black,s.color=t.TreeNodeColorType.red,D=s.rotateRight(),u===s&&(u=D),y(e)):B.color===t.TreeNodeColorType.black&&(B.leftChild&&B.leftChild.color===t.TreeNodeColorType.red?(B.color=s.color,s.color=t.TreeNodeColorType.black,B.leftChild&&(B.leftChild.color=t.TreeNodeColorType.black),D=s.rotateRight(),u===s&&(u=D),e.color=t.TreeNodeColorType.black):B.leftChild&&B.leftChild.color!==t.TreeNodeColorType.black||!B.rightChild||B.rightChild.color!==t.TreeNodeColorType.red?B.leftChild&&B.leftChild.color!==t.TreeNodeColorType.black||B.rightChild&&B.rightChild.color!==t.TreeNodeColorType.black||(B.color=t.TreeNodeColorType.red,y(s)):(B.color=t.TreeNodeColorType.red,B.rightChild&&(B.rightChild.color=t.TreeNodeColorType.black),D=B.rotateLeft(),u===B&&(u=D),y(e))))}else e.color=t.TreeNodeColorType.black},N=function(e){for(var s=e;s.leftChild||s.rightChild;){if(s.rightChild){s=M(s.rightChild);var B=e.key;e.key=s.key,s.key=B;var D=e.value;e.value=s.value,s.value=D,e=s}s.leftChild&&(s=U(s.leftChild),B=e.key,e.key=s.key,s.key=B,D=e.value,e.value=s.value,s.value=D,e=s)}y(s),s&&s.remove(),--b,u.color=t.TreeNodeColorType.black},q=function(e,s){return!(!e||e.key===void 0)&&(!!q(e.leftChild,s)||!!s(e)||q(e.rightChild,s))};this.eraseElementByPos=function(e){if(e<0||e>=b)throw new Error("pos must more than 0 and less than set's size");var s=0;q(u,function(B){return e===s?(N(B),!0):(++s,!1)})},this.eraseElementByKey=function(e){if(!this.empty()){var s=L(u,e);s!==void 0&&s.key!==void 0&&J(s.key,e)===0&&N(s)}};var p=function(e,s){if(!e||e.key===void 0)throw new Error("unknown error");var B=J(s,e.key);return B<0?e.leftChild?p(e.leftChild,s):(e.leftChild=new t,e.leftChild.parent=e,e.leftChild.brother=e.rightChild,e.rightChild&&(e.rightChild.brother=e.leftChild),e.leftChild):B>0?e.rightChild?p(e.rightChild,s):(e.rightChild=new t,e.rightChild.parent=e,e.rightChild.brother=e.leftChild,e.leftChild&&(e.leftChild.brother=e.rightChild),e.rightChild):e},O=function(e){var s=e.parent;if(!s){if(e===u)return;throw new Error("unknown error")}if(s.color!==t.TreeNodeColorType.black&&s.color===t.TreeNodeColorType.red){var B=s.brother,D=s.parent;if(!D)throw new Error("unknown error");if(B&&B.color===t.TreeNodeColorType.red)B.color=s.color=t.TreeNodeColorType.black,D.color=t.TreeNodeColorType.red,O(D);else if(!B||B.color===t.TreeNodeColorType.black)if(s===D.leftChild)if(e===s.leftChild){s.color=t.TreeNodeColorType.black,D.color=t.TreeNodeColorType.red;var Y=D.rotateRight();D===u&&(u=Y)}else e===s.rightChild&&(Y=s.rotateLeft(),D===u&&(u=Y),O(s));else s===D.rightChild&&(e===s.leftChild?(Y=s.rotateRight(),D===u&&(u=Y),O(s)):e===s.rightChild&&(s.color=t.TreeNodeColorType.black,D.color=t.TreeNodeColorType.red,Y=D.rotateLeft(),D===u&&(u=Y)))}};this.setElement=function(e,s){if(e==null)throw new Error("to avoid some unnecessary errors, we don't suggest you insert null or undefined here");if(s!=null){if(this.empty())return++b,u.key=e,u.value=s,void(u.color=t.TreeNodeColorType.black);var B=p(u,e);B.key===void 0||J(B.key,e)!==0?(++b,B.key=e,B.value=s,O(B),u.color=t.TreeNodeColorType.black):B.value=s}else this.eraseElementByKey(e)};var L=function(e,s){if(e&&e.key!==void 0){var B=J(s,e.key);return B<0?L(e.leftChild,s):B>0?L(e.rightChild,s):e}};this.find=function(e){return!!L(u,e)},this.getElementByKey=function(e){var s=L(u,e);if((s==null?void 0:s.key)===void 0||(s==null?void 0:s.value)===void 0)throw new Error("unknown error");return s.value},this.union=function(e){var s=this;e.forEach(function(B){var D=B.key,Y=B.value;return s.setElement(D,Y)})},this.getHeight=function(){if(this.empty())return 0;var e=function(s){return s?Math.max(e(s.leftChild),e(s.rightChild))+1:1};return e(u)};var z=function(e){return function(s,B){var D,Y,K,A,R={label:0,sent:function(){if(1&K[0])throw K[1];return K[1]},trys:[],ops:[]};return A={next:r(0),throw:r(1),return:r(2)},typeof Symbol=="function"&&(A[Symbol.iterator]=function(){return this}),A;function r(o){return function(S){return function(j){if(D)throw new TypeError("Generator is already executing.");for(;R;)try{if(D=1,Y&&(K=2&j[0]?Y.return:j[0]?Y.throw||((K=Y.return)&&K.call(Y),0):Y.next)&&!(K=K.call(Y,j[1])).done)return K;switch(Y=0,K&&(j=[2&j[0],K.value]),j[0]){case 0:case 1:K=j;break;case 4:return R.label++,{value:j[1],done:!1};case 5:R.label++,Y=j[1],j=[0];continue;case 7:j=R.ops.pop(),R.trys.pop();continue;default:if(!((K=(K=R.trys).length>0&&K[K.length-1])||j[0]!==6&&j[0]!==2)){R=0;continue}if(j[0]===3&&(!K||j[1]>K[0]&&j[1]<K[3])){R.label=j[1];break}if(j[0]===6&&R.label<K[1]){R.label=K[1],K=j;break}if(K&&R.label<K[2]){R.label=K[2],R.ops.push(j);break}K[2]&&R.ops.pop(),R.trys.pop();continue}j=B.call(s,R)}catch(H){j=[6,H],Y=0}finally{D=K=0}if(5&j[0])throw j[1];return{value:j[0]?j[1]:void 0,done:!0}}([o,S])}}}(this,function(s){switch(s.label){case 0:return e&&e.key!==void 0&&e.value!==void 0?[5,k(z(e.leftChild))]:[2];case 1:return s.sent(),[4,{key:e.key,value:e.value}];case 2:return s.sent(),[5,k(z(e.rightChild))];case 3:return s.sent(),[2]}})};this[Symbol.iterator]=function(){return z(u)},G.forEach(function(e){var s=e.key,B=e.value;return m.setElement(s,B)}),Object.freeze(this)}Object.freeze(x);var l=x;function g(G,J,m){var b=this;if(G===void 0&&(G=[]),J===void 0&&(J=g.initSize),m=m||function(P){var V=0,T="";if(typeof P=="number")V=((V=Math.floor(P))<<5)-V,V&=V;else{T=typeof P!="string"?JSON.stringify(P):P;for(var y=0;y<T.length;y++)V=(V<<5)-V+T.charCodeAt(y),V&=V}return V^V>>>16},(J&J-1)!=0)throw new Error("initBucketNum must be 2 to the power of n");var u=0,M=[],U=Math.max(g.initSize,Math.min(g.maxSize,J));this.size=function(){return u},this.empty=function(){return u===0},this.clear=function(){u=0,U=J,M=[]},this.forEach=function(P){var V=0;M.forEach(function(T){T.forEach(function(y){P(y,V++)})})};var F=function(P){if(!(P>=g.maxSize)){U=2*P;var V=[];M.forEach(function(T,y){if(!T.empty()){if(T instanceof I&&T.size()===1){var N=T.front();if(N===void 0)throw new Error("unknown error");V[m(N)&U-1]=new I([N])}else if(T instanceof E){var q=new I,p=new I;T.forEach(function(z){m(z)&P?p.pushBack(z):q.pushBack(z)}),q.size()>g.untreeifyThreshold?V[y]=new E(q):q.size()&&(V[y]=q),p.size()>g.untreeifyThreshold?V[y+P]=new E(p):p.size()&&(V[y+P]=p)}else{var O=new I,L=new I;T.forEach(function(z){m(z)&P?L.pushBack(z):O.pushBack(z)}),O.size()&&(V[y]=O),L.size()&&(V[y+P]=L)}M[y].clear()}}),M=V}};this.insert=function(P){if(P==null)throw new Error("to avoid some unnecessary errors, we don't suggest you insert null or undefined here");var V=m(P)&U-1;if(M[V]){var T=M[V].size();if(M[V]instanceof I){if(M[V].find(P))return;M[V].pushBack(P),M[V].size()>=g.treeifyThreshold&&(M[V]=new E(M[V]))}else M[V].insert(P);var y=M[V].size();u+=y-T}else M[V]=new I([P]),++u;u>U*g.sigma&&F.call(this,U)},this.eraseElementByValue=function(P){var V=m(P)&U-1;if(M[V]){var T=M[V].size();M[V].eraseElementByValue(P),M[V]instanceof E&&M[V].size()<=g.untreeifyThreshold&&(M[V]=new I(M[V]));var y=M[V].size();u+=y-T}},this.find=function(P){var V=m(P)&U-1;return!!M[V]&&M[V].find(P)},this[Symbol.iterator]=function(){return function(){var P,V,T,y,N,q;return function(p,O){var L,z,e,s,B={label:0,sent:function(){if(1&e[0])throw e[1];return e[1]},trys:[],ops:[]};return s={next:D(0),throw:D(1),return:D(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function D(Y){return function(K){return function(A){if(L)throw new TypeError("Generator is already executing.");for(;B;)try{if(L=1,z&&(e=2&A[0]?z.return:A[0]?z.throw||((e=z.return)&&e.call(z),0):z.next)&&!(e=e.call(z,A[1])).done)return e;switch(z=0,e&&(A=[2&A[0],e.value]),A[0]){case 0:case 1:e=A;break;case 4:return B.label++,{value:A[1],done:!1};case 5:B.label++,z=A[1],A=[0];continue;case 7:A=B.ops.pop(),B.trys.pop();continue;default:if(!((e=(e=B.trys).length>0&&e[e.length-1])||A[0]!==6&&A[0]!==2)){B=0;continue}if(A[0]===3&&(!e||A[1]>e[0]&&A[1]<e[3])){B.label=A[1];break}if(A[0]===6&&B.label<e[1]){B.label=e[1],e=A;break}if(e&&B.label<e[2]){B.label=e[2],B.ops.push(A);break}e[2]&&B.ops.pop(),B.trys.pop();continue}A=O.call(p,B)}catch(R){A=[6,R],z=0}finally{L=e=0}if(5&A[0])throw A[1];return{value:A[0]?A[1]:void 0,done:!0}}([Y,K])}}}(this,function(p){switch(p.label){case 0:P=0,p.label=1;case 1:if(!(P<U))return[3,10];for(;P<U&&!M[P];)++P;if(P>=U)return[3,10];p.label=2;case 2:p.trys.push([2,7,8,9]),N=void 0,V=function(O){var L=typeof Symbol=="function"&&Symbol.iterator,z=L&&O[L],e=0;if(z)return z.call(O);if(O&&typeof O.length=="number")return{next:function(){return O&&e>=O.length&&(O=void 0),{value:O&&O[e++],done:!O}}};throw new TypeError(L?"Object is not iterable.":"Symbol.iterator is not defined.")}(M[P]),T=V.next(),p.label=3;case 3:return T.done?[3,6]:[4,T.value];case 4:p.sent(),p.label=5;case 5:return T=V.next(),[3,3];case 6:return[3,9];case 7:return y=p.sent(),N={error:y},[3,9];case 8:try{T&&!T.done&&(q=V.return)&&q.call(V)}finally{if(N)throw N.error}return[7];case 9:return++P,[3,1];case 10:return[2]}})}()},G.forEach(function(P){return b.insert(P)}),Object.freeze(this)}g.initSize=16,g.maxSize=1073741824,g.sigma=.75,g.treeifyThreshold=8,g.untreeifyThreshold=6,g.minTreeifySize=64,Object.freeze(g);var w=function(G){var J=typeof Symbol=="function"&&Symbol.iterator,m=J&&G[J],b=0;if(m)return m.call(G);if(G&&typeof G.length=="number")return{next:function(){return G&&b>=G.length&&(G=void 0),{value:G&&G[b++],done:!G}}};throw new TypeError(J?"Object is not iterable.":"Symbol.iterator is not defined.")};function W(G,J,m){var b=this;if(G===void 0&&(G=[]),J===void 0&&(J=W.initSize),m=m||function(P){var V,T,y=0,N="";if(typeof P=="number")y=((y=Math.floor(P))<<5)-y,y&=y;else{N=typeof P!="string"?JSON.stringify(P):P;try{for(var q=w(N),p=q.next();!p.done;p=q.next())y=(y<<5)-y+p.value.charCodeAt(0),y&=y}catch(O){V={error:O}}finally{try{p&&!p.done&&(T=q.return)&&T.call(q)}finally{if(V)throw V.error}}}return y^y>>>16},(J&J-1)!=0)throw new Error("initBucketNum must be 2 to the power of n");var u=0,M=[],U=Math.max(W.initSize,Math.min(W.maxSize,J));this.size=function(){return u},this.empty=function(){return u===0},this.clear=function(){u=0,U=J,M=[]},this.forEach=function(P){var V=0;M.forEach(function(T){T.forEach(function(y){P(y,V++)})})};var F=function(P){if(!(P>=W.maxSize)){U=2*P;var V=[];M.forEach(function(T,y){if(!T.empty()){if(T instanceof I&&T.size()===1){var N=T.front(),q=N.key,p=N.value;V[m(q)&U-1]=new I([{key:q,value:p}])}else if(T instanceof l){var O=new I,L=new I;T.forEach(function(s){m(s.key)&P?L.pushBack(s):O.pushBack(s)}),O.size()>W.untreeifyThreshold?V[y]=new l(O):O.size()&&(V[y]=O),L.size()>W.untreeifyThreshold?V[y+P]=new l(L):L.size()&&(V[y+P]=L)}else{var z=new I,e=new I;T.forEach(function(s){m(s.key)&P?e.pushBack(s):z.pushBack(s)}),z.size()&&(V[y]=z),e.size()&&(V[y+P]=e)}M[y].clear()}}),M=V}};this.setElement=function(P,V){var T,y;if(P==null)throw new Error("to avoid some unnecessary errors, we don't suggest you insert null or undefined here");if(V!=null){var N=m(P)&U-1;if(M[N]){var q=M[N].size();if(M[N]instanceof I){try{for(var p=w(M[N]),O=p.next();!O.done;O=p.next()){var L=O.value;if(L.key===P)return void(L.value=V)}}catch(e){T={error:e}}finally{try{O&&!O.done&&(y=p.return)&&y.call(p)}finally{if(T)throw T.error}}M[N].pushBack({key:P,value:V}),M[N].size()>=W.treeifyThreshold&&(M[N]=new l(M[N]))}else M[N].setElement(P,V);var z=M[N].size();u+=z-q}else++u,M[N]=new I([{key:P,value:V}]);u>U*W.sigma&&F.call(this,U)}else this.eraseElementByKey(P)},this.getElementByKey=function(P){var V,T,y=m(P)&U-1;if(M[y]){if(M[y]instanceof l)return M[y].getElementByKey(P);try{for(var N=w(M[y]),q=N.next();!q.done;q=N.next()){var p=q.value;if(p.key===P)return p.value}}catch(O){V={error:O}}finally{try{q&&!q.done&&(T=N.return)&&T.call(N)}finally{if(V)throw V.error}}}},this.eraseElementByKey=function(P){var V,T,y=m(P)&U-1;if(M[y]){var N=M[y].size();if(M[y]instanceof l)M[y].eraseElementByKey(P),M[y].size()<=W.untreeifyThreshold&&(M[y]=new I(M[y]));else{var q=-1;try{for(var p=w(M[y]),O=p.next();!O.done;O=p.next()){var L=O.value;if(++q,L.key===P){M[y].eraseElementByPos(q);break}}}catch(e){V={error:e}}finally{try{O&&!O.done&&(T=p.return)&&T.call(p)}finally{if(V)throw V.error}}}var z=M[y].size();u+=z-N}},this.find=function(P){var V,T,y=m(P)&U-1;if(!M[y])return!1;if(M[y]instanceof l)return M[y].find(P);try{for(var N=w(M[y]),q=N.next();!q.done;q=N.next())if(q.value.key===P)return!0}catch(p){V={error:p}}finally{try{q&&!q.done&&(T=N.return)&&T.call(N)}finally{if(V)throw V.error}}return!1},this[Symbol.iterator]=function(){return function(){var P,V,T,y,N,q;return function(p,O){var L,z,e,s,B={label:0,sent:function(){if(1&e[0])throw e[1];return e[1]},trys:[],ops:[]};return s={next:D(0),throw:D(1),return:D(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function D(Y){return function(K){return function(A){if(L)throw new TypeError("Generator is already executing.");for(;B;)try{if(L=1,z&&(e=2&A[0]?z.return:A[0]?z.throw||((e=z.return)&&e.call(z),0):z.next)&&!(e=e.call(z,A[1])).done)return e;switch(z=0,e&&(A=[2&A[0],e.value]),A[0]){case 0:case 1:e=A;break;case 4:return B.label++,{value:A[1],done:!1};case 5:B.label++,z=A[1],A=[0];continue;case 7:A=B.ops.pop(),B.trys.pop();continue;default:if(!((e=(e=B.trys).length>0&&e[e.length-1])||A[0]!==6&&A[0]!==2)){B=0;continue}if(A[0]===3&&(!e||A[1]>e[0]&&A[1]<e[3])){B.label=A[1];break}if(A[0]===6&&B.label<e[1]){B.label=e[1],e=A;break}if(e&&B.label<e[2]){B.label=e[2],B.ops.push(A);break}e[2]&&B.ops.pop(),B.trys.pop();continue}A=O.call(p,B)}catch(R){A=[6,R],z=0}finally{L=e=0}if(5&A[0])throw A[1];return{value:A[0]?A[1]:void 0,done:!0}}([Y,K])}}}(this,function(p){switch(p.label){case 0:P=0,p.label=1;case 1:if(!(P<U))return[3,10];for(;P<U&&!M[P];)++P;if(P>=U)return[3,10];p.label=2;case 2:p.trys.push([2,7,8,9]),N=void 0,V=w(M[P]),T=V.next(),p.label=3;case 3:return T.done?[3,6]:[4,T.value];case 4:p.sent(),p.label=5;case 5:return T=V.next(),[3,3];case 6:return[3,9];case 7:return y=p.sent(),N={error:y},[3,9];case 8:try{T&&!T.done&&(q=V.return)&&q.call(V)}finally{if(N)throw N.error}return[7];case 9:return++P,[3,1];case 10:return[2]}})}()},G.forEach(function(P){var V=P.key,T=P.value;return b.setElement(V,T)}),Object.freeze(this)}W.initSize=16,W.maxSize=1073741824,W.sigma=.75,W.treeifyThreshold=8,W.untreeifyThreshold=6,W.minTreeifySize=64,Object.freeze(W)},9593:function(X,Q,C){const _=C(4411),f=Symbol("max"),I=Symbol("length"),a=Symbol("lengthCalculator"),n=Symbol("allowStale"),t=Symbol("maxAge"),d=Symbol("dispose"),h=Symbol("noDisposeOnSet"),E=Symbol("lruList"),k=Symbol("cache"),x=Symbol("updateAgeOnGet"),l=()=>1,g=(b,u,M)=>{const U=b[k].get(u);if(U){const F=U.value;if(w(b,F)){if(G(b,U),!b[n])return}else M&&(b[x]&&(U.value.now=Date.now()),b[E].unshiftNode(U));return F.value}},w=(b,u)=>{if(!u||!u.maxAge&&!b[t])return!1;const M=Date.now()-u.now;return u.maxAge?M>u.maxAge:b[t]&&M>b[t]},W=b=>{if(b[I]>b[f])for(let u=b[E].tail;b[I]>b[f]&&u!==null;){const M=u.prev;G(b,u),u=M}},G=(b,u)=>{if(u){const M=u.value;b[d]&&b[d](M.key,M.value),b[I]-=M.length,b[k].delete(M.key),b[E].removeNode(u)}};class J{constructor(u,M,U,F,P){this.key=u,this.value=M,this.length=U,this.now=F,this.maxAge=P||0}}const m=(b,u,M,U)=>{let F=M.value;w(b,F)&&(G(b,M),b[n]||(F=void 0)),F&&u.call(U,F.value,F.key,b)};X.exports=class{constructor(b){if(typeof b=="number"&&(b={max:b}),b||(b={}),b.max&&(typeof b.max!="number"||b.max<0))throw new TypeError("max must be a non-negative number");this[f]=b.max||1/0;const u=b.length||l;if(this[a]=typeof u!="function"?l:u,this[n]=b.stale||!1,b.maxAge&&typeof b.maxAge!="number")throw new TypeError("maxAge must be a number");this[t]=b.maxAge||0,this[d]=b.dispose,this[h]=b.noDisposeOnSet||!1,this[x]=b.updateAgeOnGet||!1,this.reset()}set max(b){if(typeof b!="number"||b<0)throw new TypeError("max must be a non-negative number");this[f]=b||1/0,W(this)}get max(){return this[f]}set allowStale(b){this[n]=!!b}get allowStale(){return this[n]}set maxAge(b){if(typeof b!="number")throw new TypeError("maxAge must be a non-negative number");this[t]=b,W(this)}get maxAge(){return this[t]}set lengthCalculator(b){typeof b!="function"&&(b=l),b!==this[a]&&(this[a]=b,this[I]=0,this[E].forEach(u=>{u.length=this[a](u.value,u.key),this[I]+=u.length})),W(this)}get lengthCalculator(){return this[a]}get length(){return this[I]}get itemCount(){return this[E].length}rforEach(b,u){u=u||this;for(let M=this[E].tail;M!==null;){const U=M.prev;m(this,b,M,u),M=U}}forEach(b,u){u=u||this;for(let M=this[E].head;M!==null;){const U=M.next;m(this,b,M,u),M=U}}keys(){return this[E].toArray().map(b=>b.key)}values(){return this[E].toArray().map(b=>b.value)}reset(){this[d]&&this[E]&&this[E].length&&this[E].forEach(b=>this[d](b.key,b.value)),this[k]=new Map,this[E]=new _,this[I]=0}dump(){return this[E].map(b=>!w(this,b)&&{k:b.key,v:b.value,e:b.now+(b.maxAge||0)}).toArray().filter(b=>b)}dumpLru(){return this[E]}set(b,u,M){if((M=M||this[t])&&typeof M!="number")throw new TypeError("maxAge must be a number");const U=M?Date.now():0,F=this[a](u,b);if(this[k].has(b)){if(F>this[f])return G(this,this[k].get(b)),!1;const V=this[k].get(b).value;return this[d]&&(this[h]||this[d](b,V.value)),V.now=U,V.maxAge=M,V.value=u,this[I]+=F-V.length,V.length=F,this.get(b),W(this),!0}const P=new J(b,u,F,U,M);return P.length>this[f]?(this[d]&&this[d](b,u),!1):(this[I]+=P.length,this[E].unshift(P),this[k].set(b,this[E].head),W(this),!0)}has(b){if(!this[k].has(b))return!1;const u=this[k].get(b).value;return!w(this,u)}get(b){return g(this,b,!0)}peek(b){return g(this,b,!1)}pop(){const b=this[E].tail;return b?(G(this,b),b.value):null}del(b){G(this,this[k].get(b))}load(b){this.reset();const u=Date.now();for(let M=b.length-1;M>=0;M--){const U=b[M],F=U.e||0;if(F===0)this.set(U.k,U.v);else{const P=F-u;P>0&&this.set(U.k,U.v,P)}}}prune(){this[k].forEach((b,u)=>g(this,u,!1))}}},9990:function(X,Q,C){var _=C(8764).Buffer;const f=X.exports;f.types={0:"reserved",1:"connect",2:"connack",3:"publish",4:"puback",5:"pubrec",6:"pubrel",7:"pubcomp",8:"subscribe",9:"suback",10:"unsubscribe",11:"unsuback",12:"pingreq",13:"pingresp",14:"disconnect",15:"auth"},f.codes={};for(const a in f.types){const n=f.types[a];f.codes[n]=a}f.CMD_SHIFT=4,f.CMD_MASK=240,f.DUP_MASK=8,f.QOS_MASK=3,f.QOS_SHIFT=1,f.RETAIN_MASK=1,f.VARBYTEINT_MASK=127,f.VARBYTEINT_FIN_MASK=128,f.VARBYTEINT_MAX=268435455,f.SESSIONPRESENT_MASK=1,f.SESSIONPRESENT_HEADER=_.from([f.SESSIONPRESENT_MASK]),f.CONNACK_HEADER=_.from([f.codes.connack<<f.CMD_SHIFT]),f.USERNAME_MASK=128,f.PASSWORD_MASK=64,f.WILL_RETAIN_MASK=32,f.WILL_QOS_MASK=24,f.WILL_QOS_SHIFT=3,f.WILL_FLAG_MASK=4,f.CLEAN_SESSION_MASK=2,f.CONNECT_HEADER=_.from([f.codes.connect<<f.CMD_SHIFT]),f.properties={sessionExpiryInterval:17,willDelayInterval:24,receiveMaximum:33,maximumPacketSize:39,topicAliasMaximum:34,requestResponseInformation:25,requestProblemInformation:23,userProperties:38,authenticationMethod:21,authenticationData:22,payloadFormatIndicator:1,messageExpiryInterval:2,contentType:3,responseTopic:8,correlationData:9,maximumQoS:36,retainAvailable:37,assignedClientIdentifier:18,reasonString:31,wildcardSubscriptionAvailable:40,subscriptionIdentifiersAvailable:41,sharedSubscriptionAvailable:42,serverKeepAlive:19,responseInformation:26,serverReference:28,topicAlias:35,subscriptionIdentifier:11},f.propertiesCodes={};for(const a in f.properties){const n=f.properties[a];f.propertiesCodes[n]=a}function I(a){return[0,1,2].map(n=>[0,1].map(t=>[0,1].map(d=>{const h=_.alloc(1);return h.writeUInt8(f.codes[a]<<f.CMD_SHIFT|(t?f.DUP_MASK:0)|n<<f.QOS_SHIFT|d,0,!0),h})))}f.propertiesTypes={sessionExpiryInterval:"int32",willDelayInterval:"int32",receiveMaximum:"int16",maximumPacketSize:"int32",topicAliasMaximum:"int16",requestResponseInformation:"byte",requestProblemInformation:"byte",userProperties:"pair",authenticationMethod:"string",authenticationData:"binary",payloadFormatIndicator:"byte",messageExpiryInterval:"int32",contentType:"string",responseTopic:"string",correlationData:"binary",maximumQoS:"int8",retainAvailable:"byte",assignedClientIdentifier:"string",reasonString:"string",wildcardSubscriptionAvailable:"byte",subscriptionIdentifiersAvailable:"byte",sharedSubscriptionAvailable:"byte",serverKeepAlive:"int16",responseInformation:"string",serverReference:"string",topicAlias:"int16",subscriptionIdentifier:"var"},f.PUBLISH_HEADER=I("publish"),f.SUBSCRIBE_HEADER=I("subscribe"),f.SUBSCRIBE_OPTIONS_QOS_MASK=3,f.SUBSCRIBE_OPTIONS_NL_MASK=1,f.SUBSCRIBE_OPTIONS_NL_SHIFT=2,f.SUBSCRIBE_OPTIONS_RAP_MASK=1,f.SUBSCRIBE_OPTIONS_RAP_SHIFT=3,f.SUBSCRIBE_OPTIONS_RH_MASK=3,f.SUBSCRIBE_OPTIONS_RH_SHIFT=4,f.SUBSCRIBE_OPTIONS_RH=[0,16,32],f.SUBSCRIBE_OPTIONS_NL=4,f.SUBSCRIBE_OPTIONS_RAP=8,f.SUBSCRIBE_OPTIONS_QOS=[0,1,2],f.UNSUBSCRIBE_HEADER=I("unsubscribe"),f.ACKS={unsuback:I("unsuback"),puback:I("puback"),pubcomp:I("pubcomp"),pubrel:I("pubrel"),pubrec:I("pubrec")},f.SUBACK_HEADER=_.from([f.codes.suback<<f.CMD_SHIFT]),f.VERSION3=_.from([3]),f.VERSION4=_.from([4]),f.VERSION5=_.from([5]),f.VERSION131=_.from([131]),f.VERSION132=_.from([132]),f.QOS=[0,1,2].map(a=>_.from([a])),f.EMPTY={pingreq:_.from([f.codes.pingreq<<4,0]),pingresp:_.from([f.codes.pingresp<<4,0]),disconnect:_.from([f.codes.disconnect<<4,0])}},7721:function(X,Q,C){var _=C(8764).Buffer;const f=C(9371),I=C(7187);class a extends I{constructor(){super(),this._array=new Array(20),this._i=0}write(t){return this._array[this._i++]=t,!0}concat(){let t=0;const d=new Array(this._array.length),h=this._array;let E,k=0;for(E=0;E<h.length&&h[E]!==void 0;E++)typeof h[E]!="string"?d[E]=h[E].length:d[E]=_.byteLength(h[E]),t+=d[E];const x=_.allocUnsafe(t);for(E=0;E<h.length&&h[E]!==void 0;E++)typeof h[E]!="string"?(h[E].copy(x,k),k+=d[E]):(x.write(h[E],k),k+=d[E]);return x}}X.exports=function(n,t){const d=new a;return f(n,d,t),d.concat()}},1772:function(X,Q,C){Q.parser=C(5322).parser,Q.generate=C(7721),Q.writeToStream=C(9371)},3903:function(X,Q,C){var _=C(8764).Buffer;const f={},I=_.isBuffer(_.from([1,2]).subarray(0,1));function a(n){const t=_.allocUnsafe(2);return t.writeUInt8(n>>8,0),t.writeUInt8(255&n,1),t}X.exports={cache:f,generateCache:function(){for(let n=0;n<65536;n++)f[n]=a(n)},generateNumber:a,genBufVariableByteInt:function(n){let t=0,d=0;const h=_.allocUnsafe(4);do t=n%128|0,(n=n/128|0)>0&&(t|=128),h.writeUInt8(t,d++);while(n>0&&d<4);return n>0&&(d=0),I?h.subarray(0,d):h.slice(0,d)},generate4ByteBuffer:function(n){const t=_.allocUnsafe(4);return t.writeUInt32BE(n,0),t}}},9695:function(X){X.exports=class{constructor(){this.cmd=null,this.retain=!1,this.qos=0,this.dup=!1,this.length=-1,this.topic=null,this.payload=null}}},5322:function(X,Q,C){const _=C(22),f=C(7187),I=C(9695),a=C(9990),n=C(1227)("mqtt-packet:parser");class t extends f{constructor(){super(),this.parser=this.constructor.parser}static parser(h){return this instanceof t?(this.settings=h||{},this._states=["_parseHeader","_parseLength","_parsePayload","_newPacket"],this._resetState(),this):new t().parser(h)}_resetState(){n("_resetState: resetting packet, error, _list, and _stateCounter"),this.packet=new I,this.error=null,this._list=_(),this._stateCounter=0}parse(h){for(this.error&&this._resetState(),this._list.append(h),n("parse: current state: %s",this._states[this._stateCounter]);(this.packet.length!==-1||this._list.length>0)&&this[this._states[this._stateCounter]]()&&!this.error;)this._stateCounter++,n("parse: state complete. _stateCounter is now: %d",this._stateCounter),n("parse: packet.length: %d, buffer list length: %d",this.packet.length,this._list.length),this._stateCounter>=this._states.length&&(this._stateCounter=0);return n("parse: exited while loop. packet: %d, buffer list length: %d",this.packet.length,this._list.length),this._list.length}_parseHeader(){const h=this._list.readUInt8(0);return this.packet.cmd=a.types[h>>a.CMD_SHIFT],this.packet.retain=(h&a.RETAIN_MASK)!=0,this.packet.qos=h>>a.QOS_SHIFT&a.QOS_MASK,this.packet.dup=(h&a.DUP_MASK)!=0,n("_parseHeader: packet: %o",this.packet),this._list.consume(1),!0}_parseLength(){const h=this._parseVarByteNum(!0);return h&&(this.packet.length=h.value,this._list.consume(h.bytes)),n("_parseLength %d",h.value),!!h}_parsePayload(){n("_parsePayload: payload %O",this._list);let h=!1;if(this.packet.length===0||this._list.length>=this.packet.length){switch(this._pos=0,this.packet.cmd){case"connect":this._parseConnect();break;case"connack":this._parseConnack();break;case"publish":this._parsePublish();break;case"puback":case"pubrec":case"pubrel":case"pubcomp":this._parseConfirmation();break;case"subscribe":this._parseSubscribe();break;case"suback":this._parseSuback();break;case"unsubscribe":this._parseUnsubscribe();break;case"unsuback":this._parseUnsuback();break;case"pingreq":case"pingresp":break;case"disconnect":this._parseDisconnect();break;case"auth":this._parseAuth();break;default:this._emitError(new Error("Not supported"))}h=!0}return n("_parsePayload complete result: %s",h),h}_parseConnect(){let h,E,k,x;n("_parseConnect");const l={},g=this.packet,w=this._parseString();if(w===null)return this._emitError(new Error("Cannot parse protocolId"));if(w!=="MQTT"&&w!=="MQIsdp")return this._emitError(new Error("Invalid protocolId"));if(g.protocolId=w,this._pos>=this._list.length)return this._emitError(new Error("Packet too short"));if(g.protocolVersion=this._list.readUInt8(this._pos),g.protocolVersion>=128&&(g.bridgeMode=!0,g.protocolVersion=g.protocolVersion-128),g.protocolVersion!==3&&g.protocolVersion!==4&&g.protocolVersion!==5)return this._emitError(new Error("Invalid protocol version"));if(this._pos++,this._pos>=this._list.length)return this._emitError(new Error("Packet too short"));if(l.username=this._list.readUInt8(this._pos)&a.USERNAME_MASK,l.password=this._list.readUInt8(this._pos)&a.PASSWORD_MASK,l.will=this._list.readUInt8(this._pos)&a.WILL_FLAG_MASK,l.will&&(g.will={},g.will.retain=(this._list.readUInt8(this._pos)&a.WILL_RETAIN_MASK)!=0,g.will.qos=(this._list.readUInt8(this._pos)&a.WILL_QOS_MASK)>>a.WILL_QOS_SHIFT),g.clean=(this._list.readUInt8(this._pos)&a.CLEAN_SESSION_MASK)!=0,this._pos++,g.keepalive=this._parseNum(),g.keepalive===-1)return this._emitError(new Error("Packet too short"));if(g.protocolVersion===5){const G=this._parseProperties();Object.getOwnPropertyNames(G).length&&(g.properties=G)}const W=this._parseString();if(W===null)return this._emitError(new Error("Packet too short"));if(g.clientId=W,n("_parseConnect: packet.clientId: %s",g.clientId),l.will){if(g.protocolVersion===5){const G=this._parseProperties();Object.getOwnPropertyNames(G).length&&(g.will.properties=G)}if(h=this._parseString(),h===null)return this._emitError(new Error("Cannot parse will topic"));if(g.will.topic=h,n("_parseConnect: packet.will.topic: %s",g.will.topic),E=this._parseBuffer(),E===null)return this._emitError(new Error("Cannot parse will payload"));g.will.payload=E,n("_parseConnect: packet.will.paylaod: %s",g.will.payload)}if(l.username){if(x=this._parseString(),x===null)return this._emitError(new Error("Cannot parse username"));g.username=x,n("_parseConnect: packet.username: %s",g.username)}if(l.password){if(k=this._parseBuffer(),k===null)return this._emitError(new Error("Cannot parse password"));g.password=k}return this.settings=g,n("_parseConnect: complete"),g}_parseConnack(){n("_parseConnack");const h=this.packet;if(this._list.length<1)return null;if(h.sessionPresent=!!(this._list.readUInt8(this._pos++)&a.SESSIONPRESENT_MASK),this.settings.protocolVersion===5)this._list.length>=2?h.reasonCode=this._list.readUInt8(this._pos++):h.reasonCode=0;else{if(this._list.length<2)return null;h.returnCode=this._list.readUInt8(this._pos++)}if(h.returnCode===-1||h.reasonCode===-1)return this._emitError(new Error("Cannot parse return code"));if(this.settings.protocolVersion===5){const E=this._parseProperties();Object.getOwnPropertyNames(E).length&&(h.properties=E)}n("_parseConnack: complete")}_parsePublish(){n("_parsePublish");const h=this.packet;if(h.topic=this._parseString(),h.topic===null)return this._emitError(new Error("Cannot parse topic"));if(!(h.qos>0)||this._parseMessageId()){if(this.settings.protocolVersion===5){const E=this._parseProperties();Object.getOwnPropertyNames(E).length&&(h.properties=E)}h.payload=this._list.slice(this._pos,h.length),n("_parsePublish: payload from buffer list: %o",h.payload)}}_parseSubscribe(){n("_parseSubscribe");const h=this.packet;let E,k,x,l,g,w,W;if(h.qos!==1)return this._emitError(new Error("Wrong subscribe header"));if(h.subscriptions=[],this._parseMessageId()){if(this.settings.protocolVersion===5){const G=this._parseProperties();Object.getOwnPropertyNames(G).length&&(h.properties=G)}for(;this._pos<h.length;){if(E=this._parseString(),E===null)return this._emitError(new Error("Cannot parse topic"));if(this._pos>=h.length)return this._emitError(new Error("Malformed Subscribe Payload"));k=this._parseByte(),x=k&a.SUBSCRIBE_OPTIONS_QOS_MASK,w=(k>>a.SUBSCRIBE_OPTIONS_NL_SHIFT&a.SUBSCRIBE_OPTIONS_NL_MASK)!=0,g=(k>>a.SUBSCRIBE_OPTIONS_RAP_SHIFT&a.SUBSCRIBE_OPTIONS_RAP_MASK)!=0,l=k>>a.SUBSCRIBE_OPTIONS_RH_SHIFT&a.SUBSCRIBE_OPTIONS_RH_MASK,W={topic:E,qos:x},this.settings.protocolVersion===5?(W.nl=w,W.rap=g,W.rh=l):this.settings.bridgeMode&&(W.rh=0,W.rap=!0,W.nl=!0),n("_parseSubscribe: push subscription `%s` to subscription",W),h.subscriptions.push(W)}}}_parseSuback(){n("_parseSuback");const h=this.packet;if(this.packet.granted=[],this._parseMessageId()){if(this.settings.protocolVersion===5){const E=this._parseProperties();Object.getOwnPropertyNames(E).length&&(h.properties=E)}for(;this._pos<this.packet.length;)this.packet.granted.push(this._list.readUInt8(this._pos++))}}_parseUnsubscribe(){n("_parseUnsubscribe");const h=this.packet;if(h.unsubscriptions=[],this._parseMessageId()){if(this.settings.protocolVersion===5){const E=this._parseProperties();Object.getOwnPropertyNames(E).length&&(h.properties=E)}for(;this._pos<h.length;){const E=this._parseString();if(E===null)return this._emitError(new Error("Cannot parse topic"));n("_parseUnsubscribe: push topic `%s` to unsubscriptions",E),h.unsubscriptions.push(E)}}}_parseUnsuback(){n("_parseUnsuback");const h=this.packet;if(!this._parseMessageId())return this._emitError(new Error("Cannot parse messageId"));if(this.settings.protocolVersion===5){const E=this._parseProperties();for(Object.getOwnPropertyNames(E).length&&(h.properties=E),h.granted=[];this._pos<this.packet.length;)this.packet.granted.push(this._list.readUInt8(this._pos++))}}_parseConfirmation(){n("_parseConfirmation: packet.cmd: `%s`",this.packet.cmd);const h=this.packet;if(this._parseMessageId(),this.settings.protocolVersion===5&&(h.length>2?(h.reasonCode=this._parseByte(),n("_parseConfirmation: packet.reasonCode `%d`",h.reasonCode)):h.reasonCode=0,h.length>3)){const E=this._parseProperties();Object.getOwnPropertyNames(E).length&&(h.properties=E)}return!0}_parseDisconnect(){const h=this.packet;if(n("_parseDisconnect"),this.settings.protocolVersion===5){this._list.length>0?h.reasonCode=this._parseByte():h.reasonCode=0;const E=this._parseProperties();Object.getOwnPropertyNames(E).length&&(h.properties=E)}return n("_parseDisconnect result: true"),!0}_parseAuth(){n("_parseAuth");const h=this.packet;if(this.settings.protocolVersion!==5)return this._emitError(new Error("Not supported auth packet for this version MQTT"));h.reasonCode=this._parseByte();const E=this._parseProperties();return Object.getOwnPropertyNames(E).length&&(h.properties=E),n("_parseAuth: result: true"),!0}_parseMessageId(){const h=this.packet;return h.messageId=this._parseNum(),h.messageId===null?(this._emitError(new Error("Cannot parse messageId")),!1):(n("_parseMessageId: packet.messageId %d",h.messageId),!0)}_parseString(h){const E=this._parseNum(),k=E+this._pos;if(E===-1||k>this._list.length||k>this.packet.length)return null;const x=this._list.toString("utf8",this._pos,k);return this._pos+=E,n("_parseString: result: %s",x),x}_parseStringPair(){return n("_parseStringPair"),{name:this._parseString(),value:this._parseString()}}_parseBuffer(){const h=this._parseNum(),E=h+this._pos;if(h===-1||E>this._list.length||E>this.packet.length)return null;const k=this._list.slice(this._pos,E);return this._pos+=h,n("_parseBuffer: result: %o",k),k}_parseNum(){if(this._list.length-this._pos<2)return-1;const h=this._list.readUInt16BE(this._pos);return this._pos+=2,n("_parseNum: result: %s",h),h}_parse4ByteNum(){if(this._list.length-this._pos<4)return-1;const h=this._list.readUInt32BE(this._pos);return this._pos+=4,n("_parse4ByteNum: result: %s",h),h}_parseVarByteNum(h){n("_parseVarByteNum");let E,k=0,x=1,l=0,g=!1;const w=this._pos?this._pos:0;for(;k<4&&w+k<this._list.length;){if(E=this._list.readUInt8(w+k++),l+=x*(E&a.VARBYTEINT_MASK),x*=128,(E&a.VARBYTEINT_FIN_MASK)==0){g=!0;break}if(this._list.length<=k)break}return!g&&k===4&&this._list.length>=k&&this._emitError(new Error("Invalid variable byte integer")),w&&(this._pos+=k),g=!!g&&(h?{bytes:k,value:l}:l),n("_parseVarByteNum: result: %o",g),g}_parseByte(){let h;return this._pos<this._list.length&&(h=this._list.readUInt8(this._pos),this._pos++),n("_parseByte: result: %o",h),h}_parseByType(h){switch(n("_parseByType: type: %s",h),h){case"byte":return this._parseByte()!==0;case"int8":return this._parseByte();case"int16":return this._parseNum();case"int32":return this._parse4ByteNum();case"var":return this._parseVarByteNum();case"string":return this._parseString();case"pair":return this._parseStringPair();case"binary":return this._parseBuffer()}}_parseProperties(){n("_parseProperties");const h=this._parseVarByteNum(),E=this._pos+h,k={};for(;this._pos<E;){const x=this._parseByte();if(!x)return this._emitError(new Error("Cannot parse property code type")),!1;const l=a.propertiesCodes[x];if(!l)return this._emitError(new Error("Unknown property")),!1;if(l!=="userProperties")k[l]?(Array.isArray(k[l])||(k[l]=[k[l]]),k[l].push(this._parseByType(a.propertiesTypes[l]))):k[l]=this._parseByType(a.propertiesTypes[l]);else{k[l]||(k[l]=Object.create(null));const g=this._parseByType(a.propertiesTypes[l]);if(k[l][g.name])if(Array.isArray(k[l][g.name]))k[l][g.name].push(g.value);else{const w=k[l][g.name];k[l][g.name]=[w],k[l][g.name].push(g.value)}else k[l][g.name]=g.value}}return k}_newPacket(){return n("_newPacket"),this.packet&&(this._list.consume(this.packet.length),n("_newPacket: parser emit packet: packet.cmd: %s, packet.payload: %s, packet.length: %d",this.packet.cmd,this.packet.payload,this.packet.length),this.emit("packet",this.packet)),n("_newPacket: new packet"),this.packet=new I,this._pos=0,!0}_emitError(h){n("_emitError"),this.error=h,this.emit("error",h)}}X.exports=t},9371:function(X,Q,C){var _=C(8764).Buffer;const f=C(9990),I=_.allocUnsafe(0),a=_.from([0]),n=C(3903),t=C(8212).nextTick,d=C(1227)("mqtt-packet:writeToStream"),h=n.cache,E=n.generateNumber,k=n.generateCache,x=n.genBufVariableByteInt,l=n.generate4ByteBuffer;let g=M,w=!0;function W(p,O,L){switch(d("generate called"),O.cork&&(O.cork(),t(G,O)),w&&(w=!1,k()),d("generate: packet.cmd: %s",p.cmd),p.cmd){case"connect":return function(z,e,s){const B=z||{},D=B.protocolId||"MQTT";let Y=B.protocolVersion||4;const K=B.will;let A=B.clean;const R=B.keepalive||0,r=B.clientId||"",o=B.username,S=B.password,j=B.properties;A===void 0&&(A=!0);let H=0;if(!D||typeof D!="string"&&!_.isBuffer(D))return e.emit("error",new Error("Invalid protocolId")),!1;if(H+=D.length+2,Y!==3&&Y!==4&&Y!==5)return e.emit("error",new Error("Invalid protocol version")),!1;if(H+=1,(typeof r=="string"||_.isBuffer(r))&&(r||Y>=4)&&(r||A))H+=_.byteLength(r)+2;else{if(Y<4)return e.emit("error",new Error("clientId must be supplied before 3.1.1")),!1;if(1*A==0)return e.emit("error",new Error("clientId must be given if cleanSession set to 0")),!1}if(typeof R!="number"||R<0||R>65535||R%1!=0)return e.emit("error",new Error("Invalid keepalive")),!1;if(H+=2,H+=1,Y===5){var tt=P(e,j);if(!tt)return!1;H+=tt.length}if(K){if(typeof K!="object")return e.emit("error",new Error("Invalid will")),!1;if(!K.topic||typeof K.topic!="string")return e.emit("error",new Error("Invalid will topic")),!1;if(H+=_.byteLength(K.topic)+2,H+=2,K.payload){if(!(K.payload.length>=0))return e.emit("error",new Error("Invalid will payload")),!1;typeof K.payload=="string"?H+=_.byteLength(K.payload):H+=K.payload.length}var rt={};if(Y===5){if(!(rt=P(e,K.properties)))return!1;H+=rt.length}}let it=!1;if(o!=null){if(!q(o))return e.emit("error",new Error("Invalid username")),!1;it=!0,H+=_.byteLength(o)+2}if(S!=null){if(!it)return e.emit("error",new Error("Username is required to use password")),!1;if(!q(S))return e.emit("error",new Error("Invalid password")),!1;H+=N(S)+2}e.write(f.CONNECT_HEADER),m(e,H),F(e,D),B.bridgeMode&&(Y+=128),e.write(Y===131?f.VERSION131:Y===132?f.VERSION132:Y===4?f.VERSION4:Y===5?f.VERSION5:f.VERSION3);let ot=0;return ot|=o!=null?f.USERNAME_MASK:0,ot|=S!=null?f.PASSWORD_MASK:0,ot|=K&&K.retain?f.WILL_RETAIN_MASK:0,ot|=K&&K.qos?K.qos<<f.WILL_QOS_SHIFT:0,ot|=K?f.WILL_FLAG_MASK:0,ot|=A?f.CLEAN_SESSION_MASK:0,e.write(_.from([ot])),g(e,R),Y===5&&tt.write(),F(e,r),K&&(Y===5&&rt.write(),b(e,K.topic),F(e,K.payload)),o!=null&&F(e,o),S!=null&&F(e,S),!0}(p,O);case"connack":return function(z,e,s){const B=s?s.protocolVersion:4,D=z||{},Y=B===5?D.reasonCode:D.returnCode,K=D.properties;let A=2;if(typeof Y!="number")return e.emit("error",new Error("Invalid return code")),!1;let R=null;if(B===5){if(R=P(e,K),!R)return!1;A+=R.length}return e.write(f.CONNACK_HEADER),m(e,A),e.write(D.sessionPresent?f.SESSIONPRESENT_HEADER:a),e.write(_.from([Y])),R!=null&&R.write(),!0}(p,O,L);case"publish":return function(z,e,s){d("publish: packet: %o",z);const B=s?s.protocolVersion:4,D=z||{},Y=D.qos||0,K=D.retain?f.RETAIN_MASK:0,A=D.topic,R=D.payload||I,r=D.messageId,o=D.properties;let S=0;if(typeof A=="string")S+=_.byteLength(A)+2;else{if(!_.isBuffer(A))return e.emit("error",new Error("Invalid topic")),!1;S+=A.length+2}if(_.isBuffer(R)?S+=R.length:S+=_.byteLength(R),Y&&typeof r!="number")return e.emit("error",new Error("Invalid messageId")),!1;Y&&(S+=2);let j=null;if(B===5){if(j=P(e,o),!j)return!1;S+=j.length}return e.write(f.PUBLISH_HEADER[Y][D.dup?1:0][K?1:0]),m(e,S),g(e,N(A)),e.write(A),Y>0&&g(e,r),j!=null&&j.write(),d("publish: payload: %o",R),e.write(R)}(p,O,L);case"puback":case"pubrec":case"pubrel":case"pubcomp":return function(z,e,s){const B=s?s.protocolVersion:4,D=z||{},Y=D.cmd||"puback",K=D.messageId,A=D.dup&&Y==="pubrel"?f.DUP_MASK:0;let R=0;const r=D.reasonCode,o=D.properties;let S=B===5?3:2;if(Y==="pubrel"&&(R=1),typeof K!="number")return e.emit("error",new Error("Invalid messageId")),!1;let j=null;if(B===5&&typeof o=="object"){if(j=V(e,o,s,S),!j)return!1;S+=j.length}return e.write(f.ACKS[Y][R][A][0]),m(e,S),g(e,K),B===5&&e.write(_.from([r])),j!==null&&j.write(),!0}(p,O,L);case"subscribe":return function(z,e,s){d("subscribe: packet: ");const B=s?s.protocolVersion:4,D=z||{},Y=D.dup?f.DUP_MASK:0,K=D.messageId,A=D.subscriptions,R=D.properties;let r=0;if(typeof K!="number")return e.emit("error",new Error("Invalid messageId")),!1;r+=2;let o=null;if(B===5){if(o=P(e,R),!o)return!1;r+=o.length}if(typeof A!="object"||!A.length)return e.emit("error",new Error("Invalid subscriptions")),!1;for(let j=0;j<A.length;j+=1){const H=A[j].topic,tt=A[j].qos;if(typeof H!="string")return e.emit("error",new Error("Invalid subscriptions - invalid topic")),!1;if(typeof tt!="number")return e.emit("error",new Error("Invalid subscriptions - invalid qos")),!1;if(B===5){if(typeof(A[j].nl||!1)!="boolean")return e.emit("error",new Error("Invalid subscriptions - invalid No Local")),!1;if(typeof(A[j].rap||!1)!="boolean")return e.emit("error",new Error("Invalid subscriptions - invalid Retain as Published")),!1;const rt=A[j].rh||0;if(typeof rt!="number"||rt>2)return e.emit("error",new Error("Invalid subscriptions - invalid Retain Handling")),!1}r+=_.byteLength(H)+2+1}d("subscribe: writing to stream: %o",f.SUBSCRIBE_HEADER),e.write(f.SUBSCRIBE_HEADER[1][Y?1:0][0]),m(e,r),g(e,K),o!==null&&o.write();let S=!0;for(const j of A){const H=j.topic,tt=j.qos,rt=+j.nl,it=+j.rap,ot=j.rh;let at;b(e,H),at=f.SUBSCRIBE_OPTIONS_QOS[tt],B===5&&(at|=rt?f.SUBSCRIBE_OPTIONS_NL:0,at|=it?f.SUBSCRIBE_OPTIONS_RAP:0,at|=ot?f.SUBSCRIBE_OPTIONS_RH[ot]:0),S=e.write(_.from([at]))}return S}(p,O,L);case"suback":return function(z,e,s){const B=s?s.protocolVersion:4,D=z||{},Y=D.messageId,K=D.granted,A=D.properties;let R=0;if(typeof Y!="number")return e.emit("error",new Error("Invalid messageId")),!1;if(R+=2,typeof K!="object"||!K.length)return e.emit("error",new Error("Invalid qos vector")),!1;for(let o=0;o<K.length;o+=1){if(typeof K[o]!="number")return e.emit("error",new Error("Invalid qos vector")),!1;R+=1}let r=null;if(B===5){if(r=V(e,A,s,R),!r)return!1;R+=r.length}return e.write(f.SUBACK_HEADER),m(e,R),g(e,Y),r!==null&&r.write(),e.write(_.from(K))}(p,O,L);case"unsubscribe":return function(z,e,s){const B=s?s.protocolVersion:4,D=z||{},Y=D.messageId,K=D.dup?f.DUP_MASK:0,A=D.unsubscriptions,R=D.properties;let r=0;if(typeof Y!="number")return e.emit("error",new Error("Invalid messageId")),!1;if(r+=2,typeof A!="object"||!A.length)return e.emit("error",new Error("Invalid unsubscriptions")),!1;for(let j=0;j<A.length;j+=1){if(typeof A[j]!="string")return e.emit("error",new Error("Invalid unsubscriptions")),!1;r+=_.byteLength(A[j])+2}let o=null;if(B===5){if(o=P(e,R),!o)return!1;r+=o.length}e.write(f.UNSUBSCRIBE_HEADER[1][K?1:0][0]),m(e,r),g(e,Y),o!==null&&o.write();let S=!0;for(let j=0;j<A.length;j++)S=b(e,A[j]);return S}(p,O,L);case"unsuback":return function(z,e,s){const B=s?s.protocolVersion:4,D=z||{},Y=D.messageId,K=D.dup?f.DUP_MASK:0,A=D.granted,R=D.properties,r=D.cmd;let o=2;if(typeof Y!="number")return e.emit("error",new Error("Invalid messageId")),!1;if(B===5){if(typeof A!="object"||!A.length)return e.emit("error",new Error("Invalid qos vector")),!1;for(let j=0;j<A.length;j+=1){if(typeof A[j]!="number")return e.emit("error",new Error("Invalid qos vector")),!1;o+=1}}let S=null;if(B===5){if(S=V(e,R,s,o),!S)return!1;o+=S.length}return e.write(f.ACKS[r][0][K][0]),m(e,o),g(e,Y),S!==null&&S.write(),B===5&&e.write(_.from(A)),!0}(p,O,L);case"pingreq":case"pingresp":return function(z,e,s){return e.write(f.EMPTY[z.cmd])}(p,O);case"disconnect":return function(z,e,s){const B=s?s.protocolVersion:4,D=z||{},Y=D.reasonCode,K=D.properties;let A=B===5?1:0,R=null;if(B===5){if(R=V(e,K,s,A),!R)return!1;A+=R.length}return e.write(_.from([f.codes.disconnect<<4])),m(e,A),B===5&&e.write(_.from([Y])),R!==null&&R.write(),!0}(p,O,L);case"auth":return function(z,e,s){const B=s?s.protocolVersion:4,D=z||{},Y=D.reasonCode,K=D.properties;let A=B===5?1:0;B!==5&&e.emit("error",new Error("Invalid mqtt version for auth packet"));const R=V(e,K,s,A);return!!R&&(A+=R.length,e.write(_.from([f.codes.auth<<4])),m(e,A),e.write(_.from([Y])),R!==null&&R.write(),!0)}(p,O,L);default:return O.emit("error",new Error("Unknown command")),!1}}function G(p){p.uncork()}Object.defineProperty(W,"cacheNumbers",{get:()=>g===M,set(p){p?(h&&Object.keys(h).length!==0||(w=!0),g=M):(w=!1,g=U)}});const J={};function m(p,O){if(O>f.VARBYTEINT_MAX)return p.emit("error",new Error(`Invalid variable byte integer: ${O}`)),!1;let L=J[O];return L||(L=x(O),O<16384&&(J[O]=L)),d("writeVarByteInt: writing to stream: %o",L),p.write(L)}function b(p,O){const L=_.byteLength(O);return g(p,L),d("writeString: %s",O),p.write(O,"utf8")}function u(p,O,L){b(p,O),b(p,L)}function M(p,O){return d("writeNumberCached: number: %d",O),d("writeNumberCached: %o",h[O]),p.write(h[O])}function U(p,O){const L=E(O);return d("writeNumberGenerated: %o",L),p.write(L)}function F(p,O){typeof O=="string"?b(p,O):O?(g(p,O.length),p.write(O)):g(p,0)}function P(p,O){if(typeof O!="object"||O.length!=null)return{length:1,write(){y(p,{},0)}};let L=0;function z(e,s){let B=0;switch(f.propertiesTypes[e]){case"byte":if(typeof s!="boolean")return p.emit("error",new Error(`Invalid ${e}: ${s}`)),!1;B+=2;break;case"int8":if(typeof s!="number"||s<0||s>255)return p.emit("error",new Error(`Invalid ${e}: ${s}`)),!1;B+=2;break;case"binary":if(s&&s===null)return p.emit("error",new Error(`Invalid ${e}: ${s}`)),!1;B+=1+_.byteLength(s)+2;break;case"int16":if(typeof s!="number"||s<0||s>65535)return p.emit("error",new Error(`Invalid ${e}: ${s}`)),!1;B+=3;break;case"int32":if(typeof s!="number"||s<0||s>4294967295)return p.emit("error",new Error(`Invalid ${e}: ${s}`)),!1;B+=5;break;case"var":if(typeof s!="number"||s<0||s>268435455)return p.emit("error",new Error(`Invalid ${e}: ${s}`)),!1;B+=1+_.byteLength(x(s));break;case"string":if(typeof s!="string")return p.emit("error",new Error(`Invalid ${e}: ${s}`)),!1;B+=3+_.byteLength(s.toString());break;case"pair":if(typeof s!="object")return p.emit("error",new Error(`Invalid ${e}: ${s}`)),!1;B+=Object.getOwnPropertyNames(s).reduce((D,Y)=>{const K=s[Y];return Array.isArray(K)?D+=K.reduce((A,R)=>A+(3+_.byteLength(Y.toString())+2+_.byteLength(R.toString())),0):D+=3+_.byteLength(Y.toString())+2+_.byteLength(s[Y].toString()),D},0);break;default:return p.emit("error",new Error(`Invalid property ${e}: ${s}`)),!1}return B}if(O)for(const e in O){let s=0,B=0;const D=O[e];if(Array.isArray(D))for(let Y=0;Y<D.length;Y++){if(B=z(e,D[Y]),!B)return!1;s+=B}else{if(B=z(e,D),!B)return!1;s=B}if(!s)return!1;L+=s}return{length:_.byteLength(x(L))+L,write(){y(p,O,L)}}}function V(p,O,L,z){const e=["reasonString","userProperties"],s=L&&L.properties&&L.properties.maximumPacketSize?L.properties.maximumPacketSize:0;let B=P(p,O);if(s)for(;z+B.length>s;){const D=e.shift();if(!D||!O[D])return!1;delete O[D],B=P(p,O)}return B}function T(p,O,L){switch(f.propertiesTypes[O]){case"byte":p.write(_.from([f.properties[O]])),p.write(_.from([+L]));break;case"int8":p.write(_.from([f.properties[O]])),p.write(_.from([L]));break;case"binary":p.write(_.from([f.properties[O]])),F(p,L);break;case"int16":p.write(_.from([f.properties[O]])),g(p,L);break;case"int32":p.write(_.from([f.properties[O]])),function(z,e){const s=l(e);d("write4ByteNumber: %o",s),z.write(s)}(p,L);break;case"var":p.write(_.from([f.properties[O]])),m(p,L);break;case"string":p.write(_.from([f.properties[O]])),b(p,L);break;case"pair":Object.getOwnPropertyNames(L).forEach(z=>{const e=L[z];Array.isArray(e)?e.forEach(s=>{p.write(_.from([f.properties[O]])),u(p,z.toString(),s.toString())}):(p.write(_.from([f.properties[O]])),u(p,z.toString(),e.toString()))});break;default:return p.emit("error",new Error(`Invalid property ${O} value: ${L}`)),!1}}function y(p,O,L){m(p,L);for(const z in O)if(Object.prototype.hasOwnProperty.call(O,z)&&O[z]!==null){const e=O[z];if(Array.isArray(e))for(let s=0;s<e.length;s++)T(p,z,e[s]);else T(p,z,e)}}function N(p){return p?p instanceof _?p.length:_.byteLength(p):0}function q(p){return typeof p=="string"||p instanceof _}X.exports=W},7824:function(X){var Q=1e3,C=60*Q,_=60*C,f=24*_;function I(a,n,t,d){var h=n>=1.5*t;return Math.round(a/t)+" "+d+(h?"s":"")}X.exports=function(a,n){n=n||{};var t,d,h=typeof a;if(h==="string"&&a.length>0)return function(E){if(!((E=String(E)).length>100)){var k=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(E);if(k){var x=parseFloat(k[1]);switch((k[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*x;case"weeks":case"week":case"w":return 6048e5*x;case"days":case"day":case"d":return x*f;case"hours":case"hour":case"hrs":case"hr":case"h":return x*_;case"minutes":case"minute":case"mins":case"min":case"m":return x*C;case"seconds":case"second":case"secs":case"sec":case"s":return x*Q;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return x;default:return}}}}(a);if(h==="number"&&isFinite(a))return n.long?(t=a,(d=Math.abs(t))>=f?I(t,d,f,"day"):d>=_?I(t,d,_,"hour"):d>=C?I(t,d,C,"minute"):d>=Q?I(t,d,Q,"second"):t+" ms"):function(E){var k=Math.abs(E);return k>=f?Math.round(E/f)+"d":k>=_?Math.round(E/_)+"h":k>=C?Math.round(E/C)+"m":k>=Q?Math.round(E/Q)+"s":E+"ms"}(a);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(a))}},423:function(X,Q,C){const _=C(9759);X.exports.Q=_},9759:function(X,Q,C){const _=C(9246).l4,f=C(1227)("number-allocator:trace"),I=C(1227)("number-allocator:error");function a(t,d){this.low=t,this.high=d}function n(t,d){if(!(this instanceof n))return new n(t,d);this.min=t,this.max=d,this.ss=new _([],(h,E)=>h.compare(E)),f("Create"),this.clear()}a.prototype.equals=function(t){return this.low===t.low&&this.high===t.high},a.prototype.compare=function(t){return this.low<t.low&&this.high<t.low?-1:t.low<this.low&&t.high<this.low?1:0},n.prototype.firstVacant=function(){return this.ss.size()===0?null:this.ss.front().low},n.prototype.alloc=function(){if(this.ss.size()===0)return f("alloc():empty"),null;const t=this.ss.front(),d=t.low;return d+1<=t.high?++t.low:this.ss.eraseElementByPos(0),f("alloc():"+d),d},n.prototype.use=function(t){const d=new a(t,t),h=this.ss.lowerBound(d);if(h){if(h.equals(d))return this.ss.eraseElementByValue(h),f("use():"+t),!0;if(h.low>t)return!1;if(h.low===t)return++h.low,f("use():"+t),!0;if(h.high===t)return--h.high,f("use():"+t),!0;const E=h.low;return h.low=t+1,this.ss.insert(new a(E,t-1)),f("use():"+t),!0}return f("use():failed"),!1},n.prototype.free=function(t){if(t<this.min||t>this.max)return void I("free():"+t+" is out of range");const d=new a(t,t),h=this.ss.lowerBound(d);if(h){if(h.low<=t&&t<=h.high)return void I("free():"+t+" has already been vacant");if(h===this.ss.front())t+1===h.low?--h.low:this.ss.insert(d);else{const E=this.ss.reverseLowerBound(d);E.high+1===t?t+1===h.low?(this.ss.eraseElementByValue(E),h.low=E.low):E.high=t:t+1===h.low?h.low=t:this.ss.insert(d)}}else{if(h===this.ss.front())return void this.ss.insert(d);const E=this.ss.reverseLowerBound(d);E.high+1===t?E.high=t:this.ss.insert(d)}f("free():"+t)},n.prototype.clear=function(){f("clear()"),this.ss.clear(),this.ss.insert(new a(this.min,this.max))},n.prototype.intervalCount=function(){return this.ss.size()},n.prototype.dump=function(){console.log("length:"+this.ss.size());for(const t of this.ss)console.log(t)},X.exports=n},778:function(X,Q,C){var _=C(2479);function f(a){var n=function(){return n.called?n.value:(n.called=!0,n.value=a.apply(this,arguments))};return n.called=!1,n}function I(a){var n=function(){if(n.called)throw new Error(n.onceError);return n.called=!0,n.value=a.apply(this,arguments)},t=a.name||"Function wrapped with `once`";return n.onceError=t+" shouldn't be called more than once",n.called=!1,n}X.exports=_(f),X.exports.strict=_(I),f.proto=f(function(){Object.defineProperty(Function.prototype,"once",{value:function(){return f(this)},configurable:!0}),Object.defineProperty(Function.prototype,"onceStrict",{value:function(){return I(this)},configurable:!0})})},8212:function(X,Q,C){var _=C(4155);_===void 0||!_.version||_.version.indexOf("v0.")===0||_.version.indexOf("v1.")===0&&_.version.indexOf("v1.8.")!==0?X.exports={nextTick:function(f,I,a,n){if(typeof f!="function")throw new TypeError('"callback" argument must be a function');var t,d,h=arguments.length;switch(h){case 0:case 1:return _.nextTick(f);case 2:return _.nextTick(function(){f.call(null,I)});case 3:return _.nextTick(function(){f.call(null,I,a)});case 4:return _.nextTick(function(){f.call(null,I,a,n)});default:for(t=new Array(h-1),d=0;d<t.length;)t[d++]=arguments[d];return _.nextTick(function(){f.apply(null,t)})}}}:X.exports=_},4155:function(X){var Q,C,_=X.exports={};function f(){throw new Error("setTimeout has not been defined")}function I(){throw new Error("clearTimeout has not been defined")}function a(g){if(Q===setTimeout)return setTimeout(g,0);if((Q===f||!Q)&&setTimeout)return Q=setTimeout,setTimeout(g,0);try{return Q(g,0)}catch{try{return Q.call(null,g,0)}catch{return Q.call(this,g,0)}}}(function(){try{Q=typeof setTimeout=="function"?setTimeout:f}catch{Q=f}try{C=typeof clearTimeout=="function"?clearTimeout:I}catch{C=I}})();var n,t=[],d=!1,h=-1;function E(){d&&n&&(d=!1,n.length?t=n.concat(t):h=-1,t.length&&k())}function k(){if(!d){var g=a(E);d=!0;for(var w=t.length;w;){for(n=t,t=[];++h<w;)n&&n[h].run();h=-1,w=t.length}n=null,d=!1,function(W){if(C===clearTimeout)return clearTimeout(W);if((C===I||!C)&&clearTimeout)return C=clearTimeout,clearTimeout(W);try{C(W)}catch{try{return C.call(null,W)}catch{return C.call(this,W)}}}(g)}}function x(g,w){this.fun=g,this.array=w}function l(){}_.nextTick=function(g){var w=new Array(arguments.length-1);if(arguments.length>1)for(var W=1;W<arguments.length;W++)w[W-1]=arguments[W];t.push(new x(g,w)),t.length!==1||d||a(k)},x.prototype.run=function(){this.fun.apply(null,this.array)},_.title="browser",_.browser=!0,_.env={},_.argv=[],_.version="",_.versions={},_.on=l,_.addListener=l,_.once=l,_.off=l,_.removeListener=l,_.removeAllListeners=l,_.emit=l,_.prependListener=l,_.prependOnceListener=l,_.listeners=function(g){return[]},_.binding=function(g){throw new Error("process.binding is not supported")},_.cwd=function(){return"/"},_.chdir=function(g){throw new Error("process.chdir is not supported")},_.umask=function(){return 0}},2587:function(X){function Q(C,_){return Object.prototype.hasOwnProperty.call(C,_)}X.exports=function(C,_,f,I){_=_||"&",f=f||"=";var a={};if(typeof C!="string"||C.length===0)return a;var n=/\+/g;C=C.split(_);var t=1e3;I&&typeof I.maxKeys=="number"&&(t=I.maxKeys);var d=C.length;t>0&&d>t&&(d=t);for(var h=0;h<d;++h){var E,k,x,l,g=C[h].replace(n,"%20"),w=g.indexOf(f);w>=0?(E=g.substr(0,w),k=g.substr(w+1)):(E=g,k=""),x=decodeURIComponent(E),l=decodeURIComponent(k),Q(a,x)?Array.isArray(a[x])?a[x].push(l):a[x]=[a[x],l]:a[x]=l}return a}},2182:function(X){var Q=function(C){switch(typeof C){case"string":return C;case"boolean":return C?"true":"false";case"number":return isFinite(C)?C:"";default:return""}};X.exports=function(C,_,f,I){return _=_||"&",f=f||"=",C===null&&(C=void 0),typeof C=="object"?Object.keys(C).map(function(a){var n=encodeURIComponent(Q(a))+f;return Array.isArray(C[a])?C[a].map(function(t){return n+encodeURIComponent(Q(t))}).join(_):n+encodeURIComponent(Q(C[a]))}).join(_):I?encodeURIComponent(Q(I))+f+encodeURIComponent(Q(C)):""}},7673:function(X,Q,C){Q.decode=Q.parse=C(2587),Q.encode=Q.stringify=C(2182)},4281:function(X){var Q={};function C(f,I,a){a||(a=Error);var n=function(t){var d,h;function E(k,x,l){return t.call(this,function(g,w,W){return typeof I=="string"?I:I(g,w,W)}(k,x,l))||this}return h=t,(d=E).prototype=Object.create(h.prototype),d.prototype.constructor=d,d.__proto__=h,E}(a);n.prototype.name=a.name,n.prototype.code=f,Q[f]=n}function _(f,I){if(Array.isArray(f)){var a=f.length;return f=f.map(function(n){return String(n)}),a>2?"one of ".concat(I," ").concat(f.slice(0,a-1).join(", "),", or ")+f[a-1]:a===2?"one of ".concat(I," ").concat(f[0]," or ").concat(f[1]):"of ".concat(I," ").concat(f[0])}return"of ".concat(I," ").concat(String(f))}C("ERR_INVALID_OPT_VALUE",function(f,I){return'The value "'+I+'" is invalid for option "'+f+'"'},TypeError),C("ERR_INVALID_ARG_TYPE",function(f,I,a){var n,t,d,h,E;if(typeof I=="string"&&(t="not ",I.substr(0,t.length)===t)?(n="must not be",I=I.replace(/^not /,"")):n="must be",function(x,l,g){return(g===void 0||g>x.length)&&(g=x.length),x.substring(g-l.length,g)===l}(f," argument"))d="The ".concat(f," ").concat(n," ").concat(_(I,"type"));else{var k=(typeof E!="number"&&(E=0),E+1>(h=f).length||h.indexOf(".",E)===-1?"argument":"property");d='The "'.concat(f,'" ').concat(k," ").concat(n," ").concat(_(I,"type"))}return d+". Received type ".concat(typeof a)},TypeError),C("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),C("ERR_METHOD_NOT_IMPLEMENTED",function(f){return"The "+f+" method is not implemented"}),C("ERR_STREAM_PREMATURE_CLOSE","Premature close"),C("ERR_STREAM_DESTROYED",function(f){return"Cannot call "+f+" after a stream was destroyed"}),C("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),C("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),C("ERR_STREAM_WRITE_AFTER_END","write after end"),C("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),C("ERR_UNKNOWN_ENCODING",function(f){return"Unknown encoding: "+f},TypeError),C("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),X.exports.q=Q},6753:function(X,Q,C){var _=C(4155),f=Object.keys||function(x){var l=[];for(var g in x)l.push(g);return l};X.exports=h;var I=C(9481),a=C(4229);C(5717)(h,I);for(var n=f(a.prototype),t=0;t<n.length;t++){var d=n[t];h.prototype[d]||(h.prototype[d]=a.prototype[d])}function h(x){if(!(this instanceof h))return new h(x);I.call(this,x),a.call(this,x),this.allowHalfOpen=!0,x&&(x.readable===!1&&(this.readable=!1),x.writable===!1&&(this.writable=!1),x.allowHalfOpen===!1&&(this.allowHalfOpen=!1,this.once("end",E)))}function E(){this._writableState.ended||_.nextTick(k,this)}function k(x){x.end()}Object.defineProperty(h.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(h.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(h.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(h.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState!==void 0&&this._writableState!==void 0&&this._readableState.destroyed&&this._writableState.destroyed},set:function(x){this._readableState!==void 0&&this._writableState!==void 0&&(this._readableState.destroyed=x,this._writableState.destroyed=x)}})},2725:function(X,Q,C){X.exports=f;var _=C(4605);function f(I){if(!(this instanceof f))return new f(I);_.call(this,I)}C(5717)(f,_),f.prototype._transform=function(I,a,n){n(null,I)}},9481:function(X,Q,C){var _,f=C(4155);X.exports=F,F.ReadableState=U,C(7187).EventEmitter;var I,a=function(A,R){return A.listeners(R).length},n=C(2503),t=C(8764).Buffer,d=C.g.Uint8Array||function(){},h=C(4616);I=h&&h.debuglog?h.debuglog("stream"):function(){};var E,k,x,l=C(7327),g=C(1195),w=C(2457).getHighWaterMark,W=C(4281).q,G=W.ERR_INVALID_ARG_TYPE,J=W.ERR_STREAM_PUSH_AFTER_EOF,m=W.ERR_METHOD_NOT_IMPLEMENTED,b=W.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;C(5717)(F,n);var u=g.errorOrDestroy,M=["error","close","destroy","pause","resume"];function U(A,R,r){_=_||C(6753),A=A||{},typeof r!="boolean"&&(r=R instanceof _),this.objectMode=!!A.objectMode,r&&(this.objectMode=this.objectMode||!!A.readableObjectMode),this.highWaterMark=w(this,A,"readableHighWaterMark",r),this.buffer=new l,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=A.emitClose!==!1,this.autoDestroy=!!A.autoDestroy,this.destroyed=!1,this.defaultEncoding=A.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,A.encoding&&(E||(E=C(2553).s),this.decoder=new E(A.encoding),this.encoding=A.encoding)}function F(A){if(_=_||C(6753),!(this instanceof F))return new F(A);var R=this instanceof _;this._readableState=new U(A,this,R),this.readable=!0,A&&(typeof A.read=="function"&&(this._read=A.read),typeof A.destroy=="function"&&(this._destroy=A.destroy)),n.call(this)}function P(A,R,r,o,S){I("readableAddChunk",R);var j,H=A._readableState;if(R===null)H.reading=!1,function(tt,rt){if(I("onEofChunk"),!rt.ended){if(rt.decoder){var it=rt.decoder.end();it&&it.length&&(rt.buffer.push(it),rt.length+=rt.objectMode?1:it.length)}rt.ended=!0,rt.sync?N(tt):(rt.needReadable=!1,rt.emittedReadable||(rt.emittedReadable=!0,q(tt)))}}(A,H);else if(S||(j=function(tt,rt){var it,ot;return ot=rt,t.isBuffer(ot)||ot instanceof d||typeof rt=="string"||rt===void 0||tt.objectMode||(it=new G("chunk",["string","Buffer","Uint8Array"],rt)),it}(H,R)),j)u(A,j);else if(H.objectMode||R&&R.length>0)if(typeof R=="string"||H.objectMode||Object.getPrototypeOf(R)===t.prototype||(R=function(tt){return t.from(tt)}(R)),o)H.endEmitted?u(A,new b):V(A,H,R,!0);else if(H.ended)u(A,new J);else{if(H.destroyed)return!1;H.reading=!1,H.decoder&&!r?(R=H.decoder.write(R),H.objectMode||R.length!==0?V(A,H,R,!1):p(A,H)):V(A,H,R,!1)}else o||(H.reading=!1,p(A,H));return!H.ended&&(H.length<H.highWaterMark||H.length===0)}function V(A,R,r,o){R.flowing&&R.length===0&&!R.sync?(R.awaitDrain=0,A.emit("data",r)):(R.length+=R.objectMode?1:r.length,o?R.buffer.unshift(r):R.buffer.push(r),R.needReadable&&N(A)),p(A,R)}Object.defineProperty(F.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState!==void 0&&this._readableState.destroyed},set:function(A){this._readableState&&(this._readableState.destroyed=A)}}),F.prototype.destroy=g.destroy,F.prototype._undestroy=g.undestroy,F.prototype._destroy=function(A,R){R(A)},F.prototype.push=function(A,R){var r,o=this._readableState;return o.objectMode?r=!0:typeof A=="string"&&((R=R||o.defaultEncoding)!==o.encoding&&(A=t.from(A,R),R=""),r=!0),P(this,A,R,!1,r)},F.prototype.unshift=function(A){return P(this,A,null,!0,!1)},F.prototype.isPaused=function(){return this._readableState.flowing===!1},F.prototype.setEncoding=function(A){E||(E=C(2553).s);var R=new E(A);this._readableState.decoder=R,this._readableState.encoding=this._readableState.decoder.encoding;for(var r=this._readableState.buffer.head,o="";r!==null;)o+=R.write(r.data),r=r.next;return this._readableState.buffer.clear(),o!==""&&this._readableState.buffer.push(o),this._readableState.length=o.length,this};var T=1073741824;function y(A,R){return A<=0||R.length===0&&R.ended?0:R.objectMode?1:A!=A?R.flowing&&R.length?R.buffer.head.data.length:R.length:(A>R.highWaterMark&&(R.highWaterMark=function(r){return r>=T?r=T:(r--,r|=r>>>1,r|=r>>>2,r|=r>>>4,r|=r>>>8,r|=r>>>16,r++),r}(A)),A<=R.length?A:R.ended?R.length:(R.needReadable=!0,0))}function N(A){var R=A._readableState;I("emitReadable",R.needReadable,R.emittedReadable),R.needReadable=!1,R.emittedReadable||(I("emitReadable",R.flowing),R.emittedReadable=!0,f.nextTick(q,A))}function q(A){var R=A._readableState;I("emitReadable_",R.destroyed,R.length,R.ended),R.destroyed||!R.length&&!R.ended||(A.emit("readable"),R.emittedReadable=!1),R.needReadable=!R.flowing&&!R.ended&&R.length<=R.highWaterMark,s(A)}function p(A,R){R.readingMore||(R.readingMore=!0,f.nextTick(O,A,R))}function O(A,R){for(;!R.reading&&!R.ended&&(R.length<R.highWaterMark||R.flowing&&R.length===0);){var r=R.length;if(I("maybeReadMore read 0"),A.read(0),r===R.length)break}R.readingMore=!1}function L(A){var R=A._readableState;R.readableListening=A.listenerCount("readable")>0,R.resumeScheduled&&!R.paused?R.flowing=!0:A.listenerCount("data")>0&&A.resume()}function z(A){I("readable nexttick read 0"),A.read(0)}function e(A,R){I("resume",R.reading),R.reading||A.read(0),R.resumeScheduled=!1,A.emit("resume"),s(A),R.flowing&&!R.reading&&A.read(0)}function s(A){var R=A._readableState;for(I("flow",R.flowing);R.flowing&&A.read()!==null;);}function B(A,R){return R.length===0?null:(R.objectMode?r=R.buffer.shift():!A||A>=R.length?(r=R.decoder?R.buffer.join(""):R.buffer.length===1?R.buffer.first():R.buffer.concat(R.length),R.buffer.clear()):r=R.buffer.consume(A,R.decoder),r);var r}function D(A){var R=A._readableState;I("endReadable",R.endEmitted),R.endEmitted||(R.ended=!0,f.nextTick(Y,R,A))}function Y(A,R){if(I("endReadableNT",A.endEmitted,A.length),!A.endEmitted&&A.length===0&&(A.endEmitted=!0,R.readable=!1,R.emit("end"),A.autoDestroy)){var r=R._writableState;(!r||r.autoDestroy&&r.finished)&&R.destroy()}}function K(A,R){for(var r=0,o=A.length;r<o;r++)if(A[r]===R)return r;return-1}F.prototype.read=function(A){I("read",A),A=parseInt(A,10);var R=this._readableState,r=A;if(A!==0&&(R.emittedReadable=!1),A===0&&R.needReadable&&((R.highWaterMark!==0?R.length>=R.highWaterMark:R.length>0)||R.ended))return I("read: emitReadable",R.length,R.ended),R.length===0&&R.ended?D(this):N(this),null;if((A=y(A,R))===0&&R.ended)return R.length===0&&D(this),null;var o,S=R.needReadable;return I("need readable",S),(R.length===0||R.length-A<R.highWaterMark)&&I("length less than watermark",S=!0),R.ended||R.reading?I("reading or ended",S=!1):S&&(I("do read"),R.reading=!0,R.sync=!0,R.length===0&&(R.needReadable=!0),this._read(R.highWaterMark),R.sync=!1,R.reading||(A=y(r,R))),(o=A>0?B(A,R):null)===null?(R.needReadable=R.length<=R.highWaterMark,A=0):(R.length-=A,R.awaitDrain=0),R.length===0&&(R.ended||(R.needReadable=!0),r!==A&&R.ended&&D(this)),o!==null&&this.emit("data",o),o},F.prototype._read=function(A){u(this,new m("_read()"))},F.prototype.pipe=function(A,R){var r=this,o=this._readableState;switch(o.pipesCount){case 0:o.pipes=A;break;case 1:o.pipes=[o.pipes,A];break;default:o.pipes.push(A)}o.pipesCount+=1,I("pipe count=%d opts=%j",o.pipesCount,R);var S=R&&R.end===!1||A===f.stdout||A===f.stderr?i:j;function j(){I("onend"),A.end()}o.endEmitted?f.nextTick(S):r.once("end",S),A.on("unpipe",function c(v,$){I("onunpipe"),v===r&&$&&$.hasUnpiped===!1&&($.hasUnpiped=!0,I("cleanup"),A.removeListener("close",ot),A.removeListener("finish",at),A.removeListener("drain",H),A.removeListener("error",it),A.removeListener("unpipe",c),r.removeListener("end",j),r.removeListener("end",i),r.removeListener("data",rt),tt=!0,!o.awaitDrain||A._writableState&&!A._writableState.needDrain||H())});var H=function(c){return function(){var v=c._readableState;I("pipeOnDrain",v.awaitDrain),v.awaitDrain&&v.awaitDrain--,v.awaitDrain===0&&a(c,"data")&&(v.flowing=!0,s(c))}}(r);A.on("drain",H);var tt=!1;function rt(c){I("ondata");var v=A.write(c);I("dest.write",v),v===!1&&((o.pipesCount===1&&o.pipes===A||o.pipesCount>1&&K(o.pipes,A)!==-1)&&!tt&&(I("false write response, pause",o.awaitDrain),o.awaitDrain++),r.pause())}function it(c){I("onerror",c),i(),A.removeListener("error",it),a(A,"error")===0&&u(A,c)}function ot(){A.removeListener("finish",at),i()}function at(){I("onfinish"),A.removeListener("close",ot),i()}function i(){I("unpipe"),r.unpipe(A)}return r.on("data",rt),function(c,v,$){if(typeof c.prependListener=="function")return c.prependListener(v,$);c._events&&c._events.error?Array.isArray(c._events.error)?c._events.error.unshift($):c._events.error=[$,c._events.error]:c.on(v,$)}(A,"error",it),A.once("close",ot),A.once("finish",at),A.emit("pipe",r),o.flowing||(I("pipe resume"),r.resume()),A},F.prototype.unpipe=function(A){var R=this._readableState,r={hasUnpiped:!1};if(R.pipesCount===0)return this;if(R.pipesCount===1)return A&&A!==R.pipes||(A||(A=R.pipes),R.pipes=null,R.pipesCount=0,R.flowing=!1,A&&A.emit("unpipe",this,r)),this;if(!A){var o=R.pipes,S=R.pipesCount;R.pipes=null,R.pipesCount=0,R.flowing=!1;for(var j=0;j<S;j++)o[j].emit("unpipe",this,{hasUnpiped:!1});return this}var H=K(R.pipes,A);return H===-1||(R.pipes.splice(H,1),R.pipesCount-=1,R.pipesCount===1&&(R.pipes=R.pipes[0]),A.emit("unpipe",this,r)),this},F.prototype.on=function(A,R){var r=n.prototype.on.call(this,A,R),o=this._readableState;return A==="data"?(o.readableListening=this.listenerCount("readable")>0,o.flowing!==!1&&this.resume()):A==="readable"&&(o.endEmitted||o.readableListening||(o.readableListening=o.needReadable=!0,o.flowing=!1,o.emittedReadable=!1,I("on readable",o.length,o.reading),o.length?N(this):o.reading||f.nextTick(z,this))),r},F.prototype.addListener=F.prototype.on,F.prototype.removeListener=function(A,R){var r=n.prototype.removeListener.call(this,A,R);return A==="readable"&&f.nextTick(L,this),r},F.prototype.removeAllListeners=function(A){var R=n.prototype.removeAllListeners.apply(this,arguments);return A!=="readable"&&A!==void 0||f.nextTick(L,this),R},F.prototype.resume=function(){var A=this._readableState;return A.flowing||(I("resume"),A.flowing=!A.readableListening,function(R,r){r.resumeScheduled||(r.resumeScheduled=!0,f.nextTick(e,R,r))}(this,A)),A.paused=!1,this},F.prototype.pause=function(){return I("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(I("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},F.prototype.wrap=function(A){var R=this,r=this._readableState,o=!1;for(var S in A.on("end",function(){if(I("wrapped end"),r.decoder&&!r.ended){var H=r.decoder.end();H&&H.length&&R.push(H)}R.push(null)}),A.on("data",function(H){I("wrapped data"),r.decoder&&(H=r.decoder.write(H)),r.objectMode&&H==null||(r.objectMode||H&&H.length)&&(R.push(H)||(o=!0,A.pause()))}),A)this[S]===void 0&&typeof A[S]=="function"&&(this[S]=function(H){return function(){return A[H].apply(A,arguments)}}(S));for(var j=0;j<M.length;j++)A.on(M[j],this.emit.bind(this,M[j]));return this._read=function(H){I("wrapped _read",H),o&&(o=!1,A.resume())},this},typeof Symbol=="function"&&(F.prototype[Symbol.asyncIterator]=function(){return k===void 0&&(k=C(5850)),k(this)}),Object.defineProperty(F.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(F.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(F.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(A){this._readableState&&(this._readableState.flowing=A)}}),F._fromList=B,Object.defineProperty(F.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),typeof Symbol=="function"&&(F.from=function(A,R){return x===void 0&&(x=C(5167)),x(F,A,R)})},4605:function(X,Q,C){X.exports=h;var _=C(4281).q,f=_.ERR_METHOD_NOT_IMPLEMENTED,I=_.ERR_MULTIPLE_CALLBACK,a=_.ERR_TRANSFORM_ALREADY_TRANSFORMING,n=_.ERR_TRANSFORM_WITH_LENGTH_0,t=C(6753);function d(x,l){var g=this._transformState;g.transforming=!1;var w=g.writecb;if(w===null)return this.emit("error",new I);g.writechunk=null,g.writecb=null,l!=null&&this.push(l),w(x);var W=this._readableState;W.reading=!1,(W.needReadable||W.length<W.highWaterMark)&&this._read(W.highWaterMark)}function h(x){if(!(this instanceof h))return new h(x);t.call(this,x),this._transformState={afterTransform:d.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,x&&(typeof x.transform=="function"&&(this._transform=x.transform),typeof x.flush=="function"&&(this._flush=x.flush)),this.on("prefinish",E)}function E(){var x=this;typeof this._flush!="function"||this._readableState.destroyed?k(this,null,null):this._flush(function(l,g){k(x,l,g)})}function k(x,l,g){if(l)return x.emit("error",l);if(g!=null&&x.push(g),x._writableState.length)throw new n;if(x._transformState.transforming)throw new a;return x.push(null)}C(5717)(h,t),h.prototype.push=function(x,l){return this._transformState.needTransform=!1,t.prototype.push.call(this,x,l)},h.prototype._transform=function(x,l,g){g(new f("_transform()"))},h.prototype._write=function(x,l,g){var w=this._transformState;if(w.writecb=g,w.writechunk=x,w.writeencoding=l,!w.transforming){var W=this._readableState;(w.needTransform||W.needReadable||W.length<W.highWaterMark)&&this._read(W.highWaterMark)}},h.prototype._read=function(x){var l=this._transformState;l.writechunk===null||l.transforming?l.needTransform=!0:(l.transforming=!0,this._transform(l.writechunk,l.writeencoding,l.afterTransform))},h.prototype._destroy=function(x,l){t.prototype._destroy.call(this,x,function(g){l(g)})}},4229:function(X,Q,C){var _,f=C(4155);function I(p){var O=this;this.next=null,this.entry=null,this.finish=function(){(function(L,z,e){var s=L.entry;for(L.entry=null;s;){var B=s.callback;z.pendingcb--,B(void 0),s=s.next}z.corkedRequestsFree.next=L})(O,p)}}X.exports=F,F.WritableState=U;var a,n={deprecate:C(4927)},t=C(2503),d=C(8764).Buffer,h=C.g.Uint8Array||function(){},E=C(1195),k=C(2457).getHighWaterMark,x=C(4281).q,l=x.ERR_INVALID_ARG_TYPE,g=x.ERR_METHOD_NOT_IMPLEMENTED,w=x.ERR_MULTIPLE_CALLBACK,W=x.ERR_STREAM_CANNOT_PIPE,G=x.ERR_STREAM_DESTROYED,J=x.ERR_STREAM_NULL_VALUES,m=x.ERR_STREAM_WRITE_AFTER_END,b=x.ERR_UNKNOWN_ENCODING,u=E.errorOrDestroy;function M(){}function U(p,O,L){_=_||C(6753),p=p||{},typeof L!="boolean"&&(L=O instanceof _),this.objectMode=!!p.objectMode,L&&(this.objectMode=this.objectMode||!!p.writableObjectMode),this.highWaterMark=k(this,p,"writableHighWaterMark",L),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var z=p.decodeStrings===!1;this.decodeStrings=!z,this.defaultEncoding=p.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){(function(s,B){var D=s._writableState,Y=D.sync,K=D.writecb;if(typeof K!="function")throw new w;if(function(R){R.writing=!1,R.writecb=null,R.length-=R.writelen,R.writelen=0}(D),B)(function(R,r,o,S,j){--r.pendingcb,o?(f.nextTick(j,S),f.nextTick(q,R,r),R._writableState.errorEmitted=!0,u(R,S)):(j(S),R._writableState.errorEmitted=!0,u(R,S),q(R,r))})(s,D,Y,B,K);else{var A=y(D)||s.destroyed;A||D.corked||D.bufferProcessing||!D.bufferedRequest||T(s,D),Y?f.nextTick(V,s,D,A,K):V(s,D,A,K)}})(O,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=p.emitClose!==!1,this.autoDestroy=!!p.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new I(this)}function F(p){var O=this instanceof(_=_||C(6753));if(!O&&!a.call(F,this))return new F(p);this._writableState=new U(p,this,O),this.writable=!0,p&&(typeof p.write=="function"&&(this._write=p.write),typeof p.writev=="function"&&(this._writev=p.writev),typeof p.destroy=="function"&&(this._destroy=p.destroy),typeof p.final=="function"&&(this._final=p.final)),t.call(this)}function P(p,O,L,z,e,s,B){O.writelen=z,O.writecb=B,O.writing=!0,O.sync=!0,O.destroyed?O.onwrite(new G("write")):L?p._writev(e,O.onwrite):p._write(e,s,O.onwrite),O.sync=!1}function V(p,O,L,z){L||function(e,s){s.length===0&&s.needDrain&&(s.needDrain=!1,e.emit("drain"))}(p,O),O.pendingcb--,z(),q(p,O)}function T(p,O){O.bufferProcessing=!0;var L=O.bufferedRequest;if(p._writev&&L&&L.next){var z=O.bufferedRequestCount,e=new Array(z),s=O.corkedRequestsFree;s.entry=L;for(var B=0,D=!0;L;)e[B]=L,L.isBuf||(D=!1),L=L.next,B+=1;e.allBuffers=D,P(p,O,!0,O.length,e,"",s.finish),O.pendingcb++,O.lastBufferedRequest=null,s.next?(O.corkedRequestsFree=s.next,s.next=null):O.corkedRequestsFree=new I(O),O.bufferedRequestCount=0}else{for(;L;){var Y=L.chunk,K=L.encoding,A=L.callback;if(P(p,O,!1,O.objectMode?1:Y.length,Y,K,A),L=L.next,O.bufferedRequestCount--,O.writing)break}L===null&&(O.lastBufferedRequest=null)}O.bufferedRequest=L,O.bufferProcessing=!1}function y(p){return p.ending&&p.length===0&&p.bufferedRequest===null&&!p.finished&&!p.writing}function N(p,O){p._final(function(L){O.pendingcb--,L&&u(p,L),O.prefinished=!0,p.emit("prefinish"),q(p,O)})}function q(p,O){var L=y(O);if(L&&(function(e,s){s.prefinished||s.finalCalled||(typeof e._final!="function"||s.destroyed?(s.prefinished=!0,e.emit("prefinish")):(s.pendingcb++,s.finalCalled=!0,f.nextTick(N,e,s)))}(p,O),O.pendingcb===0&&(O.finished=!0,p.emit("finish"),O.autoDestroy))){var z=p._readableState;(!z||z.autoDestroy&&z.endEmitted)&&p.destroy()}return L}C(5717)(F,t),U.prototype.getBuffer=function(){for(var p=this.bufferedRequest,O=[];p;)O.push(p),p=p.next;return O},function(){try{Object.defineProperty(U.prototype,"buffer",{get:n.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}}(),typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(a=Function.prototype[Symbol.hasInstance],Object.defineProperty(F,Symbol.hasInstance,{value:function(p){return!!a.call(this,p)||this===F&&p&&p._writableState instanceof U}})):a=function(p){return p instanceof this},F.prototype.pipe=function(){u(this,new W)},F.prototype.write=function(p,O,L){var z,e=this._writableState,s=!1,B=!e.objectMode&&(z=p,d.isBuffer(z)||z instanceof h);return B&&!d.isBuffer(p)&&(p=function(D){return d.from(D)}(p)),typeof O=="function"&&(L=O,O=null),B?O="buffer":O||(O=e.defaultEncoding),typeof L!="function"&&(L=M),e.ending?function(D,Y){var K=new m;u(D,K),f.nextTick(Y,K)}(this,L):(B||function(D,Y,K,A){var R;return K===null?R=new J:typeof K=="string"||Y.objectMode||(R=new l("chunk",["string","Buffer"],K)),!R||(u(D,R),f.nextTick(A,R),!1)}(this,e,p,L))&&(e.pendingcb++,s=function(D,Y,K,A,R,r){if(!K){var o=function(tt,rt,it){return tt.objectMode||tt.decodeStrings===!1||typeof rt!="string"||(rt=d.from(rt,it)),rt}(Y,A,R);A!==o&&(K=!0,R="buffer",A=o)}var S=Y.objectMode?1:A.length;Y.length+=S;var j=Y.length<Y.highWaterMark;if(j||(Y.needDrain=!0),Y.writing||Y.corked){var H=Y.lastBufferedRequest;Y.lastBufferedRequest={chunk:A,encoding:R,isBuf:K,callback:r,next:null},H?H.next=Y.lastBufferedRequest:Y.bufferedRequest=Y.lastBufferedRequest,Y.bufferedRequestCount+=1}else P(D,Y,!1,S,A,R,r);return j}(this,e,B,p,O,L)),s},F.prototype.cork=function(){this._writableState.corked++},F.prototype.uncork=function(){var p=this._writableState;p.corked&&(p.corked--,p.writing||p.corked||p.bufferProcessing||!p.bufferedRequest||T(this,p))},F.prototype.setDefaultEncoding=function(p){if(typeof p=="string"&&(p=p.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((p+"").toLowerCase())>-1))throw new b(p);return this._writableState.defaultEncoding=p,this},Object.defineProperty(F.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(F.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),F.prototype._write=function(p,O,L){L(new g("_write()"))},F.prototype._writev=null,F.prototype.end=function(p,O,L){var z=this._writableState;return typeof p=="function"?(L=p,p=null,O=null):typeof O=="function"&&(L=O,O=null),p!=null&&this.write(p,O),z.corked&&(z.corked=1,this.uncork()),z.ending||function(e,s,B){s.ending=!0,q(e,s),B&&(s.finished?f.nextTick(B):e.once("finish",B)),s.ended=!0,e.writable=!1}(this,z,L),this},Object.defineProperty(F.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(F.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState!==void 0&&this._writableState.destroyed},set:function(p){this._writableState&&(this._writableState.destroyed=p)}}),F.prototype.destroy=E.destroy,F.prototype._undestroy=E.undestroy,F.prototype._destroy=function(p,O){O(p)}},5850:function(X,Q,C){var _,f=C(4155);function I(J,m,b){return m in J?Object.defineProperty(J,m,{value:b,enumerable:!0,configurable:!0,writable:!0}):J[m]=b,J}var a=C(8610),n=Symbol("lastResolve"),t=Symbol("lastReject"),d=Symbol("error"),h=Symbol("ended"),E=Symbol("lastPromise"),k=Symbol("handlePromise"),x=Symbol("stream");function l(J,m){return{value:J,done:m}}function g(J){var m=J[n];if(m!==null){var b=J[x].read();b!==null&&(J[E]=null,J[n]=null,J[t]=null,m(l(b,!1)))}}function w(J){f.nextTick(g,J)}var W=Object.getPrototypeOf(function(){}),G=Object.setPrototypeOf((I(_={get stream(){return this[x]},next:function(){var J=this,m=this[d];if(m!==null)return Promise.reject(m);if(this[h])return Promise.resolve(l(void 0,!0));if(this[x].destroyed)return new Promise(function(U,F){f.nextTick(function(){J[d]?F(J[d]):U(l(void 0,!0))})});var b,u=this[E];if(u)b=new Promise(function(U,F){return function(P,V){U.then(function(){F[h]?P(l(void 0,!0)):F[k](P,V)},V)}}(u,this));else{var M=this[x].read();if(M!==null)return Promise.resolve(l(M,!1));b=new Promise(this[k])}return this[E]=b,b}},Symbol.asyncIterator,function(){return this}),I(_,"return",function(){var J=this;return new Promise(function(m,b){J[x].destroy(null,function(u){u?b(u):m(l(void 0,!0))})})}),_),W);X.exports=function(J){var m,b=Object.create(G,(I(m={},x,{value:J,writable:!0}),I(m,n,{value:null,writable:!0}),I(m,t,{value:null,writable:!0}),I(m,d,{value:null,writable:!0}),I(m,h,{value:J._readableState.endEmitted,writable:!0}),I(m,k,{value:function(u,M){var U=b[x].read();U?(b[E]=null,b[n]=null,b[t]=null,u(l(U,!1))):(b[n]=u,b[t]=M)},writable:!0}),m));return b[E]=null,a(J,function(u){if(u&&u.code!=="ERR_STREAM_PREMATURE_CLOSE"){var M=b[t];return M!==null&&(b[E]=null,b[n]=null,b[t]=null,M(u)),void(b[d]=u)}var U=b[n];U!==null&&(b[E]=null,b[n]=null,b[t]=null,U(l(void 0,!0))),b[h]=!0}),J.on("readable",w.bind(null,b)),b}},7327:function(X,Q,C){function _(d,h){var E=Object.keys(d);if(Object.getOwnPropertySymbols){var k=Object.getOwnPropertySymbols(d);h&&(k=k.filter(function(x){return Object.getOwnPropertyDescriptor(d,x).enumerable})),E.push.apply(E,k)}return E}function f(d,h,E){return h in d?Object.defineProperty(d,h,{value:E,enumerable:!0,configurable:!0,writable:!0}):d[h]=E,d}function I(d,h){for(var E=0;E<h.length;E++){var k=h[E];k.enumerable=k.enumerable||!1,k.configurable=!0,"value"in k&&(k.writable=!0),Object.defineProperty(d,k.key,k)}}var a=C(8764).Buffer,n=C(2361).inspect,t=n&&n.custom||"inspect";X.exports=function(){function d(){(function(k,x){if(!(k instanceof x))throw new TypeError("Cannot call a class as a function")})(this,d),this.head=null,this.tail=null,this.length=0}var h,E;return h=d,E=[{key:"push",value:function(k){var x={data:k,next:null};this.length>0?this.tail.next=x:this.head=x,this.tail=x,++this.length}},{key:"unshift",value:function(k){var x={data:k,next:this.head};this.length===0&&(this.tail=x),this.head=x,++this.length}},{key:"shift",value:function(){if(this.length!==0){var k=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,k}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(k){if(this.length===0)return"";for(var x=this.head,l=""+x.data;x=x.next;)l+=k+x.data;return l}},{key:"concat",value:function(k){if(this.length===0)return a.alloc(0);for(var x,l,g,w=a.allocUnsafe(k>>>0),W=this.head,G=0;W;)x=W.data,l=w,g=G,a.prototype.copy.call(x,l,g),G+=W.data.length,W=W.next;return w}},{key:"consume",value:function(k,x){var l;return k<this.head.data.length?(l=this.head.data.slice(0,k),this.head.data=this.head.data.slice(k)):l=k===this.head.data.length?this.shift():x?this._getString(k):this._getBuffer(k),l}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(k){var x=this.head,l=1,g=x.data;for(k-=g.length;x=x.next;){var w=x.data,W=k>w.length?w.length:k;if(W===w.length?g+=w:g+=w.slice(0,k),(k-=W)==0){W===w.length?(++l,x.next?this.head=x.next:this.head=this.tail=null):(this.head=x,x.data=w.slice(W));break}++l}return this.length-=l,g}},{key:"_getBuffer",value:function(k){var x=a.allocUnsafe(k),l=this.head,g=1;for(l.data.copy(x),k-=l.data.length;l=l.next;){var w=l.data,W=k>w.length?w.length:k;if(w.copy(x,x.length-k,0,W),(k-=W)==0){W===w.length?(++g,l.next?this.head=l.next:this.head=this.tail=null):(this.head=l,l.data=w.slice(W));break}++g}return this.length-=g,x}},{key:t,value:function(k,x){return n(this,function(l){for(var g=1;g<arguments.length;g++){var w=arguments[g]!=null?arguments[g]:{};g%2?_(Object(w),!0).forEach(function(W){f(l,W,w[W])}):Object.getOwnPropertyDescriptors?Object.defineProperties(l,Object.getOwnPropertyDescriptors(w)):_(Object(w)).forEach(function(W){Object.defineProperty(l,W,Object.getOwnPropertyDescriptor(w,W))})}return l}({},x,{depth:0,customInspect:!1}))}}],E&&I(h.prototype,E),d}()},1195:function(X,Q,C){var _=C(4155);function f(n,t){a(n,t),I(n)}function I(n){n._writableState&&!n._writableState.emitClose||n._readableState&&!n._readableState.emitClose||n.emit("close")}function a(n,t){n.emit("error",t)}X.exports={destroy:function(n,t){var d=this,h=this._readableState&&this._readableState.destroyed,E=this._writableState&&this._writableState.destroyed;return h||E?(t?t(n):n&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,_.nextTick(a,this,n)):_.nextTick(a,this,n)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(n||null,function(k){!t&&k?d._writableState?d._writableState.errorEmitted?_.nextTick(I,d):(d._writableState.errorEmitted=!0,_.nextTick(f,d,k)):_.nextTick(f,d,k):t?(_.nextTick(I,d),t(k)):_.nextTick(I,d)}),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(n,t){var d=n._readableState,h=n._writableState;d&&d.autoDestroy||h&&h.autoDestroy?n.destroy(t):n.emit("error",t)}}},8610:function(X,Q,C){var _=C(4281).q.ERR_STREAM_PREMATURE_CLOSE;function f(){}X.exports=function I(a,n,t){if(typeof n=="function")return I(a,null,n);n||(n={}),t=function(J){var m=!1;return function(){if(!m){m=!0;for(var b=arguments.length,u=new Array(b),M=0;M<b;M++)u[M]=arguments[M];J.apply(this,u)}}}(t||f);var d=n.readable||n.readable!==!1&&a.readable,h=n.writable||n.writable!==!1&&a.writable,E=function(){a.writable||x()},k=a._writableState&&a._writableState.finished,x=function(){h=!1,k=!0,d||t.call(a)},l=a._readableState&&a._readableState.endEmitted,g=function(){d=!1,l=!0,h||t.call(a)},w=function(J){t.call(a,J)},W=function(){var J;return d&&!l?(a._readableState&&a._readableState.ended||(J=new _),t.call(a,J)):h&&!k?(a._writableState&&a._writableState.ended||(J=new _),t.call(a,J)):void 0},G=function(){a.req.on("finish",x)};return function(J){return J.setHeader&&typeof J.abort=="function"}(a)?(a.on("complete",x),a.on("abort",W),a.req?G():a.on("request",G)):h&&!a._writableState&&(a.on("end",E),a.on("close",E)),a.on("end",g),a.on("finish",x),n.error!==!1&&a.on("error",w),a.on("close",W),function(){a.removeListener("complete",x),a.removeListener("abort",W),a.removeListener("request",G),a.req&&a.req.removeListener("finish",x),a.removeListener("end",E),a.removeListener("close",E),a.removeListener("finish",x),a.removeListener("end",g),a.removeListener("error",w),a.removeListener("close",W)}}},5167:function(X){X.exports=function(){throw new Error("Readable.from is not available in the browser")}},9946:function(X,Q,C){var _,f=C(4281).q,I=f.ERR_MISSING_ARGS,a=f.ERR_STREAM_DESTROYED;function n(k){if(k)throw k}function t(k,x,l,g){g=function(G){var J=!1;return function(){J||(J=!0,G.apply(void 0,arguments))}}(g);var w=!1;k.on("close",function(){w=!0}),_===void 0&&(_=C(8610)),_(k,{readable:x,writable:l},function(G){if(G)return g(G);w=!0,g()});var W=!1;return function(G){if(!w&&!W)return W=!0,function(J){return J.setHeader&&typeof J.abort=="function"}(k)?k.abort():typeof k.destroy=="function"?k.destroy():void g(G||new a("pipe"))}}function d(k){k()}function h(k,x){return k.pipe(x)}function E(k){return k.length?typeof k[k.length-1]!="function"?n:k.pop():n}X.exports=function(){for(var k=arguments.length,x=new Array(k),l=0;l<k;l++)x[l]=arguments[l];var g,w=E(x);if(Array.isArray(x[0])&&(x=x[0]),x.length<2)throw new I("streams");var W=x.map(function(G,J){var m=J<x.length-1;return t(G,m,J>0,function(b){g||(g=b),b&&W.forEach(d),m||(W.forEach(d),w(g))})});return x.reduce(h)}},2457:function(X,Q,C){var _=C(4281).q.ERR_INVALID_OPT_VALUE;X.exports={getHighWaterMark:function(f,I,a,n){var t=function(d,h,E){return d.highWaterMark!=null?d.highWaterMark:h?d[E]:null}(I,n,a);if(t!=null){if(!isFinite(t)||Math.floor(t)!==t||t<0)throw new _(n?a:"highWaterMark",t);return Math.floor(t)}return f.objectMode?16:16384}}},2503:function(X,Q,C){X.exports=C(7187).EventEmitter},8473:function(X,Q,C){(Q=X.exports=C(9481)).Stream=Q,Q.Readable=Q,Q.Writable=C(4229),Q.Duplex=C(6753),Q.Transform=C(4605),Q.PassThrough=C(2725),Q.finished=C(8610),Q.pipeline=C(9946)},5408:function(X){function Q(C,_,f){var I=this;this._callback=C,this._args=f,this._interval=setInterval(C,_,this._args),this.reschedule=function(a){a||(a=I._interval),I._interval&&clearInterval(I._interval),I._interval=setInterval(I._callback,a,I._args)},this.clear=function(){I._interval&&(clearInterval(I._interval),I._interval=void 0)},this.destroy=function(){I._interval&&clearInterval(I._interval),I._callback=void 0,I._interval=void 0,I._args=void 0}}X.exports=function(){if(typeof arguments[0]!="function")throw new Error("callback needed");if(typeof arguments[1]!="number")throw new Error("interval needed");var C;if(arguments.length>0){C=new Array(arguments.length-2);for(var _=0;_<C.length;_++)C[_]=arguments[_+2]}return new Q(arguments[0],arguments[1],C)}},1697:function(X,Q,C){X.exports=C(3188)()},3188:function(X,Q,C){var _=C(8764).Buffer;function f(I){return I instanceof _?_.from(I):new I.constructor(I.buffer.slice(),I.byteOffset,I.length)}X.exports=function(I){return(I=I||{}).circles?function(n){var t=[],d=[];return n.proto?function E(k){if(typeof k!="object"||k===null)return k;if(k instanceof Date)return new Date(k);if(Array.isArray(k))return h(k,E);if(k instanceof Map)return new Map(h(Array.from(k),E));if(k instanceof Set)return new Set(h(Array.from(k),E));var x={};for(var l in t.push(k),d.push(x),k){var g=k[l];if(typeof g!="object"||g===null)x[l]=g;else if(g instanceof Date)x[l]=new Date(g);else if(g instanceof Map)x[l]=new Map(h(Array.from(g),E));else if(g instanceof Set)x[l]=new Set(h(Array.from(g),E));else if(ArrayBuffer.isView(g))x[l]=f(g);else{var w=t.indexOf(g);x[l]=w!==-1?d[w]:E(g)}}return t.pop(),d.pop(),x}:function E(k){if(typeof k!="object"||k===null)return k;if(k instanceof Date)return new Date(k);if(Array.isArray(k))return h(k,E);if(k instanceof Map)return new Map(h(Array.from(k),E));if(k instanceof Set)return new Set(h(Array.from(k),E));var x={};for(var l in t.push(k),d.push(x),k)if(Object.hasOwnProperty.call(k,l)!==!1){var g=k[l];if(typeof g!="object"||g===null)x[l]=g;else if(g instanceof Date)x[l]=new Date(g);else if(g instanceof Map)x[l]=new Map(h(Array.from(g),E));else if(g instanceof Set)x[l]=new Set(h(Array.from(g),E));else if(ArrayBuffer.isView(g))x[l]=f(g);else{var w=t.indexOf(g);x[l]=w!==-1?d[w]:E(g)}}return t.pop(),d.pop(),x};function h(E,k){for(var x=Object.keys(E),l=new Array(x.length),g=0;g<x.length;g++){var w=x[g],W=E[w];if(typeof W!="object"||W===null)l[w]=W;else if(W instanceof Date)l[w]=new Date(W);else if(ArrayBuffer.isView(W))l[w]=f(W);else{var G=t.indexOf(W);l[w]=G!==-1?d[G]:k(W)}}return l}}(I):I.proto?function n(t){if(typeof t!="object"||t===null)return t;if(t instanceof Date)return new Date(t);if(Array.isArray(t))return a(t,n);if(t instanceof Map)return new Map(a(Array.from(t),n));if(t instanceof Set)return new Set(a(Array.from(t),n));var d={};for(var h in t){var E=t[h];typeof E!="object"||E===null?d[h]=E:E instanceof Date?d[h]=new Date(E):E instanceof Map?d[h]=new Map(a(Array.from(E),n)):E instanceof Set?d[h]=new Set(a(Array.from(E),n)):ArrayBuffer.isView(E)?d[h]=f(E):d[h]=n(E)}return d}:function n(t){if(typeof t!="object"||t===null)return t;if(t instanceof Date)return new Date(t);if(Array.isArray(t))return a(t,n);if(t instanceof Map)return new Map(a(Array.from(t),n));if(t instanceof Set)return new Set(a(Array.from(t),n));var d={};for(var h in t)if(Object.hasOwnProperty.call(t,h)!==!1){var E=t[h];typeof E!="object"||E===null?d[h]=E:E instanceof Date?d[h]=new Date(E):E instanceof Map?d[h]=new Map(a(Array.from(E),n)):E instanceof Set?d[h]=new Set(a(Array.from(E),n)):ArrayBuffer.isView(E)?d[h]=f(E):d[h]=n(E)}return d};function a(n,t){for(var d=Object.keys(n),h=new Array(d.length),E=0;E<d.length;E++){var k=d[E],x=n[k];typeof x!="object"||x===null?h[k]=x:x instanceof Date?h[k]=new Date(x):ArrayBuffer.isView(x)?h[k]=f(x):h[k]=t(x)}return h}}},9509:function(X,Q,C){var _=C(8764),f=_.Buffer;function I(n,t){for(var d in n)t[d]=n[d]}function a(n,t,d){return f(n,t,d)}f.from&&f.alloc&&f.allocUnsafe&&f.allocUnsafeSlow?X.exports=_:(I(_,Q),Q.Buffer=a),a.prototype=Object.create(f.prototype),I(f,a),a.from=function(n,t,d){if(typeof n=="number")throw new TypeError("Argument must not be a number");return f(n,t,d)},a.alloc=function(n,t,d){if(typeof n!="number")throw new TypeError("Argument must be a number");var h=f(n);return t!==void 0?typeof d=="string"?h.fill(t,d):h.fill(t):h.fill(0),h},a.allocUnsafe=function(n){if(typeof n!="number")throw new TypeError("Argument must be a number");return f(n)},a.allocUnsafeSlow=function(n){if(typeof n!="number")throw new TypeError("Argument must be a number");return _.SlowBuffer(n)}},1852:function(X){X.exports=function(Q){var C,_=Q._readableState;return _?_.objectMode||typeof Q._duplexState=="number"?Q.read():Q.read((C=_).buffer.length?C.buffer.head?C.buffer.head.data.length:C.buffer[0].length:C.length):null}},2553:function(X,Q,C){var _=C(9509).Buffer,f=_.isEncoding||function(l){switch((l=""+l)&&l.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function I(l){var g;switch(this.encoding=function(w){var W=function(G){if(!G)return"utf8";for(var J;;)switch(G){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return G;default:if(J)return;G=(""+G).toLowerCase(),J=!0}}(w);if(typeof W!="string"&&(_.isEncoding===f||!f(w)))throw new Error("Unknown encoding: "+w);return W||w}(l),this.encoding){case"utf16le":this.text=t,this.end=d,g=4;break;case"utf8":this.fillLast=n,g=4;break;case"base64":this.text=h,this.end=E,g=3;break;default:return this.write=k,void(this.end=x)}this.lastNeed=0,this.lastTotal=0,this.lastChar=_.allocUnsafe(g)}function a(l){return l<=127?0:l>>5==6?2:l>>4==14?3:l>>3==30?4:l>>6==2?-1:-2}function n(l){var g=this.lastTotal-this.lastNeed,w=function(W,G,J){if((192&G[0])!=128)return W.lastNeed=0,"�";if(W.lastNeed>1&&G.length>1){if((192&G[1])!=128)return W.lastNeed=1,"�";if(W.lastNeed>2&&G.length>2&&(192&G[2])!=128)return W.lastNeed=2,"�"}}(this,l);return w!==void 0?w:this.lastNeed<=l.length?(l.copy(this.lastChar,g,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(l.copy(this.lastChar,g,0,l.length),void(this.lastNeed-=l.length))}function t(l,g){if((l.length-g)%2==0){var w=l.toString("utf16le",g);if(w){var W=w.charCodeAt(w.length-1);if(W>=55296&&W<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=l[l.length-2],this.lastChar[1]=l[l.length-1],w.slice(0,-1)}return w}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=l[l.length-1],l.toString("utf16le",g,l.length-1)}function d(l){var g=l&&l.length?this.write(l):"";if(this.lastNeed){var w=this.lastTotal-this.lastNeed;return g+this.lastChar.toString("utf16le",0,w)}return g}function h(l,g){var w=(l.length-g)%3;return w===0?l.toString("base64",g):(this.lastNeed=3-w,this.lastTotal=3,w===1?this.lastChar[0]=l[l.length-1]:(this.lastChar[0]=l[l.length-2],this.lastChar[1]=l[l.length-1]),l.toString("base64",g,l.length-w))}function E(l){var g=l&&l.length?this.write(l):"";return this.lastNeed?g+this.lastChar.toString("base64",0,3-this.lastNeed):g}function k(l){return l.toString(this.encoding)}function x(l){return l&&l.length?this.write(l):""}Q.s=I,I.prototype.write=function(l){if(l.length===0)return"";var g,w;if(this.lastNeed){if((g=this.fillLast(l))===void 0)return"";w=this.lastNeed,this.lastNeed=0}else w=0;return w<l.length?g?g+this.text(l,w):this.text(l,w):g||""},I.prototype.end=function(l){var g=l&&l.length?this.write(l):"";return this.lastNeed?g+"�":g},I.prototype.text=function(l,g){var w=function(G,J,m){var b=J.length-1;if(b<m)return 0;var u=a(J[b]);return u>=0?(u>0&&(G.lastNeed=u-1),u):--b<m||u===-2?0:(u=a(J[b]))>=0?(u>0&&(G.lastNeed=u-2),u):--b<m||u===-2?0:(u=a(J[b]))>=0?(u>0&&(u===2?u=0:G.lastNeed=u-3),u):0}(this,l,g);if(!this.lastNeed)return l.toString("utf8",g);this.lastTotal=w;var W=l.length-(w-this.lastNeed);return l.copy(this.lastChar,0,W),l.toString("utf8",g,W)},I.prototype.fillLast=function(l){if(this.lastNeed<=l.length)return l.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);l.copy(this.lastChar,this.lastTotal-this.lastNeed,0,l.length),this.lastNeed-=l.length}},2511:function(X,Q,C){var _;X=C.nmd(X),function(f){Q&&Q.nodeType,X&&X.nodeType;var I=typeof C.g=="object"&&C.g;I.global!==I&&I.window!==I&&I.self;var a,n=2147483647,t=36,d=/^xn--/,h=/[^\x20-\x7E]/,E=/[\x2E\u3002\uFF0E\uFF61]/g,k={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},x=Math.floor,l=String.fromCharCode;function g(U){throw RangeError(k[U])}function w(U,F){for(var P=U.length,V=[];P--;)V[P]=F(U[P]);return V}function W(U,F){var P=U.split("@"),V="";return P.length>1&&(V=P[0]+"@",U=P[1]),V+w((U=U.replace(E,".")).split("."),F).join(".")}function G(U){for(var F,P,V=[],T=0,y=U.length;T<y;)(F=U.charCodeAt(T++))>=55296&&F<=56319&&T<y?(64512&(P=U.charCodeAt(T++)))==56320?V.push(((1023&F)<<10)+(1023&P)+65536):(V.push(F),T--):V.push(F);return V}function J(U){return w(U,function(F){var P="";return F>65535&&(P+=l((F-=65536)>>>10&1023|55296),F=56320|1023&F),P+l(F)}).join("")}function m(U,F){return U+22+75*(U<26)-((F!=0)<<5)}function b(U,F,P){var V=0;for(U=P?x(U/700):U>>1,U+=x(U/F);U>455;V+=t)U=x(U/35);return x(V+36*U/(U+38))}function u(U){var F,P,V,T,y,N,q,p,O,L,z,e=[],s=U.length,B=0,D=128,Y=72;for((P=U.lastIndexOf("-"))<0&&(P=0),V=0;V<P;++V)U.charCodeAt(V)>=128&&g("not-basic"),e.push(U.charCodeAt(V));for(T=P>0?P+1:0;T<s;){for(y=B,N=1,q=t;T>=s&&g("invalid-input"),((p=(z=U.charCodeAt(T++))-48<10?z-22:z-65<26?z-65:z-97<26?z-97:t)>=t||p>x((n-B)/N))&&g("overflow"),B+=p*N,!(p<(O=q<=Y?1:q>=Y+26?26:q-Y));q+=t)N>x(n/(L=t-O))&&g("overflow"),N*=L;Y=b(B-y,F=e.length+1,y==0),x(B/F)>n-D&&g("overflow"),D+=x(B/F),B%=F,e.splice(B++,0,D)}return J(e)}function M(U){var F,P,V,T,y,N,q,p,O,L,z,e,s,B,D,Y=[];for(e=(U=G(U)).length,F=128,P=0,y=72,N=0;N<e;++N)(z=U[N])<128&&Y.push(l(z));for(V=T=Y.length,T&&Y.push("-");V<e;){for(q=n,N=0;N<e;++N)(z=U[N])>=F&&z<q&&(q=z);for(q-F>x((n-P)/(s=V+1))&&g("overflow"),P+=(q-F)*s,F=q,N=0;N<e;++N)if((z=U[N])<F&&++P>n&&g("overflow"),z==F){for(p=P,O=t;!(p<(L=O<=y?1:O>=y+26?26:O-y));O+=t)D=p-L,B=t-L,Y.push(l(m(L+D%B,0))),p=x(D/B);Y.push(l(m(p,0))),y=b(P,s,V==T),P=0,++V}++P,++F}return Y.join("")}a={version:"1.3.2",ucs2:{decode:G,encode:J},decode:u,encode:M,toASCII:function(U){return W(U,function(F){return h.test(F)?"xn--"+M(F):F})},toUnicode:function(U){return W(U,function(F){return d.test(F)?u(F.slice(4).toLowerCase()):F})}},(_=(function(){return a}).call(Q,C,Q,X))===void 0||(X.exports=_)}()},8575:function(X,Q,C){var _=C(2511),f=C(2502);function I(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}Q.parse=J,Q.resolve=function(m,b){return J(m,!1,!0).resolve(b)},Q.resolveObject=function(m,b){return m?J(m,!1,!0).resolveObject(b):b},Q.format=function(m){return f.isString(m)&&(m=J(m)),m instanceof I?m.format():I.prototype.format.call(m)},Q.Url=I;var a=/^([a-z0-9.+-]+:)/i,n=/:[0-9]*$/,t=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,d=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r",`
`,"	"]),h=["'"].concat(d),E=["%","/","?",";","#"].concat(h),k=["/","?","#"],x=/^[+a-z0-9A-Z_-]{0,63}$/,l=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,g={javascript:!0,"javascript:":!0},w={javascript:!0,"javascript:":!0},W={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},G=C(7673);function J(m,b,u){if(m&&f.isObject(m)&&m instanceof I)return m;var M=new I;return M.parse(m,b,u),M}I.prototype.parse=function(m,b,u){if(!f.isString(m))throw new TypeError("Parameter 'url' must be a string, not "+typeof m);var M=m.indexOf("?"),U=M!==-1&&M<m.indexOf("#")?"?":"#",F=m.split(U);F[0]=F[0].replace(/\\/g,"/");var P=m=F.join(U);if(P=P.trim(),!u&&m.split("#").length===1){var V=t.exec(P);if(V)return this.path=P,this.href=P,this.pathname=V[1],V[2]?(this.search=V[2],this.query=b?G.parse(this.search.substr(1)):this.search.substr(1)):b&&(this.search="",this.query={}),this}var T=a.exec(P);if(T){var y=(T=T[0]).toLowerCase();this.protocol=y,P=P.substr(T.length)}if(u||T||P.match(/^\/\/[^@\/]+@[^@\/]+/)){var N=P.substr(0,2)==="//";!N||T&&w[T]||(P=P.substr(2),this.slashes=!0)}if(!w[T]&&(N||T&&!W[T])){for(var q,p,O=-1,L=0;L<k.length;L++)(z=P.indexOf(k[L]))!==-1&&(O===-1||z<O)&&(O=z);for((p=O===-1?P.lastIndexOf("@"):P.lastIndexOf("@",O))!==-1&&(q=P.slice(0,p),P=P.slice(p+1),this.auth=decodeURIComponent(q)),O=-1,L=0;L<E.length;L++){var z;(z=P.indexOf(E[L]))!==-1&&(O===-1||z<O)&&(O=z)}O===-1&&(O=P.length),this.host=P.slice(0,O),P=P.slice(O),this.parseHost(),this.hostname=this.hostname||"";var e=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!e)for(var s=this.hostname.split(/\./),B=(L=0,s.length);L<B;L++){var D=s[L];if(D&&!D.match(x)){for(var Y="",K=0,A=D.length;K<A;K++)D.charCodeAt(K)>127?Y+="x":Y+=D[K];if(!Y.match(x)){var R=s.slice(0,L),r=s.slice(L+1),o=D.match(l);o&&(R.push(o[1]),r.unshift(o[2])),r.length&&(P="/"+r.join(".")+P),this.hostname=R.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),e||(this.hostname=_.toASCII(this.hostname));var S=this.port?":"+this.port:"",j=this.hostname||"";this.host=j+S,this.href+=this.host,e&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),P[0]!=="/"&&(P="/"+P))}if(!g[y])for(L=0,B=h.length;L<B;L++){var H=h[L];if(P.indexOf(H)!==-1){var tt=encodeURIComponent(H);tt===H&&(tt=escape(H)),P=P.split(H).join(tt)}}var rt=P.indexOf("#");rt!==-1&&(this.hash=P.substr(rt),P=P.slice(0,rt));var it=P.indexOf("?");if(it!==-1?(this.search=P.substr(it),this.query=P.substr(it+1),b&&(this.query=G.parse(this.query)),P=P.slice(0,it)):b&&(this.search="",this.query={}),P&&(this.pathname=P),W[y]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){S=this.pathname||"";var ot=this.search||"";this.path=S+ot}return this.href=this.format(),this},I.prototype.format=function(){var m=this.auth||"";m&&(m=(m=encodeURIComponent(m)).replace(/%3A/i,":"),m+="@");var b=this.protocol||"",u=this.pathname||"",M=this.hash||"",U=!1,F="";this.host?U=m+this.host:this.hostname&&(U=m+(this.hostname.indexOf(":")===-1?this.hostname:"["+this.hostname+"]"),this.port&&(U+=":"+this.port)),this.query&&f.isObject(this.query)&&Object.keys(this.query).length&&(F=G.stringify(this.query));var P=this.search||F&&"?"+F||"";return b&&b.substr(-1)!==":"&&(b+=":"),this.slashes||(!b||W[b])&&U!==!1?(U="//"+(U||""),u&&u.charAt(0)!=="/"&&(u="/"+u)):U||(U=""),M&&M.charAt(0)!=="#"&&(M="#"+M),P&&P.charAt(0)!=="?"&&(P="?"+P),b+U+(u=u.replace(/[?#]/g,function(V){return encodeURIComponent(V)}))+(P=P.replace("#","%23"))+M},I.prototype.resolve=function(m){return this.resolveObject(J(m,!1,!0)).format()},I.prototype.resolveObject=function(m){if(f.isString(m)){var b=new I;b.parse(m,!1,!0),m=b}for(var u=new I,M=Object.keys(this),U=0;U<M.length;U++){var F=M[U];u[F]=this[F]}if(u.hash=m.hash,m.href==="")return u.href=u.format(),u;if(m.slashes&&!m.protocol){for(var P=Object.keys(m),V=0;V<P.length;V++){var T=P[V];T!=="protocol"&&(u[T]=m[T])}return W[u.protocol]&&u.hostname&&!u.pathname&&(u.path=u.pathname="/"),u.href=u.format(),u}if(m.protocol&&m.protocol!==u.protocol){if(!W[m.protocol]){for(var y=Object.keys(m),N=0;N<y.length;N++){var q=y[N];u[q]=m[q]}return u.href=u.format(),u}if(u.protocol=m.protocol,m.host||w[m.protocol])u.pathname=m.pathname;else{for(var p=(m.pathname||"").split("/");p.length&&!(m.host=p.shift()););m.host||(m.host=""),m.hostname||(m.hostname=""),p[0]!==""&&p.unshift(""),p.length<2&&p.unshift(""),u.pathname=p.join("/")}if(u.search=m.search,u.query=m.query,u.host=m.host||"",u.auth=m.auth,u.hostname=m.hostname||m.host,u.port=m.port,u.pathname||u.search){var O=u.pathname||"",L=u.search||"";u.path=O+L}return u.slashes=u.slashes||m.slashes,u.href=u.format(),u}var z=u.pathname&&u.pathname.charAt(0)==="/",e=m.host||m.pathname&&m.pathname.charAt(0)==="/",s=e||z||u.host&&m.pathname,B=s,D=u.pathname&&u.pathname.split("/")||[],Y=(p=m.pathname&&m.pathname.split("/")||[],u.protocol&&!W[u.protocol]);if(Y&&(u.hostname="",u.port=null,u.host&&(D[0]===""?D[0]=u.host:D.unshift(u.host)),u.host="",m.protocol&&(m.hostname=null,m.port=null,m.host&&(p[0]===""?p[0]=m.host:p.unshift(m.host)),m.host=null),s=s&&(p[0]===""||D[0]==="")),e)u.host=m.host||m.host===""?m.host:u.host,u.hostname=m.hostname||m.hostname===""?m.hostname:u.hostname,u.search=m.search,u.query=m.query,D=p;else if(p.length)D||(D=[]),D.pop(),D=D.concat(p),u.search=m.search,u.query=m.query;else if(!f.isNullOrUndefined(m.search))return Y&&(u.hostname=u.host=D.shift(),(o=!!(u.host&&u.host.indexOf("@")>0)&&u.host.split("@"))&&(u.auth=o.shift(),u.host=u.hostname=o.shift())),u.search=m.search,u.query=m.query,f.isNull(u.pathname)&&f.isNull(u.search)||(u.path=(u.pathname?u.pathname:"")+(u.search?u.search:"")),u.href=u.format(),u;if(!D.length)return u.pathname=null,u.search?u.path="/"+u.search:u.path=null,u.href=u.format(),u;for(var K=D.slice(-1)[0],A=(u.host||m.host||D.length>1)&&(K==="."||K==="..")||K==="",R=0,r=D.length;r>=0;r--)(K=D[r])==="."?D.splice(r,1):K===".."?(D.splice(r,1),R++):R&&(D.splice(r,1),R--);if(!s&&!B)for(;R--;R)D.unshift("..");!s||D[0]===""||D[0]&&D[0].charAt(0)==="/"||D.unshift(""),A&&D.join("/").substr(-1)!=="/"&&D.push("");var o,S=D[0]===""||D[0]&&D[0].charAt(0)==="/";return Y&&(u.hostname=u.host=S?"":D.length?D.shift():"",(o=!!(u.host&&u.host.indexOf("@")>0)&&u.host.split("@"))&&(u.auth=o.shift(),u.host=u.hostname=o.shift())),(s=s||u.host&&D.length)&&!S&&D.unshift(""),D.length?u.pathname=D.join("/"):(u.pathname=null,u.path=null),f.isNull(u.pathname)&&f.isNull(u.search)||(u.path=(u.pathname?u.pathname:"")+(u.search?u.search:"")),u.auth=m.auth||u.auth,u.slashes=u.slashes||m.slashes,u.href=u.format(),u},I.prototype.parseHost=function(){var m=this.host,b=n.exec(m);b&&((b=b[0])!==":"&&(this.port=b.substr(1)),m=m.substr(0,m.length-b.length)),m&&(this.hostname=m)}},2502:function(X){X.exports={isString:function(Q){return typeof Q=="string"},isObject:function(Q){return typeof Q=="object"&&Q!==null},isNull:function(Q){return Q===null},isNullOrUndefined:function(Q){return Q==null}}},4927:function(X,Q,C){function _(f){try{if(!C.g.localStorage)return!1}catch{return!1}var I=C.g.localStorage[f];return I!=null&&String(I).toLowerCase()==="true"}X.exports=function(f,I){if(_("noDeprecation"))return f;var a=!1;return function(){if(!a){if(_("throwDeprecation"))throw new Error(I);_("traceDeprecation")?console.trace(I):console.warn(I),a=!0}return f.apply(this,arguments)}}},2479:function(X){X.exports=function Q(C,_){if(C&&_)return Q(C)(_);if(typeof C!="function")throw new TypeError("need wrapper function");return Object.keys(C).forEach(function(I){f[I]=C[I]}),f;function f(){for(var I=new Array(arguments.length),a=0;a<I.length;a++)I[a]=arguments[a];var n=C.apply(this,I),t=I[I.length-1];return typeof n=="function"&&n!==t&&Object.keys(t).forEach(function(d){n[d]=t[d]}),n}}},7026:function(X){X.exports=function(){throw new Error("ws does not work in the browser. Browser clients must use the native WebSocket object")}},7529:function(X){X.exports=function(){for(var C={},_=0;_<arguments.length;_++){var f=arguments[_];for(var I in f)Q.call(f,I)&&(C[I]=f[I])}return C};var Q=Object.prototype.hasOwnProperty},9602:function(X){X.exports=function(Q){Q.prototype[Symbol.iterator]=function*(){for(let C=this.head;C;C=C.next)yield C.value}}},4411:function(X,Q,C){function _(n){var t=this;if(t instanceof _||(t=new _),t.tail=null,t.head=null,t.length=0,n&&typeof n.forEach=="function")n.forEach(function(E){t.push(E)});else if(arguments.length>0)for(var d=0,h=arguments.length;d<h;d++)t.push(arguments[d]);return t}function f(n,t){n.tail=new a(t,n.tail,null,n),n.head||(n.head=n.tail),n.length++}function I(n,t){n.head=new a(t,null,n.head,n),n.tail||(n.tail=n.head),n.length++}function a(n,t,d,h){if(!(this instanceof a))return new a(n,t,d,h);this.list=h,this.value=n,t?(t.next=this,this.prev=t):this.prev=null,d?(d.prev=this,this.next=d):this.next=null}X.exports=_,_.Node=a,_.create=_,_.prototype.removeNode=function(n){if(n.list!==this)throw new Error("removing node which does not belong to this list");var t=n.next,d=n.prev;return t&&(t.prev=d),d&&(d.next=t),n===this.head&&(this.head=t),n===this.tail&&(this.tail=d),n.list.length--,n.next=null,n.prev=null,n.list=null,t},_.prototype.unshiftNode=function(n){if(n!==this.head){n.list&&n.list.removeNode(n);var t=this.head;n.list=this,n.next=t,t&&(t.prev=n),this.head=n,this.tail||(this.tail=n),this.length++}},_.prototype.pushNode=function(n){if(n!==this.tail){n.list&&n.list.removeNode(n);var t=this.tail;n.list=this,n.prev=t,t&&(t.next=n),this.tail=n,this.head||(this.head=n),this.length++}},_.prototype.push=function(){for(var n=0,t=arguments.length;n<t;n++)f(this,arguments[n]);return this.length},_.prototype.unshift=function(){for(var n=0,t=arguments.length;n<t;n++)I(this,arguments[n]);return this.length},_.prototype.pop=function(){if(this.tail){var n=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,n}},_.prototype.shift=function(){if(this.head){var n=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,n}},_.prototype.forEach=function(n,t){t=t||this;for(var d=this.head,h=0;d!==null;h++)n.call(t,d.value,h,this),d=d.next},_.prototype.forEachReverse=function(n,t){t=t||this;for(var d=this.tail,h=this.length-1;d!==null;h--)n.call(t,d.value,h,this),d=d.prev},_.prototype.get=function(n){for(var t=0,d=this.head;d!==null&&t<n;t++)d=d.next;if(t===n&&d!==null)return d.value},_.prototype.getReverse=function(n){for(var t=0,d=this.tail;d!==null&&t<n;t++)d=d.prev;if(t===n&&d!==null)return d.value},_.prototype.map=function(n,t){t=t||this;for(var d=new _,h=this.head;h!==null;)d.push(n.call(t,h.value,this)),h=h.next;return d},_.prototype.mapReverse=function(n,t){t=t||this;for(var d=new _,h=this.tail;h!==null;)d.push(n.call(t,h.value,this)),h=h.prev;return d},_.prototype.reduce=function(n,t){var d,h=this.head;if(arguments.length>1)d=t;else{if(!this.head)throw new TypeError("Reduce of empty list with no initial value");h=this.head.next,d=this.head.value}for(var E=0;h!==null;E++)d=n(d,h.value,E),h=h.next;return d},_.prototype.reduceReverse=function(n,t){var d,h=this.tail;if(arguments.length>1)d=t;else{if(!this.tail)throw new TypeError("Reduce of empty list with no initial value");h=this.tail.prev,d=this.tail.value}for(var E=this.length-1;h!==null;E--)d=n(d,h.value,E),h=h.prev;return d},_.prototype.toArray=function(){for(var n=new Array(this.length),t=0,d=this.head;d!==null;t++)n[t]=d.value,d=d.next;return n},_.prototype.toArrayReverse=function(){for(var n=new Array(this.length),t=0,d=this.tail;d!==null;t++)n[t]=d.value,d=d.prev;return n},_.prototype.slice=function(n,t){(t=t||this.length)<0&&(t+=this.length),(n=n||0)<0&&(n+=this.length);var d=new _;if(t<n||t<0)return d;n<0&&(n=0),t>this.length&&(t=this.length);for(var h=0,E=this.head;E!==null&&h<n;h++)E=E.next;for(;E!==null&&h<t;h++,E=E.next)d.push(E.value);return d},_.prototype.sliceReverse=function(n,t){(t=t||this.length)<0&&(t+=this.length),(n=n||0)<0&&(n+=this.length);var d=new _;if(t<n||t<0)return d;n<0&&(n=0),t>this.length&&(t=this.length);for(var h=this.length,E=this.tail;E!==null&&h>t;h--)E=E.prev;for(;E!==null&&h>n;h--,E=E.prev)d.push(E.value);return d},_.prototype.splice=function(n,t,...d){n>this.length&&(n=this.length-1),n<0&&(n=this.length+n);for(var h=0,E=this.head;E!==null&&h<n;h++)E=E.next;var k,x,l,g,w=[];for(h=0;E&&h<t;h++)w.push(E.value),E=this.removeNode(E);for(E===null&&(E=this.tail),E!==this.head&&E!==this.tail&&(E=E.prev),h=0;h<d.length;h++)k=this,x=E,l=d[h],g=void 0,(g=x===k.head?new a(l,null,x,k):new a(l,x,x.next,k)).next===null&&(k.tail=g),g.prev===null&&(k.head=g),k.length++,E=g;return w},_.prototype.reverse=function(){for(var n=this.head,t=this.tail,d=n;d!==null;d=d.prev){var h=d.prev;d.prev=d.next,d.next=h}return this.head=t,this.tail=n,this};try{C(9602)(_)}catch{}},10:function(){},4995:function(){},2361:function(){},4616:function(){},3518:function(X,Q,C){var _=C(4155);const f=C(7187).EventEmitter,I=C(2681),a=C(8254),n=C(226),t=C(1772),d=C(298),h=C(8473).Writable,E=C(5717),k=C(5408),x=C(1697),l=C(3380),g=C(7529),w=C(1227)("mqttjs:client"),W=_?_.nextTick:function(T){setTimeout(T,0)},G=C.g.setImmediate||function(T){W(T)},J={keepalive:60,reschedulePings:!0,protocolId:"MQTT",protocolVersion:4,reconnectPeriod:1e3,connectTimeout:3e4,clean:!0,resubscribe:!0},m=["ECONNREFUSED","EADDRINUSE","ECONNRESET","ENOTFOUND"],b={0:"",1:"Unacceptable protocol version",2:"Identifier rejected",3:"Server unavailable",4:"Bad username or password",5:"Not authorized",16:"No matching subscribers",17:"No subscription existed",128:"Unspecified error",129:"Malformed Packet",130:"Protocol Error",131:"Implementation specific error",132:"Unsupported Protocol Version",133:"Client Identifier not valid",134:"Bad User Name or Password",135:"Not authorized",136:"Server unavailable",137:"Server busy",138:"Banned",139:"Server shutting down",140:"Bad authentication method",141:"Keep Alive timeout",142:"Session taken over",143:"Topic Filter invalid",144:"Topic Name invalid",145:"Packet identifier in use",146:"Packet Identifier not found",147:"Receive Maximum exceeded",148:"Topic Alias invalid",149:"Packet too large",150:"Message rate too high",151:"Quota exceeded",152:"Administrative action",153:"Payload format invalid",154:"Retain not supported",155:"QoS not supported",156:"Use another server",157:"Server moved",158:"Shared Subscriptions not supported",159:"Connection rate exceeded",160:"Maximum connect time",161:"Subscription Identifiers not supported",162:"Wildcard Subscriptions not supported"};function u(T,y){let N;y.properties&&(N=y.properties.topicAlias);let q=y.topic.toString();if(q.length===0){if(N===void 0)return new Error("Unregistered Topic Alias");if(q=T.topicAliasSend.getTopicByAlias(N),q===void 0)return new Error("Unregistered Topic Alias");y.topic=q}N&&delete y.properties.topicAlias}function M(T,y,N){w("sendPacket :: packet: %O",y),w("sendPacket :: emitting `packetsend`"),T.emit("packetsend",y),w("sendPacket :: writing to stream");const q=t.writeToStream(y,T.stream,T.options);w("sendPacket :: writeToStream result %s",q),!q&&N&&N!==P?(w("sendPacket :: handle events on `drain` once through callback."),T.stream.once("drain",N)):N&&(w("sendPacket :: invoking cb"),N())}function U(T){T&&(w("flush: queue exists? %b",!!T),Object.keys(T).forEach(function(y){typeof T[y].cb=="function"&&(T[y].cb(new Error("Connection closed")),delete T[y])}))}function F(T,y,N,q){w("storeAndSend :: store packet with cmd %s to outgoingStore",y.cmd);let p,O=y;if(O.cmd==="publish"&&(O=x(y),p=u(T,O),p))return N&&N(p);T.outgoingStore.put(O,function(L){if(L)return N&&N(L);q(),M(T,y,N)})}function P(T){w("nop ::",T)}function V(T,y){let N;const q=this;if(!(this instanceof V))return new V(T,y);for(N in this.options=y||{},J)this.options[N]===void 0?this.options[N]=J[N]:this.options[N]=y[N];w("MqttClient :: options.protocol",y.protocol),w("MqttClient :: options.protocolVersion",y.protocolVersion),w("MqttClient :: options.username",y.username),w("MqttClient :: options.keepalive",y.keepalive),w("MqttClient :: options.reconnectPeriod",y.reconnectPeriod),w("MqttClient :: options.rejectUnauthorized",y.rejectUnauthorized),w("MqttClient :: options.topicAliasMaximum",y.topicAliasMaximum),this.options.clientId=typeof y.clientId=="string"?y.clientId:"mqttjs_"+Math.random().toString(16).substr(2,8),w("MqttClient :: clientId",this.options.clientId),this.options.customHandleAcks=y.protocolVersion===5&&y.customHandleAcks?y.customHandleAcks:function(){arguments[3](0)},this.streamBuilder=T,this.messageIdProvider=this.options.messageIdProvider===void 0?new d:this.options.messageIdProvider,this.outgoingStore=y.outgoingStore||new I,this.incomingStore=y.incomingStore||new I,this.queueQoSZero=y.queueQoSZero===void 0||y.queueQoSZero,this._resubscribeTopics={},this.messageIdToTopic={},this.pingTimer=null,this.connected=!1,this.disconnecting=!1,this.queue=[],this.connackTimer=null,this.reconnectTimer=null,this._storeProcessing=!1,this._packetIdsDuringStoreProcessing={},this._storeProcessingQueue=[],this.outgoing={},this._firstConnection=!0,y.topicAliasMaximum>0&&(y.topicAliasMaximum>65535?w("MqttClient :: options.topicAliasMaximum is out of range"):this.topicAliasRecv=new a(y.topicAliasMaximum)),this.on("connect",function(){const p=this.queue;w("connect :: sending queued packets"),function O(){const L=p.shift();w("deliver :: entry %o",L);let z=null;if(!L)return void q._resubscribe();z=L.packet,w("deliver :: call _sendPacket for %o",z);let e=!0;z.messageId&&z.messageId!==0&&(q.messageIdProvider.register(z.messageId)||(e=!1)),e?q._sendPacket(z,function(s){L.cb&&L.cb(s),O()}):(w("messageId: %d has already used. The message is skipped and removed.",z.messageId),O())}()}),this.on("close",function(){w("close :: connected set to `false`"),this.connected=!1,w("close :: clearing connackTimer"),clearTimeout(this.connackTimer),w("close :: clearing ping timer"),q.pingTimer!==null&&(q.pingTimer.clear(),q.pingTimer=null),this.topicAliasRecv&&this.topicAliasRecv.clear(),w("close :: calling _setupReconnect"),this._setupReconnect()}),f.call(this),w("MqttClient :: setting up stream"),this._setupStream()}E(V,f),V.prototype._setupStream=function(){const T=this,y=new h,N=t.parser(this.options);let q=null;const p=[];function O(){if(p.length)W(L);else{const e=q;q=null,e()}}function L(){w("work :: getting next packet in queue");const e=p.shift();if(e)w("work :: packet pulled from queue"),T._handlePacket(e,O);else{w("work :: no packets in queue");const s=q;q=null,w("work :: done flag is %s",!!s),s&&s()}}w("_setupStream :: calling method to clear reconnect"),this._clearReconnect(),w("_setupStream :: using streamBuilder provided to client to create stream"),this.stream=this.streamBuilder(this),N.on("packet",function(e){w("parser :: on packet push to packets array."),p.push(e)}),y._write=function(e,s,B){q=B,w("writable stream :: parsing buffer"),N.parse(e),L()},w("_setupStream :: pipe stream to writable stream"),this.stream.pipe(y),this.stream.on("error",function(e){w("streamErrorHandler :: error",e.message),m.includes(e.code)?(w("streamErrorHandler :: emitting error"),T.emit("error",e)):P(e)}),this.stream.on("close",function(){var e;w("(%s)stream :: on close",T.options.clientId),(e=T.outgoing)&&(w("flushVolatile :: deleting volatile messages from the queue and setting their callbacks as error function"),Object.keys(e).forEach(function(s){e[s].volatile&&typeof e[s].cb=="function"&&(e[s].cb(new Error("Connection closed")),delete e[s])})),w("stream: emit close to MqttClient"),T.emit("close")}),w("_setupStream: sending packet `connect`");const z=Object.create(this.options);if(z.cmd="connect",this.topicAliasRecv&&(z.properties||(z.properties={}),this.topicAliasRecv&&(z.properties.topicAliasMaximum=this.topicAliasRecv.max)),M(this,z),N.on("error",this.emit.bind(this,"error")),this.options.properties){if(!this.options.properties.authenticationMethod&&this.options.properties.authenticationData)return T.end(()=>this.emit("error",new Error("Packet has no Authentication Method"))),this;this.options.properties.authenticationMethod&&this.options.authPacket&&typeof this.options.authPacket=="object"&&M(this,g({cmd:"auth",reasonCode:0},this.options.authPacket))}this.stream.setMaxListeners(1e3),clearTimeout(this.connackTimer),this.connackTimer=setTimeout(function(){w("!!connectTimeout hit!! Calling _cleanUp with force `true`"),T._cleanUp(!0)},this.options.connectTimeout)},V.prototype._handlePacket=function(T,y){const N=this.options;if(N.protocolVersion===5&&N.properties&&N.properties.maximumPacketSize&&N.properties.maximumPacketSize<T.length)return this.emit("error",new Error("exceeding packets size "+T.cmd)),this.end({reasonCode:149,properties:{reasonString:"Maximum packet size was exceeded"}}),this;switch(w("_handlePacket :: emitting packetreceive"),this.emit("packetreceive",T),T.cmd){case"publish":this._handlePublish(T,y);break;case"puback":case"pubrec":case"pubcomp":case"suback":case"unsuback":this._handleAck(T),y();break;case"pubrel":this._handlePubrel(T,y);break;case"connack":this._handleConnack(T),y();break;case"auth":this._handleAuth(T),y();break;case"pingresp":this._handlePingresp(T),y();break;case"disconnect":this._handleDisconnect(T),y()}},V.prototype._checkDisconnecting=function(T){return this.disconnecting&&(T&&T!==P?T(new Error("client disconnecting")):this.emit("error",new Error("client disconnecting"))),this.disconnecting},V.prototype.publish=function(T,y,N,q){w("publish :: message `%s` to topic `%s`",y,T);const p=this.options;if(typeof N=="function"&&(q=N,N=null),N=g({qos:0,retain:!1,dup:!1},N),this._checkDisconnecting(q))return this;const O=this,L=function(){let z=0;if((N.qos===1||N.qos===2)&&(z=O._nextId(),z===null))return w("No messageId left"),!1;const e={cmd:"publish",topic:T,payload:y,qos:N.qos,retain:N.retain,messageId:z,dup:N.dup};switch(p.protocolVersion===5&&(e.properties=N.properties),w("publish :: qos",N.qos),N.qos){case 1:case 2:O.outgoing[e.messageId]={volatile:!1,cb:q||P},w("MqttClient:publish: packet cmd: %s",e.cmd),O._sendPacket(e,void 0,N.cbStorePut);break;default:w("MqttClient:publish: packet cmd: %s",e.cmd),O._sendPacket(e,q,N.cbStorePut)}return!0};return(this._storeProcessing||this._storeProcessingQueue.length>0||!L())&&this._storeProcessingQueue.push({invoke:L,cbStorePut:N.cbStorePut,callback:q}),this},V.prototype.subscribe=function(){const T=this,y=new Array(arguments.length);for(let D=0;D<arguments.length;D++)y[D]=arguments[D];const N=[];let q=y.shift();const p=q.resubscribe;let O=y.pop()||P,L=y.pop();const z=this.options.protocolVersion;delete q.resubscribe,typeof q=="string"&&(q=[q]),typeof O!="function"&&(L=O,O=P);const e=l.validateTopics(q);if(e!==null)return G(O,new Error("Invalid topic "+e)),this;if(this._checkDisconnecting(O))return w("subscribe: discconecting true"),this;const s={qos:0};if(z===5&&(s.nl=!1,s.rap=!1,s.rh=0),L=g(s,L),Array.isArray(q)?q.forEach(function(D){if(w("subscribe: array topic %s",D),!Object.prototype.hasOwnProperty.call(T._resubscribeTopics,D)||T._resubscribeTopics[D].qos<L.qos||p){const Y={topic:D,qos:L.qos};z===5&&(Y.nl=L.nl,Y.rap=L.rap,Y.rh=L.rh,Y.properties=L.properties),w("subscribe: pushing topic `%s` and qos `%s` to subs list",Y.topic,Y.qos),N.push(Y)}}):Object.keys(q).forEach(function(D){if(w("subscribe: object topic %s",D),!Object.prototype.hasOwnProperty.call(T._resubscribeTopics,D)||T._resubscribeTopics[D].qos<q[D].qos||p){const Y={topic:D,qos:q[D].qos};z===5&&(Y.nl=q[D].nl,Y.rap=q[D].rap,Y.rh=q[D].rh,Y.properties=L.properties),w("subscribe: pushing `%s` to subs list",Y),N.push(Y)}}),!N.length)return O(null,[]),this;const B=function(){const D=T._nextId();if(D===null)return w("No messageId left"),!1;const Y={cmd:"subscribe",subscriptions:N,qos:1,retain:!1,dup:!1,messageId:D};if(L.properties&&(Y.properties=L.properties),T.options.resubscribe){w("subscribe :: resubscribe true");const K=[];N.forEach(function(A){if(T.options.reconnectPeriod>0){const R={qos:A.qos};z===5&&(R.nl=A.nl||!1,R.rap=A.rap||!1,R.rh=A.rh||0,R.properties=A.properties),T._resubscribeTopics[A.topic]=R,K.push(A.topic)}}),T.messageIdToTopic[Y.messageId]=K}return T.outgoing[Y.messageId]={volatile:!0,cb:function(K,A){if(!K){const R=A.granted;for(let r=0;r<R.length;r+=1)N[r].qos=R[r]}O(K,N)}},w("subscribe :: call _sendPacket"),T._sendPacket(Y),!0};return(this._storeProcessing||this._storeProcessingQueue.length>0||!B())&&this._storeProcessingQueue.push({invoke:B,callback:O}),this},V.prototype.unsubscribe=function(){const T=this,y=new Array(arguments.length);for(let z=0;z<arguments.length;z++)y[z]=arguments[z];let N=y.shift(),q=y.pop()||P,p=y.pop();typeof N=="string"&&(N=[N]),typeof q!="function"&&(p=q,q=P);const O=l.validateTopics(N);if(O!==null)return G(q,new Error("Invalid topic "+O)),this;if(T._checkDisconnecting(q))return this;const L=function(){const z=T._nextId();if(z===null)return w("No messageId left"),!1;const e={cmd:"unsubscribe",qos:1,messageId:z};return typeof N=="string"?e.unsubscriptions=[N]:Array.isArray(N)&&(e.unsubscriptions=N),T.options.resubscribe&&e.unsubscriptions.forEach(function(s){delete T._resubscribeTopics[s]}),typeof p=="object"&&p.properties&&(e.properties=p.properties),T.outgoing[e.messageId]={volatile:!0,cb:q},w("unsubscribe: call _sendPacket"),T._sendPacket(e),!0};return(this._storeProcessing||this._storeProcessingQueue.length>0||!L())&&this._storeProcessingQueue.push({invoke:L,callback:q}),this},V.prototype.end=function(T,y,N){const q=this;function p(){w("end :: closeStores: closing incoming and outgoing stores"),q.disconnected=!0,q.incomingStore.close(function(L){q.outgoingStore.close(function(z){if(w("end :: closeStores: emitting end"),q.emit("end"),N){const e=L||z;w("end :: closeStores: invoking callback with args"),N(e)}})}),q._deferredReconnect&&q._deferredReconnect()}function O(){w("end :: (%s) :: finish :: calling _cleanUp with force %s",q.options.clientId,T),q._cleanUp(T,()=>{w("end :: finish :: calling process.nextTick on closeStores"),W(p.bind(q))},y)}return w("end :: (%s)",this.options.clientId),T!=null&&typeof T=="boolean"||(N=y||P,y=T,T=!1,typeof y!="object"&&(N=y,y=null,typeof N!="function"&&(N=P))),typeof y!="object"&&(N=y,y=null),w("end :: cb? %s",!!N),N=N||P,this.disconnecting?(N(),this):(this._clearReconnect(),this.disconnecting=!0,!T&&Object.keys(this.outgoing).length>0?(w("end :: (%s) :: calling finish in 10ms once outgoing is empty",q.options.clientId),this.once("outgoingEmpty",setTimeout.bind(null,O,10))):(w("end :: (%s) :: immediately calling finish",q.options.clientId),O()),this)},V.prototype.removeOutgoingMessage=function(T){const y=this.outgoing[T]?this.outgoing[T].cb:null;return delete this.outgoing[T],this.outgoingStore.del({messageId:T},function(){y(new Error("Message removed"))}),this},V.prototype.reconnect=function(T){w("client reconnect");const y=this,N=function(){T?(y.options.incomingStore=T.incomingStore,y.options.outgoingStore=T.outgoingStore):(y.options.incomingStore=null,y.options.outgoingStore=null),y.incomingStore=y.options.incomingStore||new I,y.outgoingStore=y.options.outgoingStore||new I,y.disconnecting=!1,y.disconnected=!1,y._deferredReconnect=null,y._reconnect()};return this.disconnecting&&!this.disconnected?this._deferredReconnect=N:N(),this},V.prototype._reconnect=function(){w("_reconnect: emitting reconnect to client"),this.emit("reconnect"),this.connected?(this.end(()=>{this._setupStream()}),w("client already connected. disconnecting first.")):(w("_reconnect: calling _setupStream"),this._setupStream())},V.prototype._setupReconnect=function(){const T=this;!T.disconnecting&&!T.reconnectTimer&&T.options.reconnectPeriod>0?(this.reconnecting||(w("_setupReconnect :: emit `offline` state"),this.emit("offline"),w("_setupReconnect :: set `reconnecting` to `true`"),this.reconnecting=!0),w("_setupReconnect :: setting reconnectTimer for %d ms",T.options.reconnectPeriod),T.reconnectTimer=setInterval(function(){w("reconnectTimer :: reconnect triggered!"),T._reconnect()},T.options.reconnectPeriod)):w("_setupReconnect :: doing nothing...")},V.prototype._clearReconnect=function(){w("_clearReconnect : clearing reconnect timer"),this.reconnectTimer&&(clearInterval(this.reconnectTimer),this.reconnectTimer=null)},V.prototype._cleanUp=function(T,y){const N=arguments[2];if(y&&(w("_cleanUp :: done callback provided for on stream close"),this.stream.on("close",y)),w("_cleanUp :: forced? %s",T),T)this.options.reconnectPeriod===0&&this.options.clean&&U(this.outgoing),w("_cleanUp :: (%s) :: destroying stream",this.options.clientId),this.stream.destroy();else{const q=g({cmd:"disconnect"},N);w("_cleanUp :: (%s) :: call _sendPacket with disconnect packet",this.options.clientId),this._sendPacket(q,G.bind(null,this.stream.end.bind(this.stream)))}this.disconnecting||(w("_cleanUp :: client not disconnecting. Clearing and resetting reconnect."),this._clearReconnect(),this._setupReconnect()),this.pingTimer!==null&&(w("_cleanUp :: clearing pingTimer"),this.pingTimer.clear(),this.pingTimer=null),y&&!this.connected&&(w("_cleanUp :: (%s) :: removing stream `done` callback `close` listener",this.options.clientId),this.stream.removeListener("close",y),y())},V.prototype._sendPacket=function(T,y,N){w("_sendPacket :: (%s) ::  start",this.options.clientId),N=N||P,y=y||P;const q=function(p,O){if(p.options.protocolVersion===5&&O.cmd==="publish"){let L;O.properties&&(L=O.properties.topicAlias);const z=O.topic.toString();if(p.topicAliasSend)if(L){if(z.length!==0&&(w("applyTopicAlias :: register topic: %s - alias: %d",z,L),!p.topicAliasSend.put(z,L)))return w("applyTopicAlias :: error out of range. topic: %s - alias: %d",z,L),new Error("Sending Topic Alias out of range")}else z.length!==0&&(p.options.autoAssignTopicAlias?(L=p.topicAliasSend.getAliasByTopic(z),L?(O.topic="",O.properties={...O.properties,topicAlias:L},w("applyTopicAlias :: auto assign(use) topic: %s - alias: %d",z,L)):(L=p.topicAliasSend.getLruAlias(),p.topicAliasSend.put(z,L),O.properties={...O.properties,topicAlias:L},w("applyTopicAlias :: auto assign topic: %s - alias: %d",z,L))):p.options.autoUseTopicAlias&&(L=p.topicAliasSend.getAliasByTopic(z),L&&(O.topic="",O.properties={...O.properties,topicAlias:L},w("applyTopicAlias :: auto use topic: %s - alias: %d",z,L))));else if(L)return w("applyTopicAlias :: error out of range. topic: %s - alias: %d",z,L),new Error("Sending Topic Alias out of range")}}(this,T);if(q)y(q);else{if(!this.connected)return T.cmd==="auth"?(this._shiftPingInterval(),void M(this,T,y)):(w("_sendPacket :: client not connected. Storing packet offline."),void this._storePacket(T,y,N));switch(this._shiftPingInterval(),T.cmd){case"publish":break;case"pubrel":return void F(this,T,y,N);default:return void M(this,T,y)}switch(T.qos){case 2:case 1:F(this,T,y,N);break;default:M(this,T,y)}w("_sendPacket :: (%s) ::  end",this.options.clientId)}},V.prototype._storePacket=function(T,y,N){w("_storePacket :: packet: %o",T),w("_storePacket :: cb? %s",!!y),N=N||P;let q=T;if(q.cmd==="publish"){q=x(T);const p=u(this,q);if(p)return y&&y(p)}(q.qos||0)===0&&this.queueQoSZero||q.cmd!=="publish"?this.queue.push({packet:q,cb:y}):q.qos>0?(y=this.outgoing[q.messageId]?this.outgoing[q.messageId].cb:null,this.outgoingStore.put(q,function(p){if(p)return y&&y(p);N()})):y&&y(new Error("No connection to broker"))},V.prototype._setupPingTimer=function(){w("_setupPingTimer :: keepalive %d (seconds)",this.options.keepalive);const T=this;!this.pingTimer&&this.options.keepalive&&(this.pingResp=!0,this.pingTimer=k(function(){T._checkPing()},1e3*this.options.keepalive))},V.prototype._shiftPingInterval=function(){this.pingTimer&&this.options.keepalive&&this.options.reschedulePings&&this.pingTimer.reschedule(1e3*this.options.keepalive)},V.prototype._checkPing=function(){w("_checkPing :: checking ping..."),this.pingResp?(w("_checkPing :: ping response received. Clearing flag and sending `pingreq`"),this.pingResp=!1,this._sendPacket({cmd:"pingreq"})):(w("_checkPing :: calling _cleanUp with force true"),this._cleanUp(!0))},V.prototype._handlePingresp=function(){this.pingResp=!0},V.prototype._handleConnack=function(T){w("_handleConnack");const y=this.options,N=y.protocolVersion===5?T.reasonCode:T.returnCode;if(clearTimeout(this.connackTimer),delete this.topicAliasSend,T.properties){if(T.properties.topicAliasMaximum){if(T.properties.topicAliasMaximum>65535)return void this.emit("error",new Error("topicAliasMaximum from broker is out of range"));T.properties.topicAliasMaximum>0&&(this.topicAliasSend=new n(T.properties.topicAliasMaximum))}T.properties.serverKeepAlive&&y.keepalive&&(y.keepalive=T.properties.serverKeepAlive,this._shiftPingInterval()),T.properties.maximumPacketSize&&(y.properties||(y.properties={}),y.properties.maximumPacketSize=T.properties.maximumPacketSize)}if(N===0)this.reconnecting=!1,this._onConnect(T);else if(N>0){const q=new Error("Connection refused: "+b[N]);q.code=N,this.emit("error",q)}},V.prototype._handleAuth=function(T){const y=this.options.protocolVersion,N=y===5?T.reasonCode:T.returnCode;if(y!==5){const p=new Error("Protocol error: Auth packets are only supported in MQTT 5. Your version:"+y);return p.code=N,void this.emit("error",p)}const q=this;this.handleAuth(T,function(p,O){if(p)q.emit("error",p);else if(N===24)q.reconnecting=!1,q._sendPacket(O);else{const L=new Error("Connection refused: "+b[N]);p.code=N,q.emit("error",L)}})},V.prototype.handleAuth=function(T,y){y()},V.prototype._handlePublish=function(T,y){w("_handlePublish: packet %o",T),y=y!==void 0?y:P;let N=T.topic.toString();const q=T.payload,p=T.qos,O=T.messageId,L=this,z=this.options,e=[0,16,128,131,135,144,145,151,153];if(this.options.protocolVersion===5){let s;if(T.properties&&(s=T.properties.topicAlias),s!==void 0)if(N.length===0){if(!(s>0&&s<=65535))return w("_handlePublish :: topic alias out of range. alias: %d",s),void this.emit("error",new Error("Received Topic Alias is out of range"));{const B=this.topicAliasRecv.getTopicByAlias(s);if(!B)return w("_handlePublish :: unregistered topic alias. alias: %d",s),void this.emit("error",new Error("Received unregistered Topic Alias"));N=B,w("_handlePublish :: topic complemented by alias. topic: %s - alias: %d",N,s)}}else{if(!this.topicAliasRecv.put(N,s))return w("_handlePublish :: topic alias out of range. alias: %d",s),void this.emit("error",new Error("Received Topic Alias is out of range"));w("_handlePublish :: registered topic: %s - alias: %d",N,s)}}switch(w("_handlePublish: qos %d",p),p){case 2:z.customHandleAcks(N,q,T,function(s,B){return s instanceof Error||(B=s,s=null),s?L.emit("error",s):e.indexOf(B)===-1?L.emit("error",new Error("Wrong reason code for pubrec")):void(B?L._sendPacket({cmd:"pubrec",messageId:O,reasonCode:B},y):L.incomingStore.put(T,function(){L._sendPacket({cmd:"pubrec",messageId:O},y)}))});break;case 1:z.customHandleAcks(N,q,T,function(s,B){return s instanceof Error||(B=s,s=null),s?L.emit("error",s):e.indexOf(B)===-1?L.emit("error",new Error("Wrong reason code for puback")):(B||L.emit("message",N,q,T),void L.handleMessage(T,function(D){if(D)return y&&y(D);L._sendPacket({cmd:"puback",messageId:O,reasonCode:B},y)}))});break;case 0:this.emit("message",N,q,T),this.handleMessage(T,y);break;default:w("_handlePublish: unknown QoS. Doing nothing.")}},V.prototype.handleMessage=function(T,y){y()},V.prototype._handleAck=function(T){const y=T.messageId,N=T.cmd;let q=null;const p=this.outgoing[y]?this.outgoing[y].cb:null,O=this;let L;if(p){switch(w("_handleAck :: packet type",N),N){case"pubcomp":case"puback":{const z=T.reasonCode;z&&z>0&&z!==16&&(L=new Error("Publish error: "+b[z]),L.code=z,p(L,T)),delete this.outgoing[y],this.outgoingStore.del(T,p),this.messageIdProvider.deallocate(y),this._invokeStoreProcessingQueue();break}case"pubrec":{q={cmd:"pubrel",qos:2,messageId:y};const z=T.reasonCode;z&&z>0&&z!==16?(L=new Error("Publish error: "+b[z]),L.code=z,p(L,T)):this._sendPacket(q);break}case"suback":delete this.outgoing[y],this.messageIdProvider.deallocate(y);for(let z=0;z<T.granted.length;z++)if(128&T.granted[z]){const e=this.messageIdToTopic[y];e&&e.forEach(function(s){delete O._resubscribeTopics[s]})}this._invokeStoreProcessingQueue(),p(null,T);break;case"unsuback":delete this.outgoing[y],this.messageIdProvider.deallocate(y),this._invokeStoreProcessingQueue(),p(null);break;default:O.emit("error",new Error("unrecognized packet type"))}this.disconnecting&&Object.keys(this.outgoing).length===0&&this.emit("outgoingEmpty")}else w("_handleAck :: Server sent an ack in error. Ignoring.")},V.prototype._handlePubrel=function(T,y){w("handling pubrel packet"),y=y!==void 0?y:P;const N=T.messageId,q=this,p={cmd:"pubcomp",messageId:N};q.incomingStore.get(T,function(O,L){O?q._sendPacket(p,y):(q.emit("message",L.topic,L.payload,L),q.handleMessage(L,function(z){if(z)return y(z);q.incomingStore.del(L,P),q._sendPacket(p,y)}))})},V.prototype._handleDisconnect=function(T){this.emit("disconnect",T)},V.prototype._nextId=function(){return this.messageIdProvider.allocate()},V.prototype.getLastMessageId=function(){return this.messageIdProvider.getLastAllocated()},V.prototype._resubscribe=function(){w("_resubscribe");const T=Object.keys(this._resubscribeTopics);if(!this._firstConnection&&(this.options.clean||this.options.protocolVersion===5&&!this.connackPacket.sessionPresent)&&T.length>0)if(this.options.resubscribe)if(this.options.protocolVersion===5){w("_resubscribe: protocolVersion 5");for(let y=0;y<T.length;y++){const N={};N[T[y]]=this._resubscribeTopics[T[y]],N.resubscribe=!0,this.subscribe(N,{properties:N[T[y]].properties})}}else this._resubscribeTopics.resubscribe=!0,this.subscribe(this._resubscribeTopics);else this._resubscribeTopics={};this._firstConnection=!1},V.prototype._onConnect=function(T){if(this.disconnected)return void this.emit("connect",T);const y=this;this.connackPacket=T,this.messageIdProvider.clear(),this._setupPingTimer(),this.connected=!0,function N(){let q=y.outgoingStore.createStream();function p(){y._storeProcessing=!1,y._packetIdsDuringStoreProcessing={}}function O(){q.destroy(),q=null,y._flushStoreProcessingQueue(),p()}y.once("close",O),q.on("error",function(L){p(),y._flushStoreProcessingQueue(),y.removeListener("close",O),y.emit("error",L)}),q.on("end",function(){let L=!0;for(const z in y._packetIdsDuringStoreProcessing)if(!y._packetIdsDuringStoreProcessing[z]){L=!1;break}L?(p(),y.removeListener("close",O),y._invokeAllStoreProcessingQueue(),y.emit("connect",T)):N()}),function L(){if(!q)return;y._storeProcessing=!0;const z=q.read(1);let e;z?y._packetIdsDuringStoreProcessing[z.messageId]?L():y.disconnecting||y.reconnectTimer?q.destroy&&q.destroy():(e=y.outgoing[z.messageId]?y.outgoing[z.messageId].cb:null,y.outgoing[z.messageId]={volatile:!1,cb:function(s,B){e&&e(s,B),L()}},y._packetIdsDuringStoreProcessing[z.messageId]=!0,y.messageIdProvider.register(z.messageId)?y._sendPacket(z):w("messageId: %d has already used.",z.messageId)):q.once("readable",L)}()}()},V.prototype._invokeStoreProcessingQueue=function(){if(this._storeProcessingQueue.length>0){const T=this._storeProcessingQueue[0];if(T&&T.invoke())return this._storeProcessingQueue.shift(),!0}return!1},V.prototype._invokeAllStoreProcessingQueue=function(){for(;this._invokeStoreProcessingQueue(););},V.prototype._flushStoreProcessingQueue=function(){for(const T of this._storeProcessingQueue)T.cbStorePut&&T.cbStorePut(new Error("Connection closed")),T.callback&&T.callback(new Error("Connection closed"));this._storeProcessingQueue.splice(0)},X.exports=V},9908:function(X,Q,C){const{Buffer:_}=C(8764),f=C(8473).Transform,I=C(5981);let a,n,t,d=!1;X.exports=function(h,E){if(E.hostname=E.hostname||E.host,!E.hostname)throw new Error("Could not determine host. Specify host manually.");const k=E.protocolId==="MQIsdp"&&E.protocolVersion===3?"mqttv3.1":"mqtt";(function(l){l.hostname||(l.hostname="localhost"),l.path||(l.path="/"),l.wsOptions||(l.wsOptions={})})(E);const x=function(l,g){const w=l.protocol==="alis"?"wss":"ws";let W=w+"://"+l.hostname+l.path;return l.port&&l.port!==80&&l.port!==443&&(W=w+"://"+l.hostname+":"+l.port+l.path),typeof l.transformWsUrl=="function"&&(W=l.transformWsUrl(W,l,g)),W}(E,h);return a=E.my,a.connectSocket({url:x,protocols:k}),n=function(){const l=new f;return l._write=function(g,w,W){a.sendSocketMessage({data:g.buffer,success:function(){W()},fail:function(){W(new Error)}})},l._flush=function(g){a.closeSocket({success:function(){g()}})},l}(),t=I.obj(),d||(d=!0,a.onSocketOpen(function(){t.setReadable(n),t.setWritable(n),t.emit("connect")}),a.onSocketMessage(function(l){if(typeof l.data=="string"){const g=_.from(l.data,"base64");n.push(g)}else{const g=new FileReader;g.addEventListener("load",function(){let w=g.result;w=w instanceof ArrayBuffer?_.from(w):_.from(w,"utf8"),n.push(w)}),g.readAsArrayBuffer(l.data)}}),a.onSocketClose(function(){t.end(),t.destroy()}),a.onSocketError(function(l){t.destroy(l)})),t}},2878:function(X,Q,C){var _=C(4155);const f=C(3518),I=C(2681),a=C(8575),n=C(7529),t=C(1227)("mqttjs"),d={};function h(E,k){if(t("connecting to an MQTT broker..."),typeof E!="object"||k||(k=E,E=null),k=k||{},E){const l=a.parse(E,!0);if(l.port!=null&&(l.port=Number(l.port)),(k=n(l,k)).protocol===null)throw new Error("Missing protocol");k.protocol=k.protocol.replace(/:$/,"")}if(function(l){let g;l.auth&&(g=l.auth.match(/^(.+):(.+)$/),g?(l.username=g[1],l.password=g[2]):l.username=l.auth)}(k),k.query&&typeof k.query.clientId=="string"&&(k.clientId=k.query.clientId),k.cert&&k.key){if(!k.protocol)throw new Error("Missing secure protocol key");if(["mqtts","wss","wxs","alis"].indexOf(k.protocol)===-1)switch(k.protocol){case"mqtt":k.protocol="mqtts";break;case"ws":k.protocol="wss";break;case"wx":k.protocol="wxs";break;case"ali":k.protocol="alis";break;default:throw new Error('Unknown protocol for secure connection: "'+k.protocol+'"!')}}if(!d[k.protocol]){const l=["mqtts","wss"].indexOf(k.protocol)!==-1;k.protocol=["mqtt","mqtts","ws","wss","wx","wxs","ali","alis"].filter(function(g,w){return(!l||w%2!=0)&&typeof d[g]=="function"})[0]}if(k.clean===!1&&!k.clientId)throw new Error("Missing clientId for unclean clients");k.protocol&&(k.defaultProtocol=k.protocol);const x=new f(function(l){return k.servers&&(l._reconnectCount&&l._reconnectCount!==k.servers.length||(l._reconnectCount=0),k.host=k.servers[l._reconnectCount].host,k.port=k.servers[l._reconnectCount].port,k.protocol=k.servers[l._reconnectCount].protocol?k.servers[l._reconnectCount].protocol:k.defaultProtocol,k.hostname=k.host,l._reconnectCount++),t("calling streambuilder for",k.protocol),d[k.protocol](l,k)},k);return x.on("error",function(){}),x}_!==void 0&&_.title!=="browser"||typeof C!="function"?(d.mqtt=C(4983),d.tcp=C(4983),d.ssl=C(4606),d.tls=C(4606),d.mqtts=C(4606)):(d.wx=C(7465),d.wxs=C(7465),d.ali=C(9908),d.alis=C(9908)),d.ws=C(4574),d.wss=C(4574),X.exports=h,X.exports.connect=h,X.exports.MqttClient=f,X.exports.Store=I},4983:function(X,Q,C){const _=C(10),f=C(1227)("mqttjs:tcp");X.exports=function(I,a){a.port=a.port||1883,a.hostname=a.hostname||a.host||"localhost";const n=a.port,t=a.hostname;return f("port %d and host %s",n,t),_.createConnection(n,t)}},4606:function(X,Q,C){const _=C(4995),f=C(10),I=C(1227)("mqttjs:tls");X.exports=function(a,n){n.port=n.port||8883,n.host=n.hostname||n.host||"localhost",f.isIP(n.host)===0&&(n.servername=n.host),n.rejectUnauthorized=n.rejectUnauthorized!==!1,delete n.path,I("port %d host %s rejectUnauthorized %b",n.port,n.host,n.rejectUnauthorized);const t=_.connect(n);function d(h){n.rejectUnauthorized&&a.emit("error",h),t.end()}return t.on("secureConnect",function(){n.rejectUnauthorized&&!t.authorized?t.emit("error",new Error("TLS not authorized")):t.removeListener("error",d)}),t.on("error",d),t}},4574:function(X,Q,C){var _=C(4155);const{Buffer:f}=C(8764),I=C(7026),a=C(1227)("mqttjs:ws"),n=C(5981),t=C(8473).Transform,d=["rejectUnauthorized","ca","cert","key","pfx","passphrase"],h=_!==void 0&&_.title==="browser"||typeof C=="function";function E(x,l){let g=x.protocol+"://"+x.hostname+":"+x.port+x.path;return typeof x.transformWsUrl=="function"&&(g=x.transformWsUrl(g,x,l)),g}function k(x){const l=x;return x.hostname||(l.hostname="localhost"),x.port||(x.protocol==="wss"?l.port=443:l.port=80),x.path||(l.path="/"),x.wsOptions||(l.wsOptions={}),h||x.protocol!=="wss"||d.forEach(function(g){Object.prototype.hasOwnProperty.call(x,g)&&!Object.prototype.hasOwnProperty.call(x.wsOptions,g)&&(l.wsOptions[g]=x[g])}),l}X.exports=h?function(x,l){let g;a("browserStreamBuilder");const w=function(T){const y=k(T);if(y.hostname||(y.hostname=y.host),!y.hostname){if(typeof document>"u")throw new Error("Could not determine host. Specify host manually.");const N=new URL(document.URL);y.hostname=N.hostname,y.port||(y.port=N.port)}return y.objectMode===void 0&&(y.objectMode=!(y.binary===!0||y.binary===void 0)),y}(l),W=w.browserBufferSize||524288,G=l.browserBufferTimeout||1e3,J=!l.objectMode,m=function(T,y){const N=y.protocolId==="MQIsdp"&&y.protocolVersion===3?"mqttv3.1":"mqtt",q=E(y,T),p=new WebSocket(q,[N]);return p.binaryType="arraybuffer",p}(x,l),b=function(T,y,N){const q=new t({objectModeMode:T.objectMode});return q._write=function p(O,L,z){m.bufferedAmount>W&&setTimeout(p,G,O,L,z),J&&typeof O=="string"&&(O=f.from(O,"utf8"));try{m.send(O)}catch(e){return z(e)}z()},q._flush=function(p){m.close(),p()},q}(l);l.objectMode||(b._writev=V),b.on("close",()=>{m.close()});const u=m.addEventListener!==void 0;function M(){g.setReadable(b),g.setWritable(b),g.emit("connect")}function U(){g.end(),g.destroy()}function F(T){g.destroy(T)}function P(T){let y=T.data;y=y instanceof ArrayBuffer?f.from(y):f.from(y,"utf8"),b.push(y)}function V(T,y){const N=new Array(T.length);for(let q=0;q<T.length;q++)typeof T[q].chunk=="string"?N[q]=f.from(T[q],"utf8"):N[q]=T[q].chunk;this._write(f.concat(N),"binary",y)}return m.readyState===m.OPEN?g=b:(g=g=n(void 0,void 0,l),l.objectMode||(g._writev=V),u?m.addEventListener("open",M):m.onopen=M),g.socket=m,u?(m.addEventListener("close",U),m.addEventListener("error",F),m.addEventListener("message",P)):(m.onclose=U,m.onerror=F,m.onmessage=P),g}:function(x,l){a("streamBuilder");const g=k(l),w=E(g,x),W=function(J,m,b){a("createWebSocket"),a("protocol: "+b.protocolId+" "+b.protocolVersion);const u=b.protocolId==="MQIsdp"&&b.protocolVersion===3?"mqttv3.1":"mqtt";return a("creating new Websocket for url: "+m+" and protocol: "+u),new I(m,[u],b.wsOptions)}(0,w,g),G=I.createWebSocketStream(W,g.wsOptions);return G.url=w,W.on("close",()=>{G.destroy()}),G}},7465:function(X,Q,C){const{Buffer:_}=C(8764),f=C(8473).Transform,I=C(5981);let a,n,t;X.exports=function(d,h){if(h.hostname=h.hostname||h.host,!h.hostname)throw new Error("Could not determine host. Specify host manually.");const E=h.protocolId==="MQIsdp"&&h.protocolVersion===3?"mqttv3.1":"mqtt";(function(l){l.hostname||(l.hostname="localhost"),l.path||(l.path="/"),l.wsOptions||(l.wsOptions={})})(h);const k=function(l,g){const w=l.protocol==="wxs"?"wss":"ws";let W=w+"://"+l.hostname+l.path;return l.port&&l.port!==80&&l.port!==443&&(W=w+"://"+l.hostname+":"+l.port+l.path),typeof l.transformWsUrl=="function"&&(W=l.transformWsUrl(W,l,g)),W}(h,d);a=wx.connectSocket({url:k,protocols:[E]}),n=function(){const l=new f;return l._write=function(g,w,W){a.send({data:g.buffer,success:function(){W()},fail:function(G){W(new Error(G))}})},l._flush=function(g){a.close({success:function(){g()}})},l}(),t=I.obj(),t._destroy=function(l,g){a.close({success:function(){g&&g(l)}})};const x=t.destroy;return t.destroy=(function(){t.destroy=x;const l=this;setTimeout(function(){a.close({fail:function(){l._destroy(new Error)}})},0)}).bind(t),a.onOpen(function(){t.setReadable(n),t.setWritable(n),t.emit("connect")}),a.onMessage(function(l){let g=l.data;g=g instanceof ArrayBuffer?_.from(g):_.from(g,"utf8"),n.push(g)}),a.onClose(function(){t.end(),t.destroy()}),a.onError(function(l){t.destroy(new Error(l.errMsg))}),t}},298:function(X){function Q(){if(!(this instanceof Q))return new Q;this.nextId=Math.max(1,Math.floor(65535*Math.random()))}Q.prototype.allocate=function(){const C=this.nextId++;return this.nextId===65536&&(this.nextId=1),C},Q.prototype.getLastAllocated=function(){return this.nextId===1?65535:this.nextId-1},Q.prototype.register=function(C){return!0},Q.prototype.deallocate=function(C){},Q.prototype.clear=function(){},X.exports=Q},2681:function(X,Q,C){const _=C(7529),f=C(8473).Readable,I={objectMode:!0},a={clean:!0};function n(t){if(!(this instanceof n))return new n(t);this.options=t||{},this.options=_(a,t),this._inflights=new Map}n.prototype.put=function(t,d){return this._inflights.set(t.messageId,t),d&&d(),this},n.prototype.createStream=function(){const t=new f(I),d=[];let h=!1,E=0;return this._inflights.forEach(function(k,x){d.push(k)}),t._read=function(){!h&&E<d.length?this.push(d[E++]):this.push(null)},t.destroy=function(){if(h)return;const k=this;h=!0,setTimeout(function(){k.emit("close")},0)},t},n.prototype.del=function(t,d){return(t=this._inflights.get(t.messageId))?(this._inflights.delete(t.messageId),d(null,t)):d&&d(new Error("missing packet")),this},n.prototype.get=function(t,d){return(t=this._inflights.get(t.messageId))?d(null,t):d&&d(new Error("missing packet")),this},n.prototype.close=function(t){this.options.clean&&(this._inflights=null),t&&t()},X.exports=n},8254:function(X){function Q(C){if(!(this instanceof Q))return new Q(C);this.aliasToTopic={},this.max=C}Q.prototype.put=function(C,_){return!(_===0||_>this.max||(this.aliasToTopic[_]=C,this.length=Object.keys(this.aliasToTopic).length,0))},Q.prototype.getTopicByAlias=function(C){return this.aliasToTopic[C]},Q.prototype.clear=function(){this.aliasToTopic={}},X.exports=Q},226:function(X,Q,C){const _=C(9593),f=C(423).Q;function I(a){if(!(this instanceof I))return new I(a);a>0&&(this.aliasToTopic=new _({max:a}),this.topicToAlias={},this.numberAllocator=new f(1,a),this.max=a,this.length=0)}I.prototype.put=function(a,n){if(n===0||n>this.max)return!1;const t=this.aliasToTopic.get(n);return t&&delete this.topicToAlias[t],this.aliasToTopic.set(n,a),this.topicToAlias[a]=n,this.numberAllocator.use(n),this.length=this.aliasToTopic.length,!0},I.prototype.getTopicByAlias=function(a){return this.aliasToTopic.get(a)},I.prototype.getAliasByTopic=function(a){const n=this.topicToAlias[a];return n!==void 0&&this.aliasToTopic.get(n),n},I.prototype.clear=function(){this.aliasToTopic.reset(),this.topicToAlias={},this.numberAllocator.clear(),this.length=0},I.prototype.getLruAlias=function(){return this.numberAllocator.firstVacant()||this.aliasToTopic.keys()[this.aliasToTopic.length-1]},X.exports=I},3380:function(X){function Q(C){const _=C.split("/");for(let f=0;f<_.length;f++)if(_[f]!=="+"){if(_[f]==="#")return f===_.length-1;if(_[f].indexOf("+")!==-1||_[f].indexOf("#")!==-1)return!1}return!0}X.exports={validateTopics:function(C){if(C.length===0)return"empty_topic_list";for(let _=0;_<C.length;_++)if(!Q(C[_]))return C[_];return null}}}},gt={};function ft(X){var Q=gt[X];if(Q!==void 0)return Q.exports;var C=gt[X]={id:X,loaded:!1,exports:{}};return dt[X].call(C.exports,C,C.exports,ft),C.loaded=!0,C.exports}ft.d=function(X,Q){for(var C in Q)ft.o(Q,C)&&!ft.o(X,C)&&Object.defineProperty(X,C,{enumerable:!0,get:Q[C]})},ft.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}(),ft.o=function(X,Q){return Object.prototype.hasOwnProperty.call(X,Q)},ft.nmd=function(X){return X.paths=[],X.children||(X.children=[]),X};var pt=ft(2878);vt.exports=pt})();var _t=vt.exports;const Et=wt(_t),kt="ws://192.168.2.5:1884/mqtt",mt=["DO","DETECTION"],Ct=()=>{const[dt,gt]=bt.useState({DO:"",DETECTION:""});return bt.useEffect(()=>{const ft=Et.connect(kt,{clientId:"mqttjs_"+Math.random().toString(16)});return ft.on("connect",()=>{console.log("Connected to MQTT broker"),ft.subscribe(mt,pt=>{pt?console.error("Failed to subscribe to topic:",pt):console.log(`Subscribed to topic: ${mt}`)})}),ft.on("message",(pt,X)=>{console.log(`Received message: ${X.toString()} from topic: ${pt}`),gt({...dt,DO:X.toString(),DETECTION:JSON.parse(X.toString()).result.toString()})}),()=>{ft.connected&&ft.end()}},[]),yt.jsxs("div",{children:[yt.jsx("h1",{children:"MQTT Subscription Example"}),yt.jsxs("div",{id:"messages",children:["DO : ",dt.DO]}),yt.jsxs("div",{id:"messages",children:["DETECTION : ",dt.DETECTION]})]})};export{Ct as default};
