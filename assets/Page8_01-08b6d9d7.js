import{r as s,j as e}from"./index-72a4631d.js";import{s as m}from"./page8_01.module-b4857cfc.js";import{a as x}from"./axios-21b846bc.js";function w(){const[l,p]=s.useState([]),[n,o]=s.useState(""),[c,u]=s.useState([]),[h,i]=s.useState([]);if(s.useEffect(()=>{const t="https://opendata.cwa.gov.tw/api/v1/rest/datastore/O-A0003-001?Authorization=CWA-EB3FD491-9755-4E3C-A31D-70C0FCCFD682&format=JSON";x.get(t).then(function(a){const r=a.data.records.location;p(r)}).catch(function(a){console.log(a)})},[]),s.useEffect(()=>{const t=l.filter(r=>r.parameter[2].parameterValue.toLowerCase()===n);u(t);const a=l.filter(r=>r.parameter[2].parameterValue.toLowerCase().includes(n.toLowerCase())).map(r=>r.parameter[2].parameterValue);i(a),n===""&&i([])},[n]),!l)return"No Post !!!";console.log("post",l);const d=t=>{o(t.target.value)};return e.jsxs("div",{className:m.main,children:[e.jsx("h1",{children:"天氣預報API"}),e.jsx("hr",{}),e.jsx("input",{value:n,type:"text",placeholder:"查詢地區",onChange:d}),c.length>0?null:e.jsx(e.Fragment,{children:e.jsx("ul",{children:h.map((t,a)=>e.jsx("li",{onClick:()=>o(t),style:{cursor:"pointer",color:"#001529",borderRadius:"20px",width:"10%",marginTop:"10px",padding:"10px",textAlign:"center"},children:t},a))})}),e.jsx("ul",{children:c.map((t,a)=>e.jsxs("li",{children:[e.jsxs("p",{children:["縣市：",t.parameter[0].parameterValue]}),e.jsxs("p",{children:["地區：",t.parameter[2].parameterValue]}),e.jsxs("p",{children:["測站位置：",t.locationName]}),e.jsxs("p",{children:["當前溫度：",t.weatherElement[3].elementValue]}),e.jsxs("p",{children:["更新時間：",t.time.obsTime]}),t.weatherElement[20].elementValue!=-99?e.jsx(e.Fragment,{children:e.jsxs("p",{children:["天氣：",t.weatherElement[20].elementValue]})}):null,t.weatherElement[19].elementValue!=-99?e.jsx(e.Fragment,{children:e.jsxs("p",{children:["十分鐘後溫度預測：",t.weatherElement[19].elementValue]})}):null,e.jsx("hr",{})]},a))})]})}export{w as default};
