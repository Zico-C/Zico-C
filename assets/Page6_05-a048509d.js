import{r as a,m as y,aP as T,j as t}from"./index-a645c50b.js";import{s as C}from"./page8_01.module-ad5c13d7.js";const P=async n=>{try{(await fetch("http://localhost:3005/locationIP",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)})).ok?console.log("座標成功發送到後端"):console.error("無法發送座標到後端")}catch(o){console.error("發送請求時出現錯誤："+o)}};function w(){const[n,o]=a.useState(0),[u,d]=a.useState(0),s=a.useRef(null),[p,g]=y.useMessage(),m=T(P,{}),f=()=>{p.open({type:"warning",content:"請填入上傳人員"})},h=()=>{"geolocation"in navigator?navigator.geolocation.getCurrentPosition(function(x){var c,l;const{latitude:i,longitude:r}=x.coords,e=(c=s.current)==null?void 0:c.value;if(e!==""&&(e==null?void 0:e.trim())!==""){const j=new Date().toLocaleString("zh-TW");o(i),d(r),m.mutate({id:0,name:e,updateTime:`${j} UTC+8`,latitude:i,longitude:r})}else f(),(l=s.current)==null||l.focus()}):console.log("瀏覽器不支援地理位置服務")};return t.jsxs("div",{className:C.main,children:[g,t.jsx("input",{type:"text",placeholder:"上傳人員",ref:s}),t.jsx("br",{}),t.jsx("button",{onClick:h,children:"獲取並發送座標"}),t.jsxs("p",{children:["緯度：",n]}),t.jsxs("p",{children:["經度：",u]})]})}export{w as default};
