import{r as o,by as w,a as A,j as e}from"./index-d09cf888.js";import{s as D}from"./page8_01.module-9ab2ecea.js";function N(){const[n,j]=o.useState([]),[r,c]=o.useState(""),[i,E]=o.useState([]),[T,h]=o.useState([]),[S]=w(""),l=S.get("selectLocation")||"";if(o.useEffect(()=>{const t="https://opendata.cwa.gov.tw/api/v1/rest/datastore/O-A0003-001?Authorization=CWA-EB3FD491-9755-4E3C-A31D-70C0FCCFD682&format=JSON";A.get(t).then(function(a){const s=a.data.records.Station;j(s)}).catch(function(a){console.log(a)})},[]),o.useEffect(()=>{l&&(c(l),console.log("searchLocation",r),console.log("selectLocation",l))},[l]),o.useEffect(()=>{const t=n.filter(s=>s.GeoInfo.TownName.toLowerCase()===r);E(t);const a=n.filter(s=>s.GeoInfo.TownName.toLowerCase().includes(r.toLowerCase())).map(s=>s.GeoInfo.TownName);h(a),r===""&&h([])},[r,n]),!n)return"No Post !!!";console.log("post",n),console.log("filteredData");const C=t=>{c(t.target.value)};return e.jsxs("div",{className:D.main,children:[e.jsx("h1",{children:"天氣預報API"}),e.jsx("hr",{}),e.jsx("input",{value:r,type:"text",placeholder:"查詢地區",onChange:C}),i.length>0?null:e.jsx(e.Fragment,{children:e.jsx("ul",{children:T.map((t,a)=>e.jsx("li",{onClick:()=>c(t),style:{cursor:"pointer",color:"#001529",borderRadius:"20px",width:"100%",marginTop:"10px",padding:"10px",textAlign:"left"},children:t},a))})}),e.jsx("ul",{children:i.map((t,a)=>{var s,p,u,d,m,x,f,g;return e.jsxs("li",{children:[e.jsxs("p",{children:["縣市：",t.GeoInfo.CountyName]}),e.jsxs("p",{children:["地區：",t.GeoInfo.TownName]}),e.jsxs("p",{children:["測站位置：",t.StationName]}),e.jsxs("p",{children:["當前溫度：",t.WeatherElement.AirTemperature]}),e.jsxs("p",{children:["更新時間：",t.ObsTime.DateTime.toString().replace("T"," ").substring(0,19)]}),t.WeatherElement.AirTemperature!=-99?e.jsx(e.Fragment,{children:e.jsxs("p",{children:["天氣：",t.WeatherElement.Weather]})}):null,t.WeatherElement.AirTemperature!=-99?e.jsxs(e.Fragment,{children:[e.jsxs("p",{children:["今日最高溫：",(d=(u=(p=(s=t.WeatherElement)==null?void 0:s.DailyExtreme)==null?void 0:p.DailyHigh)==null?void 0:u.TemperatureInfo)==null?void 0:d.AirTemperature]}),e.jsxs("p",{children:["今日最低溫：",(g=(f=(x=(m=t.WeatherElement)==null?void 0:m.DailyExtreme)==null?void 0:x.DailyLow)==null?void 0:f.TemperatureInfo)==null?void 0:g.AirTemperature]})]}):null,e.jsx("hr",{})]},a)})})]})}export{N as default};
