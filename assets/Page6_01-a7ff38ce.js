import{by as L,bz as k,r as o,bA as B,bB as F,j as e,B as I,G as O,bC as A,a as g}from"./index-0ef130ba.js";import{M as E,T as P,d as V,a as W,b as _,P as D,l as G}from"./index-5f01d85c.js";/* empty css                   */import{G as u,b as h,r as N}from"./index.esm-c5ebd630.js";import{C as x,M as H}from"./index-8bb8f9fd.js";import{u as R}from"./useQuery-630941b5.js";import{T as J}from"./index-778a740c.js";import"./index-df21fa8f.js";import"./CheckOutlined-fa640ea2.js";import"./useLocale-1aa94a16.js";function m(r){return u({tag:"svg",attr:{version:"1.2",baseProfile:"tiny",viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M17.657 5.304c-3.124-3.073-8.189-3.073-11.313 0-3.124 3.074-3.124 8.057 0 11.13l5.656 5.565 5.657-5.565c3.124-3.073 3.124-8.056 0-11.13zm-5.657 8.195c-.668 0-1.295-.26-1.768-.732-.975-.975-.975-2.561 0-3.536.472-.472 1.1-.732 1.768-.732s1.296.26 1.768.732c.975.975.975 2.562 0 3.536-.472.472-1.1.732-1.768.732z"}}]})(r)}function f(r){return u({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256 48c-88 0-176 10.9-176 87.6v208c0 42.3 34.5 76.6 77 76.6L124 453v11h49.1l44-43.8H300l44 43.8h44v-10.9l-33-32.8c42.5 0 77-34.4 77-76.6v-208C432 58.9 353.2 48 256 48zm-99 328.4c-18.3 0-33-14.7-33-32.8s14.7-32.8 33-32.8 33 14.7 33 32.8-14.7 32.8-33 32.8zm77-153.2H124v-87.6h110v87.6zm44 0v-87.6h110v87.6H278zm77 153.2c-18.3 0-33-14.7-33-32.8s14.7-32.8 33-32.8 33 14.7 33 32.8-14.7 32.8-33 32.8z"}}]})(r)}const{useBreakpoint:Z}=O,{Text:l}=J;function oe(){const r=Z(),a=L(),y=k(),[j]=o.useState(15),[c]=o.useState(!1),[p]=o.useState(!1),[v,b]=o.useState({center:[24.80063398900308,120.97787231991643],zoom:12}),[d,w]=o.useState([]);o.useEffect(()=>{const t=localStorage.getItem("viewport");t&&b(JSON.parse(t))},[]);const S=async()=>{try{return g.defaults.baseURL="https://zico-c.github.io/mapMarkers_api",(await g.get("/mapMarkers.json")).data}catch(t){console.error("Error fetching data：",t)}},{data:s,status:M}=R(["map_Markers"],S,{refetchOnWindowFocus:!1,keepPreviousData:!0,cacheTime:1/0});o.useEffect(()=>{M==="success"&&(console.log(s),w(s==null?void 0:s.markers),a(B(s==null?void 0:s.markers)),localStorage.setItem("markers",JSON.stringify(s==null?void 0:s.markers)),a(F("123")))},[s]),console.log("data",s),console.log("markers",d);const z=(t,n,i)=>G.divIcon({className:"",html:N(e.jsxs("div",{children:[i==="景點"&&e.jsx(m,{style:{color:"#006400",fontSize:"2rem",marginLeft:"-11px",marginTop:"-20px"}}),i==="大眾交通工具"&&e.jsx(f,{style:{color:"#008FC7",fontSize:"2rem",marginLeft:"-11px",marginTop:"-20px"}}),i==="美食"&&e.jsx(h,{style:{color:"#dc3545",fontSize:"2rem",marginLeft:"-11px",marginTop:"-20px"}}),e.jsxs("div",{style:c||p?{backgroundColor:"#fff",opacity:"0.85",border:"1px solid #002fa7",borderRadius:"10px",padding:"5px",display:"inline-block"}:{display:"none"},children:[e.jsxs("p",{style:c?{fontWeight:"bold",marginBottom:"3px",whiteSpace:"nowrap"}:{display:"none"},children:[t,e.jsx("br",{})]}),e.jsx("p",{style:p?{fontWeight:"bold",whiteSpace:"nowrap"}:{display:"none"},children:i})]})]},n))}),T=t=>{localStorage.setItem("viewport",JSON.stringify(t))},C=t=>{console.log("type",t),a(A({name:[t.name],type:[t.type]})),y("/page6/page6_02")};return e.jsx(e.Fragment,{children:e.jsxs(x,{bodyStyle:{border:"1px solid gray",margin:"0",height:"calc(100vh - 150px)"},children:[e.jsxs("div",{id:"map",style:{height:"100%",width:"auto"},children:[e.jsx("h1",{children:"Leaflet 標記群組演示"}),e.jsxs(E,{viewport:v,onViewportChange:T,style:{height:"95%"},children:[e.jsx(P,{attribution:'© <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> 貢獻者',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),e.jsx(V,{disableClusteringAtZoom:j,removeOutsideVisibleBounds:!0,spiderfyDistanceMultiplier:1,showCoverageOnHover:!0,maxClusterRadius:35,children:d.map((t,n)=>e.jsxs(W,{position:t.position,icon:z(t.name,n,t.type),style:{color:"red",backgoundcolor:"blue"},children:[e.jsx(_,{direction:"bottom",offset:[-1,10],children:t.name}),e.jsx(D,{offset:[0,-11],children:e.jsxs(x,{hoverable:!0,cover:t.icon?e.jsx("img",{alt:t.name,src:t.icon}):null,bordered:!0,style:{width:234,margin:"0",padding:"0",cursor:"auto"},children:[e.jsx(H,{title:t.name,description:t.type}),e.jsx("hr",{color:"gray"}),t.officialWeb&&e.jsxs(e.Fragment,{children:[e.jsx("a",{href:t.officialWeb,target:"_new",children:"官方網站"}),e.jsx("br",{})]}),t.googleMap&&e.jsxs(e.Fragment,{children:[e.jsx("a",{href:t.googleMap,target:"_blank",children:"Google 地圖"}),e.jsx("br",{})]}),e.jsx(I,{type:"link",style:{padding:0},onClick:()=>C(t),children:"view page"})]})})]},t.id))})]},s)]}),e.jsx("div",{className:r.xs?"":"styles.markerWrapper",children:!r.xs&&e.jsxs(e.Fragment,{children:[e.jsx(m,{style:{color:"#006400",fontSize:"1.3rem"}}),e.jsx(l,{style:{verticalAlign:"4px"},children:" 景點 "}),e.jsx(f,{style:{color:"#008FC7",fontSize:"1.3rem"}}),e.jsx(l,{style:{verticalAlign:"4px"},children:" 大眾交通工具 "}),e.jsx(h,{style:{color:"#dc3545",fontSize:"1.3rem"}}),e.jsx(l,{style:{verticalAlign:"4px"},children:" 美食 "})]})})]})})}export{oe as default};
