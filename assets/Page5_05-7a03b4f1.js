import{r as s,aO as w,aP as T,j as e,aQ as n,B as z}from"./index-d4aac5e3.js";import{u as G}from"./useQuery-9a209ed1.js";import{s as d}from"./page5.module-e1e49839.js";import{u as N,F as o}from"./index-71f2a0c7.js";import{C as A}from"./index-9e6826f5.js";import"./row-d9e6a542.js";import"./useLocale-58076e9c.js";function H(){const C=async()=>{try{return await(await fetch("http://localhost:3003/markers")).json()}catch(t){console.log(t.message)}},v=async({id:t,position:a,name:O,type:W,officialWeb:L,googleMap:$,icon:q})=>{try{return await(await fetch("http://localhost:3003/markers",{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({id:t,position:a,name:O,type:W,officialWeb:L,googleMap:$,icon:q})})).json()}catch(I){console.log(I.message)}},[l,f]=s.useState(""),[i,m]=s.useState(""),[r,h]=s.useState(""),[c,g]=s.useState(""),[p,j]=s.useState(""),[u,x]=s.useState(""),[y]=N(),{data:S,isSuccess:b}=G(["mapMarkers"],C),P=w(),M=T(v,{onSuccess:t=>{P.invalidateQueries("mapMarkers"),console.log("創建Post成功",t)},onError:t=>{console.log("創建Post失敗",t)}}),F=()=>{try{const t=l.split(",").map(a=>parseFloat(a.trim()));M.mutate({id:0,position:t,name:i,type:r,officialWeb:c,googleMap:p,icon:u}),f(""),m(""),h(""),g(""),j(""),x(""),y.resetFields(),console.log("inputPosition",l),console.log("inputLocation",i),console.log("inputType",r),console.log("inputOfficialWeb",c),console.log("inputGoogleMap",p),console.log("inputIcon",u)}catch(t){console.error("解析 JSON 時發生錯誤:",t)}};return e.jsx(e.Fragment,{children:e.jsxs(A,{className:d.APImain,children:[e.jsx("h1",{children:"Post Markers Data"}),e.jsxs(o,{onFinish:F,labelCol:{span:4},wrapperCol:{span:16},form:y,children:[e.jsx(o.Item,{label:e.jsx("label",{style:{color:"#fff",fontSize:"1.3rem"},children:"Position"}),name:"Position",rules:[{required:!0,message:"請輸入正確的 座標格式 number,number",pattern:/^-?\d+(\.\d+)?,\s?-?\d+(\.\d+)?$/}],children:e.jsx(n,{autoComplete:"off",value:l,onChange:t=>f(t.target.value)})}),e.jsx(o.Item,{label:e.jsx("label",{style:{color:"#fff",fontSize:"1.3rem"},children:"Location"}),name:"Location",rules:[{required:!0,message:"請輸入名稱或地名"}],children:e.jsx(n,{autoComplete:"off",value:i,onChange:t=>m(t.target.value)})}),e.jsx(o.Item,{label:e.jsx("label",{style:{color:"#fff",fontSize:"1.3rem"},children:"Type"}),name:"Type",rules:[{required:!0,message:"請輸入類型 (ex:美食 | 景點 | 大眾交通工具)",pattern:/^(景點|美食|大眾交通工具)$/}],children:e.jsx(n,{autoComplete:"off",value:r,onChange:t=>h(t.target.value)})}),e.jsx(o.Item,{label:e.jsx("label",{style:{color:"#fff",fontSize:"1.3rem"},children:"OfficialWeb"}),name:"OfficialWeb",rules:[{required:!1,message:"請輸入官方網站URL",pattern:/^(https?):\/\/[^\s/$.?#].[^\s]*$/}],children:e.jsx(n,{autoComplete:"off",value:c,onChange:t=>g(t.target.value)})}),e.jsx(o.Item,{label:e.jsx("label",{style:{color:"#fff",fontSize:"1.3rem"},children:"GoogleMap"}),name:"GoogleMap",rules:[{required:!1,message:"請輸入 GoogleMap URL",pattern:/^(https?):\/\/[^\s/$.?#].[^\s]*$/}],children:e.jsx(n,{autoComplete:"off",value:p,onChange:t=>j(t.target.value)})}),e.jsx(o.Item,{label:e.jsx("label",{style:{color:"#fff",fontSize:"1.3rem"},children:"Icon"}),name:"Icon",rules:[{required:!1,message:"請輸入 照片檔案 URL",pattern:/^(https?):\/\/[^\s/$.?#].[^\s]*$/}],children:e.jsx(n,{autoComplete:"off",value:u,onChange:t=>x(t.target.value)})})," ",e.jsx(o.Item,{wrapperCol:{offset:4,span:16},className:d.Postbutton,children:e.jsx(z,{type:"primary",htmlType:"submit",children:"提交"})})]}),e.jsxs("div",{children:[b&&e.jsx("hr",{style:{width:"90%",marginBottom:"2rem"}}),b&&S.map(t=>e.jsxs("div",{className:d.card5_5,children:[e.jsxs("p",{children:[e.jsx("span",{children:"id："}),t.id]}),e.jsxs("p",{children:[e.jsx("span",{children:"position："}),t.position[0]+","+t.position[1]]}),e.jsxs("p",{children:[e.jsx("span",{children:"name："}),t.name]}),e.jsxs("p",{children:[e.jsx("span",{children:"type："}),t.type]}),e.jsxs("p",{style:t.officialWeb==null?{display:"none"}:void 0,children:[e.jsx("span",{children:"officialWeb："}),t.officialWeb]}),e.jsxs("p",{style:t.googleMap==null?{display:"none"}:void 0,children:[e.jsx("span",{children:"googleMap："}),t.googleMap]}),e.jsxs("p",{style:t.icon==null?{display:"none"}:void 0,children:[e.jsx("span",{children:"icon："}),t.icon]})]},t.id))]})]})})}export{H as default};
